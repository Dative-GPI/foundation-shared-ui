import{d as G,b as N,c as V,B as m,E as s,I as v,J as n,H as b,C as J,F as K,k as i,m as D,D as q,S as h,O as p,P as c,Q as C,G as k,A as T,K as w}from"./vue.esm-bundler-PONd4AmC.js";import{F as Q}from"./FSDialogMenu-XBy5gEQ2.js";import{F as H}from"./FSTextField-DpTxivyj.js";import{F as I}from"./FSCheckbox-B_D3nKx1.js";import{F as X}from"./FSTreeView-V-PucEwk.js";import{_ as E}from"./FSFadeOut-Dik6Imqk.js";import{F as Y}from"./FSLoader-B0jwcdOS.js";import{_ as A}from"./FSRadio-CSYtdY7R.js";import{_ as $}from"./FSSpan-DqsaA-ji.js";import{F as Z}from"./FSMenu-B9mNoRv6.js";import{F as B}from"./FSCol-Bfhiyt6Y.js";import{u as _}from"./useRules-CT5DWk6c.js";import{u as x}from"./useBreakpoints-RTs-XAJF.js";import{u as ee,C as le}from"./useColors-WMY9wD-z.js";import{u as ae}from"./useSlots-nyIcwo6G.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L=G({name:"FSTreeViewField",components:{FSTreeView:X,FSDialogMenu:Q,FSTextField:H,FSCheckbox:I,FSFadeOut:E,FSLoader:Y,FSRadio:A,FSSpan:$,FSMenu:Z,FSCol:B},props:{label:{type:String,required:!1,default:null},description:{type:String,required:!1,default:null},items:{type:Array,required:!0},itemValue:{type:String,required:!1,default:"id"},itemTitle:{type:String,required:!1,default:"label"},itemParent:{type:String,required:!1,default:"parentId"},exclude:{type:Array,required:!1,default:()=>[]},modelValue:{type:[Array,String,Number],required:!1,default:null},hideHeader:{type:Boolean,required:!1,default:!1},required:{type:Boolean,required:!1,default:!1},multiple:{type:Boolean,required:!1,default:!1},rules:{type:Array,required:!1,default:()=>[]},messages:{type:Array,required:!1,default:null},clearable:{type:Boolean,required:!1,default:!0},disabled:{type:Boolean,required:!1,default:!1},loading:{type:Boolean,required:!1,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const{validateOn:U,getMessages:M}=_(),{isExtraSmall:P}=x(),{getColors:R}=ee(),{slots:o}=ae();delete o.label,delete o.description,delete o["menu-prepend"];const g=R(le.Background),y=N(!1),S=N(!1),l=V(()=>e.disabled?{"--fs-tree-view-field-cursor":"default"}:{"--fs-tree-view-field-cursor":"pointer","--fs-tree-view-field-background-color":g.base}),u=V(()=>e.messages??M(e.modelValue,e.rules)),d=V(()=>"calc(100vh - 40px - 16px)"),O=V(()=>Object.keys(o).filter(a=>!a.startsWith("menu-")).reduce((a,r)=>(a[r]=o[r],a),{})),j=V(()=>Object.keys(o).filter(a=>a.startsWith("menu-")).reduce((a,r)=>(a[r.substring(5)]=o[r],a),{})),z=V(()=>{if(e.multiple&&Array.isArray(e.modelValue))return e.modelValue.map(a=>{const r=e.items.find(f=>f[e.itemValue]===a);if(r)return r[e.itemTitle]}).filter(a=>!!a).join(", ");if(e.modelValue){const a=e.items.find(r=>r[e.itemValue]===e.modelValue);if(a)return a[e.itemTitle]}return null}),W=V(()=>{const a=f=>e.items.filter(F=>e.exclude.includes(F[e.itemValue])?!1:F[e.itemParent]==f),r=f=>e.items.some(F=>F[e.itemParent]===f[e.itemValue])?{...f,children:a(f[e.itemValue]).map(r)}:f;return a(null).map(r)});return{isExtraSmall:P,innerValue:z,fieldSlots:O,validateOn:U,maxHeight:d,menuSlots:j,treeItems:W,messages:u,dialog:y,style:l,menu:S,openMobileOverlay:()=>{e.disabled||(y.value=!0)},onCheckboxChange:a=>{Array.isArray(e.modelValue)?e.modelValue.includes(a)?t("update:modelValue",e.modelValue.filter(r=>r!==a)):t("update:modelValue",[...e.modelValue,a]):e.modelValue!=null?e.modelValue===a?t("update:modelValue",[]):t("update:modelValue",[e.modelValue,a]):t("update:modelValue",[a])},onRadioChange:a=>{t("update:modelValue",a),y.value=!1,S.value=!1},listItemClass:a=>{const r=[];return e.multiple&&Array.isArray(e.modelValue)?e.modelValue.includes(a)&&r.push("fs-tree-view-item-selected"):e.modelValue===a&&r.push("fs-tree-view-item-selected"),r}}}});function re(e,t,U,M,P,R){const o=v("FSLoader"),g=v("FSTreeView"),y=v("FSDialogMenu"),S=v("FSMenu");return e.$props.loading?(n(),m(B,{key:0},{default:s(()=>[e.$props.hideHeader?b("",!0):(n(),m(o,{key:0,variant:"text-overline"})),e.$props.loading?(n(),m(o,{key:1,width:"100%",height:["40px","36px"]})):b("",!0)]),_:1})):(n(),m(B,{key:1},{default:s(()=>[e.isExtraSmall?(n(),J(K,{key:0},[i(H,D({class:"fs-tree-view-field",validationValue:e.$props.modelValue,description:e.$props.description,hideHeader:e.$props.hideHeader,clearable:e.$props.clearable,disabled:e.$props.disabled,required:e.$props.required,validateOn:e.validateOn,label:e.$props.label,rules:e.$props.rules,messages:e.messages,readonly:!0,style:e.style,modelValue:e.innerValue,"onUpdate:modelValue":t[0]||(t[0]=l=>e.$emit("update:modelValue",l)),onClick:e.openMobileOverlay},e.$attrs),q({_:2},[h(e.fieldSlots,(l,u)=>({name:u,fn:s(d=>[p(e.$slots,u,c(C(d)))])}))]),1040,["validationValue","description","hideHeader","clearable","disabled","required","validateOn","label","rules","messages","style","modelValue","onClick"]),i(y,{modelValue:e.dialog,"onUpdate:modelValue":t[1]||(t[1]=l=>e.dialog=l)},{body:s(()=>[i(E,{maxHeight:e.maxHeight},{default:s(()=>[i(g,{itemTitle:e.$props.itemTitle,itemValue:e.$props.itemValue,items:e.treeItems},q({prepend:s(({item:l})=>{var u;return[e.$props.multiple?(n(),m(I,{key:0,class:k(e.listItemClass(l[e.$props.itemValue])),disabled:e.$props.disabled,modelValue:(u=e.$props.modelValue)==null?void 0:u.includes(l[e.$props.itemValue]),"onUpdate:modelValue":()=>e.onCheckboxChange(l[e.$props.itemValue])},{label:s(({font:d})=>[p(e.$slots,"menu-prepend",{item:l}),i($,{font:d},{default:s(()=>[T(w(l[e.$props.itemTitle]),1)]),_:2},1032,["font"])]),_:2},1032,["class","disabled","modelValue","onUpdate:modelValue"])):b("",!0),e.$props.multiple?b("",!0):(n(),m(A,{key:1,selected:e.$props.modelValue===l[e.$props.itemValue],class:k(e.listItemClass(l[e.$props.itemValue])),disabled:e.$props.disabled,modelValue:l[e.$props.itemValue],"onUpdate:modelValue":e.onRadioChange},{label:s(({font:d})=>[p(e.$slots,"menu-prepend",{item:l}),i($,{font:d},{default:s(()=>[T(w(l[e.$props.itemTitle]),1)]),_:2},1032,["font"])]),_:2},1032,["selected","class","disabled","modelValue","onUpdate:modelValue"]))]}),title:s(()=>[]),_:2},[h(e.menuSlots,(l,u)=>({name:u,fn:s(d=>[p(e.$slots,u,c(C(d)))])}))]),1032,["itemTitle","itemValue","items"])]),_:3},8,["maxHeight"])]),_:3},8,["modelValue"])],64)):(n(),m(S,{key:1,closeOnContentClick:!1,modelValue:e.menu&&!e.$props.disabled,"onUpdate:modelValue":t[3]||(t[3]=l=>e.menu=l)},{activator:s(({props:l})=>[i(H,D({class:"fs-tree-view-field",validationValue:e.$props.modelValue,description:e.$props.description,hideHeader:e.$props.hideHeader,clearable:e.$props.clearable,disabled:e.$props.disabled,required:e.$props.required,validateOn:e.validateOn,label:e.$props.label,rules:e.$props.rules,messages:e.messages,readonly:!0,style:e.style,modelValue:e.innerValue,"onUpdate:modelValue":t[2]||(t[2]=u=>e.$emit("update:modelValue",u))},{...e.$attrs,...l}),q({_:2},[h(e.fieldSlots,(u,d)=>({name:d,fn:s(O=>[p(e.$slots,d,c(C(O)))])}))]),1040,["validationValue","description","hideHeader","clearable","disabled","required","validateOn","label","rules","messages","style","modelValue"])]),default:s(()=>[i(g,{itemTitle:e.$props.itemTitle,itemValue:e.$props.itemValue,items:e.treeItems},q({prepend:s(({item:l})=>{var u;return[e.$props.multiple?(n(),m(I,{key:0,class:k(e.listItemClass(l[e.$props.itemValue])),disabled:e.$props.disabled,modelValue:(u=e.$props.modelValue)==null?void 0:u.includes(l[e.$props.itemValue]),"onUpdate:modelValue":()=>e.onCheckboxChange(l[e.$props.itemValue])},{label:s(({font:d})=>[p(e.$slots,"menu-prepend",{item:l}),i($,{font:d},{default:s(()=>[T(w(l[e.$props.itemTitle]),1)]),_:2},1032,["font"])]),_:2},1032,["class","disabled","modelValue","onUpdate:modelValue"])):b("",!0),e.$props.multiple?b("",!0):(n(),m(A,{key:1,selected:e.$props.modelValue===l[e.$props.itemValue],class:k(e.listItemClass(l[e.$props.itemValue])),disabled:e.$props.disabled,modelValue:l[e.$props.itemValue],"onUpdate:modelValue":e.onRadioChange},{label:s(({font:d})=>[p(e.$slots,"menu-prepend",{item:l}),i($,{font:d},{default:s(()=>[T(w(l[e.$props.itemTitle]),1)]),_:2},1032,["font"])]),_:2},1032,["selected","class","disabled","modelValue","onUpdate:modelValue"]))]}),title:s(()=>[]),_:2},[h(e.menuSlots,(l,u)=>({name:u,fn:s(d=>[p(e.$slots,u,c(C(d)))])}))]),1032,["itemTitle","itemValue","items"])]),_:3},8,["modelValue"]))]),_:3}))}const Ce=se(L,[["render",re]]);L.__docgenInfo={displayName:"FSTreeViewField",exportName:"default",description:"",tags:{},props:[{name:"label",type:{name:"string | null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"description",type:{name:"string | null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"items",type:{name:"any[]"},required:!0},{name:"itemValue",type:{name:"string"},required:!1,defaultValue:{func:!1,value:'"id"'}},{name:"itemTitle",type:{name:"string"},required:!1,defaultValue:{func:!1,value:'"label"'}},{name:"itemParent",type:{name:"string"},required:!1,defaultValue:{func:!1,value:'"parentId"'}},{name:"exclude",type:{name:"string[]"},required:!1,defaultValue:{func:!0,value:"() => []"}},{name:"modelValue",type:{name:"(string | number)[] | string | number | null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"hideHeader",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"required",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"multiple",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"rules",type:{name:"any[]"},required:!1,defaultValue:{func:!0,value:"() => []"}},{name:"messages",type:{name:"string[]"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"clearable",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"true"}},{name:"disabled",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"loading",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}}],events:[{name:"update:modelValue"}],slots:[{name:"name",scoped:!0,bindings:[{name:"name",title:"binding"}]},{name:"menu-prepend",scoped:!0,bindings:[{name:"item",title:"binding"}]}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/shared/foundation-shared-components/components/fields/FSTreeViewField.vue"]};export{Ce as F};
