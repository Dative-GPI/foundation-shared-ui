import{d as v,e as c,c as C,w as $,B as V,D as f,I as F,J as M,q as n,m as h,H as q}from"./vue.esm-bundler-D5n7z5qz.js";import{a as P}from"./properties-Qw-O9fbT.js";import{F as U,u as T}from"./FSAutoCompleteAddress-LD0AC5VB.js";import B from"./FSNumberField-ck2CaY81.js";import{a as I,F as O}from"./FSMap-DAYxl92I.js";import{_ as y}from"./FSRow-DIk8KFbG.js";import{F as b}from"./FSCol-D_lbFmZy.js";import{N as j}from"./rules-2-0C43Mt.js";import{M as D}from"./map-zFQr5HDv.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./lodash-DyRFk5BS.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./useAppLanguageCode-CWFK3Ooe.js";import"./address-CE2z3AEI.js";import"./FSAutocompleteField-GC0-NSch.js";import"./FSSearchField-CpphZadi.js";import"./FSTextField-Cclf6IX8.js";import"./FSBaseField-Buivlp1M.js";import"./FSSpan-BN7wkmby.js";import"./useBreakpoints-CEzKC_o8.js";import"./useSlots-CoecqEnp.js";import"./useColors-BM_SKUZx.js";import"./theme-Cdiv_FYE.js";import"./FSButton-CZRwWCRJ.js";import"./FSRouterLink-D3C4jXZ9.js";import"./vue-router-BrikmAnQ.js";import"./FSText-CJ7Lhzl1.js";import"./FSIcon-BJsIM37h.js";import"./css-CxcvJboa.js";import"./VIcon-mGJe0MYK.js";import"./color-BW36qAym.js";import"./useRender-BcOya-6A.js";import"./icons-DR_vovBH.js";import"./size-CaXETvDn.js";import"./tag-BOR-k4cz.js";import"./FSCard-BH6GLU3V.js";import"./VProgressCircular-D6ZFUt0S.js";import"./resizeObserver-Z3fjh7Cv.js";import"./useRules-R3Ldkrx4.js";import"./VField-B1xdFTJF.js";import"./index-6jMyctoo.js";import"./transition-DbItRNv8.js";import"./VLabel-D-9L6eJP.js";import"./VInput-bTNISmSY.js";import"./locale-DKpA43KM.js";import"./proxiedModel-BPspb6XO.js";import"./density-BnAGl-Nw.js";import"./dimensions-B7sNhH2O.js";import"./loader-COXi3ZW_.js";import"./anchor-CPKk15qm.js";import"./rounded-lfTNxM9v.js";import"./VDefaultsProvider-6Z-RVAh9.js";import"./easing-DY7PVvcf.js";import"./forwardRefs-C-GTDzx5.js";import"./index-BKpPdzm5.js";import"./useTranslations-CFCS6HA-.js";import"./FSDialogMenu-553iq_m_.js";import"./VDialog-B2OpqrDi.js";import"./VOverlay-DHaepw21.js";import"./display-D8bdLPBN.js";import"./lazy-C77w73YC.js";import"./router-BDiSnJ53.js";import"./scopeId-DC5duiFx.js";import"./FSSlideGroup-IW38j_vX.js";import"./uuid-DTaye2KM.js";import"./FSButtonNextIcon-BE_tlhjQ.js";import"./VSlideGroup-BxUK8FWF.js";import"./goto-BwndLEHi.js";import"./group-BRhJCq_i.js";import"./VSlideGroupItem-CYOAdS4m.js";import"./FSToggleSet-BOI7_zgs.js";import"./FSWrapGroup-DzpSjUDj.js";import"./FSCheckbox-CpWOjTw-.js";import"./VCheckboxBtn-t5XcVMJr.js";import"./VSelectionControl-SdigZO9B.js";import"./index-BYo1BiTt.js";import"./FSFadeOut-C918yX_r.js";import"./FSLoader-Cl8hDT8j.js";import"./elevation-JukLG-n6.js";import"./FSRadio-BXAjRcH_.js";import"./VSelect-tiqwHlQo.js";import"./VList-DlQk11w2.js";import"./ssrBoot-C79LbZhX.js";import"./variant-j8rFA7nZ.js";import"./VImg-BlUyfKKc.js";import"./VDivider-Yc-HesXU.js";import"./VMenu-en6JpVrG.js";import"./filter-DlYw_aWm.js";import"./useAutocomplete-s5aYGVYo.js";import"./leaflet-src-CCqwBO6N.js";import"./FSDialog-BqdRyaJy.js";import"./iframe-kOgdKlbU.js";import"./time-C045-Osl.js";import"./times-CqUFey1a.js";import"./datesTools-DpylUQoJ.js";import"./startOfWeek-uXTpkxA4.js";import"./useDateFormat-Be4eIA50.js";import"./useAppTimeZone-tx8M1w-h.js";import"./startOfDay-C4pDH4rb.js";function W(e,o){let t=null,a=null;return(...i)=>(t&&(clearTimeout(t),t=null),a&&(a("debounced"),a=null),new Promise(m=>{new Promise((p,u)=>{t=setTimeout(p,o),a=u}).then(async()=>{m(await e(...i))})}))}const R=v({name:"FSMapAddressField",components:{FSAutoCompleteAddress:U,FSNumberField:B,FSMapMarker:O,FSMap:I,FSRow:y,FSCol:b},emits:["update:modelValue"],props:{label:{type:String,required:!0},icon:{type:String,required:!0},modelValue:{type:Object,required:!1}},setup(e,{emit:o}){const{reverseSearch:t}=T(),a=c(!1),i=c(null),m=c(null),s=c(D.Map),p=C(()=>e.modelValue?[e.modelValue.latitude,e.modelValue.longitude]:null),u=W(t,500),d=async(r,l,k)=>{if(typeof r=="string"&&(r=parseFloat(r),isNaN(r))||typeof l=="string"&&(l=parseFloat(l),isNaN(l)))return;i.value=r,m.value=l;let S;if(a.value=!0,k)try{S=await u(r,l)}catch{return}else S=await t(r,l);o("update:modelValue",{...S,latitude:i.value,longitude:m.value}),a.value=!1};return $(()=>e.modelValue,r=>{r&&(i.value=r.latitude,m.value=r.longitude)},{immediate:!0}),{center:p,mapLayer:s,NumberRules:j,actualLatitude:i,actualLongitude:m,onNewLatLng:d}}});function Z(e,o,t,a,i,m){const s=F("FSMapMarker"),p=F("FSMap"),u=F("FSAutoCompleteAddress"),d=F("FSNumberField");return M(),V(b,null,{default:f(()=>[n(p,h({lockZoomOnFlyTo:!0,center:e.center,"onUpdate:center":o[0]||(o[0]=r=>e.center=r),enableScrollWheelZoom:!0,showMyLocation:!0,zoom:5,currentLayer:e.mapLayer,"onUpdate:currentLayer":o[1]||(o[1]=r=>e.mapLayer=r),"onClick:latlng":o[2]||(o[2]=r=>e.onNewLatLng(r.lat,r.lng,!1))},e.$attrs),{default:f(()=>[e.actualLatitude&&e.actualLongitude?(M(),V(s,{key:0,label:e.$props.label,icon:e.$props.icon,latlng:{lat:e.actualLatitude,lng:e.actualLongitude},selected:!0},null,8,["label","icon","latlng"])):q("",!0)]),_:1},16,["center","currentLayer"]),n(b,null,{default:f(()=>[n(u,{maxWidth:null,modelValue:e.$props.modelValue,"onUpdate:modelValue":o[3]||(o[3]=r=>e.$emit("update:modelValue",r))},null,8,["modelValue"]),n(y,null,{default:f(()=>[n(d,{label:e.$tr("ui.location.latitude","Latitude"),modelValue:e.actualLatitude,clearable:!1,rules:[e.NumberRules.max(90),e.NumberRules.min(-90),e.NumberRules.required()],"onUpdate:modelValue":o[4]||(o[4]=r=>e.onNewLatLng(r,e.actualLongitude??0,!0))},null,8,["label","modelValue","rules"]),n(d,{label:e.$tr("ui.location.longitude","Longitude"),modelValue:e.actualLongitude,clearable:!1,rules:[e.NumberRules.max(180),e.NumberRules.min(-180),e.NumberRules.required()],"onUpdate:modelValue":o[5]||(o[5]=r=>e.onNewLatLng(e.actualLatitude??0,r,!0))},null,8,["label","modelValue","rules"])]),_:1})]),_:1})]),_:1})}const L=E(R,[["render",Z]]);R.__docgenInfo={displayName:"FSMapAddressField",exportName:"default",description:"",tags:{},props:[{name:"label",type:{name:"string"},required:!0},{name:"icon",type:{name:"string"},required:!0},{name:"modelValue",type:{name:"Address | null"},required:!1}],events:[{name:"update:modelValue"}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/shared/foundation-shared-components/components/fields/FSMapAddressField.vue"]};const Tr={title:"Foundation/Shared/MapAddressField",component:L,tags:["autodocs"],argTypes:{...P(L)}},g={args:{label:"",icon:"mdi-map-marker",color:"primary",modelValue:null},render:e=>v({components:{FSMapAddressField:L,FSRow:y},inheritAttrs:!1,setup(){return{args:e}},template:`
        <FSRow height="500px">
          <FSMapAddressField
            v-bind="args"
            v-model="args.modelValue"
          />
        </FSRow>
      `})};var N,A,w;g.parameters={...g.parameters,docs:{...(N=g.parameters)==null?void 0:N.docs,source:{originalSource:`{
  args: {
    label: "",
    icon: "mdi-map-marker",
    color: "primary",
    modelValue: null
  },
  render: args => defineComponent({
    components: {
      FSMapAddressField,
      FSRow
    },
    inheritAttrs: false,
    setup() {
      return {
        args
      };
    },
    template: \`
        <FSRow height="500px">
          <FSMapAddressField
            v-bind="args"
            v-model="args.modelValue"
          />
        </FSRow>
      \`
  })
}`,...(w=(A=g.parameters)==null?void 0:A.docs)==null?void 0:w.source}}};const Br=["MapAddressField"];export{g as MapAddressField,Br as __namedExportsOrder,Tr as default};
