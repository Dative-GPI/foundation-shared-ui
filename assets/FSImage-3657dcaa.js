import{d as u,E as y,e as i,o as R,H as I,I as H,J as _,A as F,z as S}from"./vue.esm-bundler-a27e881e.js";import{G as N}from"./base-5094c3fa.js";import{S as l}from"./serviceFactory-25228cba.js";import{_ as $}from"./_plugin-vue_export-helper-c27b6911.js";import{V as A}from"./VImg-52b1b44b.js";import{V as b}from"./VSkeletonLoader-6bc87f83.js";class h{constructor(t){this.blurHash=t.blurHash,this.width=t.width,this.height=t.height}}const f=()=>`${N()}/images`,B=()=>`${f()}/raw`,q=e=>`${B()}/${encodeURIComponent(e)}`,U=()=>`${f()}/blurHash`,L=e=>`${U()}/${encodeURIComponent(e)}`,d=new l("image",h).create(e=>e.build(e.addNotify(()=>({getRaw:async t=>(await l.http.get(q(t))).data,getBlurHash:async t=>{const a=await l.http.get(L(t));return new h(a.data)}})))),V=()=>{const e=d(),t=u(!1),a=u(null);return{fetching:t,fetch:async s=>{t.value=!0;try{a.value=await e.getRaw(s)}finally{t.value=!1}return a},fetched:a}},E=()=>{const e=d(),t=u(!1),a=u(null);return{fetching:t,fetch:async s=>{t.value=!0;try{a.value=await e.getBlurHash(s)}finally{t.value=!1}return a},fetched:a}},m=y({name:"FSImage",props:{imageId:{type:String,required:!0},cover:{type:Boolean,required:!1,default:!0},width:{type:Number,required:!1,default:null},height:{type:Number,required:!1,default:null},aspectRatio:{type:String,required:!1,default:null}},setup(e){const{fetching:t,fetch:a,fetched:n}=V(),{fetching:s,fetch:o,fetched:c}=E(),g=i(()=>{if(e.width)return e.width;if(e.height){if(e.aspectRatio){const r=e.aspectRatio.split("/");if(r.length===2&&!isNaN(parseFloat(r[0]))&&!isNaN(parseFloat(r[1])))return e.height*(parseFloat(r[0])/parseFloat(r[1]))}return e.height}return 0}),p=i(()=>{if(e.height)return e.height;if(e.width){if(e.aspectRatio){const r=e.aspectRatio.split("/");if(r.length===2&&!isNaN(parseFloat(r[0]))&&!isNaN(parseFloat(r[1])))return e.width*(parseFloat(r[1])/parseFloat(r[0]))}return e.width}return 0}),v=i(()=>t.value?null:n.value?n.value:s.value?null:c.value?c.value.blurHash:null);R(()=>{w()});const w=async()=>{await a(e.imageId),n.value||await o(e.imageId)};return{source:v,computedWidth:g,computedHeight:p}}});function G(e,t,a,n,s,o){return I(),H(A,F({class:"fs-image",src:e.source,cover:e.$props.cover,width:e.computedWidth,height:e.computedHeight},e.$attrs),{placeholder:_(()=>[S(b,{type:"image"})]),_:1},16,["src","cover","width","height"])}const P=$(m,[["render",G]]);m.__docgenInfo={displayName:"FSImage",exportName:"default",description:"",tags:{},props:[{name:"imageId",type:{name:"string"},required:!0},{name:"cover",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"true"}},{name:"width",type:{name:"number"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"height",type:{name:"number"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"aspectRatio",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"null"}}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/shared/foundation-shared-components/components/FSImage.vue"]};export{P as F};
