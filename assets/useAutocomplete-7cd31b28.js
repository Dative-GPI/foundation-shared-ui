import{d as c,e as D,w as i,o as E}from"./vue.esm-bundler-b2d5d1a7.js";import{_ as L}from"./lodash-569b8a6d.js";import{u as M}from"./useDebounce-f8cba0e6.js";const z=(n,b,g,d,s=null,v=a=>a.id,A=a=>a.label,y=!1,m=!0,p=5,q=1e3)=>{const{debounce:a}=M(),l=c(null),r=c(0),t=c(!0),w=D(()=>(console.log(m,r.value,p),m&&r.value<p)),h=()=>a(()=>d(l.value),q),x=e=>{if(s)if(Array.isArray(e)){const u=e.map(o=>n.value.find(f=>v(f)===o)||null).filter(o=>o!==null);s(u)}else s(e&&n.value.find(u=>v(u)===e)||null);else g("update:modelValue",e)};return i(b,(e,u)=>{L.isEqual(e,u)||h()}),i(l,(e,u)=>{e!==u&&!n.value.map(f=>A(f)).includes(l.value)&&(!l.value||!l.value.length||l.value.length>2)&&y&&h()}),i(n,()=>{t.value&&(t.value=!1,r.value=n.value.length)}),E(()=>{d(l.value)}),{toggleSet:w,search:l,init:t,onUpdate:x}};export{z as u};
