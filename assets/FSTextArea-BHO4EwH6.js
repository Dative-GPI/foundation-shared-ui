import{d as ie,c as x,b as F,s as de,j as fe,o as ce,w as C,e as me,R as r,G as z,l as I,Z as j,_ as ve,a3 as pe,n as D,A as Z,C as J,D as $,H as ge,I as K,L as Q,N as W,O as X,F as xe,S as be}from"./vue.esm-bundler-BD3cPSox.js";import{F as he}from"./FSBaseField-BvFJ1Ol8.js";import{F as _}from"./FSCol-C9a7BKGp.js";import{u as ye}from"./useBreakpoints-CnZdRDE7.js";import{u as Ve}from"./useRules-Bpmg6xi7.js";import{u as we,C as R}from"./useColors-Cu9vf_Ix.js";import{u as Fe}from"./useSlots-DhthX9xh.js";import{_ as Ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{F as $e}from"./FSButton-CQA40iQ2.js";import{f as Se,V as ke,a as qe,m as Be}from"./VField-_4f0OeoM.js";import{u as Pe,V as Y,m as Re}from"./VInput-D-36mGWK.js";import{f as Ie}from"./forwardRefs-DWGaNmQL.js";import{u as He}from"./proxiedModel-JzK6JHhO.js";import{I as Ae}from"./index-Ov0xN_Hx.js";import{g as Ge,u as Ne}from"./color-DAd2dJIE.js";import{p as Me,v as Te,c as ze,B as De,x as Ee}from"./theme-B93wSOzC.js";const ee=ie({name:"FSTextArea",components:{FSBaseField:he,FSCol:_},props:{label:{type:String,required:!1,default:null},description:{type:String,required:!1,default:null},modelValue:{type:String,required:!1,default:null},rows:{type:Number,required:!1,default:1},autoGrow:{type:Boolean,required:!1,default:!0},hideHeader:{type:Boolean,required:!1,default:!1},required:{type:Boolean,required:!1,default:!1},rules:{type:Array,required:!1,default:()=>[]},messages:{type:Array,required:!1,default:null},clearable:{type:Boolean,required:!1,default:!0},editable:{type:Boolean,required:!1,default:!0}},emits:["update:modelValue"],setup(e){const{fontStyles:d,isMobileSized:n}=ye(),{validateOn:w,getMessages:s}=Ve(),{getColors:t}=we(),{slots:i}=Fe();delete i.label;const f=t(R.Error),c=t(R.Light),b=t(R.Dark),H=x(()=>{let o,h;if(!e.autoGrow){const g=n.value?34:38,k=n.value?18:20;e.rows>1?o=`${g+(e.rows-1)*k}px`:o=`${g}px`,h=`${e.rows*k}px`}return e.editable?{"--fs-text-area-cursor":"text","--fs-text-area-border-color":c.dark,"--fs-text-area-color":b.base,"--fs-text-area-active-border-color":b.dark,"--fs-text-area-error-border-color":f.base,"--fs-text-area-height":o,"--fs-text-area-field-height":h,"--fs-text-area-padding":n.value?"10px 16px":"11px 16px","--fs-base-field-input-height":n.value?"34px":"38px",...d.value}:{"--fs-text-area-cursor":"default","--fs-text-area-border-color":c.base,"--fs-text-area-color":c.dark,"--fs-text-area-active-border-color":c.base,"--fs-text-area-height":o,"--fs-text-area-field-height":h,"--fs-text-area-padding":n.value?"10px 16px":"11px 16px","--fs-base-field-input-height":n.value?"34px":"38px",...d.value}}),A=x(()=>{const o=["fs-text-area"];return e.autoGrow&&o.push("fs-text-area-auto-grow"),o}),S=x(()=>e.messages??s(e.modelValue,e.rules));return{validateOn:w,ColorEnum:R,messages:S,classes:A,style:H,slots:i}}}),Oe=Me({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Re(),...Be()},"VTextarea"),Ue=Ge()({name:"VTextarea",directives:{Intersect:Ae},inheritAttrs:!1,props:Oe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,d){let{attrs:n,emit:w,slots:s}=d;const t=He(e,"modelValue"),{isFocused:i,focus:f,blur:c}=Pe(e),b=x(()=>typeof e.counterValue=="function"?e.counterValue(t.value):(t.value||"").toString().length),H=x(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function A(a,u){var l,m;!e.autofocus||!a||(m=(l=u[0].target)==null?void 0:l.focus)==null||m.call(l)}const S=F(),o=F(),h=de(""),g=F(),k=x(()=>e.persistentPlaceholder||i.value||e.active);function G(){var a;g.value!==document.activeElement&&((a=g.value)==null||a.focus()),i.value||f()}function ae(a){G(),w("click:control",a)}function te(a){w("mousedown:control",a)}function le(a){a.stopPropagation(),G(),D(()=>{t.value="",Ee(e["onClick:clear"],a)})}function re(a){var l;const u=a.target;if(t.value=u.value,(l=e.modelModifiers)!=null&&l.trim){const m=[u.selectionStart,u.selectionEnd];D(()=>{u.selectionStart=m[0],u.selectionEnd=m[1]})}}const y=F(),q=F(+e.rows),N=x(()=>["plain","underlined"].includes(e.variant));fe(()=>{e.autoGrow||(q.value=+e.rows)});function V(){e.autoGrow&&D(()=>{if(!y.value||!o.value)return;const a=getComputedStyle(y.value),u=getComputedStyle(o.value.$el),l=parseFloat(a.getPropertyValue("--v-field-padding-top"))+parseFloat(a.getPropertyValue("--v-input-padding-top"))+parseFloat(a.getPropertyValue("--v-field-padding-bottom")),m=y.value.scrollHeight,B=parseFloat(a.lineHeight),M=Math.max(parseFloat(e.rows)*B+l,parseFloat(u.getPropertyValue("--v-input-control-height"))),T=parseFloat(e.maxRows)*B+l||1/0,p=De(m??0,M,T);q.value=Math.floor((p-l)/B),h.value=ze(p)})}ce(V),C(t,V),C(()=>e.rows,V),C(()=>e.maxRows,V),C(()=>e.density,V);let v;return C(y,a=>{a?(v=new ResizeObserver(V),v.observe(y.value)):v==null||v.disconnect()}),me(()=>{v==null||v.disconnect()}),Ne(()=>{const a=!!(s.counter||e.counter||e.counterValue),u=!!(a||s.details),[l,m]=Te(n),{modelValue:B,...M}=Y.filterProps(e),T=Se(e);return r(Y,I({ref:S,modelValue:t.value,"onUpdate:modelValue":p=>t.value=p,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":N.value},e.class],style:e.style},l,M,{centerAffix:q.value===1&&!N.value,focused:i.value}),{...s,default:p=>{let{id:P,isDisabled:E,isDirty:O,isReadonly:oe,isValid:ne}=p;return r(qe,I({ref:o,style:{"--v-textarea-control-height":h.value},onClick:ae,onMousedown:te,"onClick:clear":le,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},T,{id:P.value,active:k.value||O.value,centerAffix:q.value===1&&!N.value,dirty:O.value||e.dirty,disabled:E.value,focused:i.value,error:ne.value===!1}),{...s,default:se=>{let{props:{class:U,...L}}=se;return r(z,null,[e.prefix&&r("span",{class:"v-text-field__prefix"},[e.prefix]),j(r("textarea",I({ref:g,class:U,value:t.value,onInput:re,autofocus:e.autofocus,readonly:oe.value,disabled:E.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:G,onBlur:c},L,m),null),[[ve("intersect"),{handler:A},null,{once:!0}]]),e.autoGrow&&j(r("textarea",{class:[U,"v-textarea__sizer"],id:`${L.id}-sizer`,"onUpdate:modelValue":ue=>t.value=ue,ref:y,readonly:!0,"aria-hidden":"true"},null),[[pe,t.value]]),e.suffix&&r("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:u?p=>{var P;return r(z,null,[(P=s.details)==null?void 0:P.call(s,p),a&&r(z,null,[r("span",null,null),r(ke,{active:e.persistentCounter||i.value,value:b.value,max:H.value,disabled:e.disabled},s.counter)])])}:void 0})}),Ie({},S,o,g)}});function Le(e,d,n,w,s,t){const i=ge("FSBaseField");return K(),Z(i,{label:e.$props.label,description:e.$props.description,hideHeader:e.$props.hideHeader,required:e.$props.required,editable:e.$props.editable,messages:e.messages},J({default:$(()=>[r(Ue,I({class:["fs-text-area",e.classes],variant:"outlined",style:e.style,rows:e.$props.rows,persistentClear:!0,hideDetails:!0,noResize:!0,autoGrow:e.$props.autoGrow,readonly:!e.$props.editable,clearable:e.$props.clearable&&e.$props.editable&&!!e.$props.modelValue,rules:e.$props.rules,validateOn:e.validateOn,modelValue:e.$props.modelValue,"onUpdate:modelValue":d[1]||(d[1]=f=>e.$emit("update:modelValue",f))},e.$attrs),J({clear:$(()=>[r(_,{align:"center-center"},{default:$(()=>[e.$props.clearable&&e.$props.editable&&e.$props.modelValue?(K(),Z($e,{key:0,icon:"mdi-close",variant:"icon",color:e.ColorEnum.Dark,onClick:d[0]||(d[0]=f=>e.$emit("update:modelValue",null))},null,8,["color"])):xe("",!0)]),_:1})]),_:2},[be(e.slots,(f,c)=>({name:c,fn:$(b=>[Q(e.$slots,c,W(X(b)))])}))]),1040,["style","class","rows","autoGrow","readonly","clearable","rules","validateOn","modelValue"])]),_:2},[e.$slots.label?{name:"label",fn:$(f=>[Q(e.$slots,"label",W(X(f)))]),key:"0"}:void 0]),1032,["label","description","hideHeader","required","editable","messages"])}const sa=Ce(ee,[["render",Le]]);ee.__docgenInfo={displayName:"FSTextArea",exportName:"default",description:"",tags:{},props:[{name:"label",type:{name:"string | null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"description",type:{name:"string | null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"modelValue",type:{name:"string | null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"rows",type:{name:"number"},required:!1,defaultValue:{func:!1,value:"1"}},{name:"autoGrow",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"true"}},{name:"hideHeader",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"required",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"rules",type:{name:"any[]"},required:!1,defaultValue:{func:!0,value:"() => []"}},{name:"messages",type:{name:"string[]"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"clearable",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"true"}},{name:"editable",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"true"}}],events:[{name:"update:modelValue"}],slots:[{name:"label",scoped:!0,bindings:[]},{name:"name",scoped:!0,bindings:[{name:"name",title:"binding"}]}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/shared/foundation-shared-components/components/fields/FSTextArea.vue"]};export{sa as F};
