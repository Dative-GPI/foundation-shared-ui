var C=Object.defineProperty;var w=(o,t,e)=>t in o?C(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var s=(o,t,e)=>w(o,typeof t!="symbol"?t+"":t,e);import{C as I}from"./base-B6WxqUqv.js";import{a as c,b as u,c as f,W as b,D as P}from"./dashboardTranslation-CqTP1_a6.js";import{P as v}from"./pathCrumb-Db-cq5HI.js";import{_ as S}from"./lodash-BrWYvtk2.js";import{C as r}from"./composableFactory-BJClBu0g.js";import{S as n}from"./serviceFactory-B3o6Bvwt.js";class L{constructor(t){s(this,"hiddenCode");s(this,"startDate");s(this,"endDate");s(this,"useAutoRefresh");s(this,"autoRefresh");this.hiddenCode=t.hiddenCode,this.startDate=t.startDate,this.endDate=t.endDate,this.useAutoRefresh=t.useAutoRefresh,this.autoRefresh=t.autoRefresh}}class R{constructor(t){s(this,"hiddenCode");s(this,"singleEntity");s(this,"entityType");s(this,"entitiesFilters");s(this,"entitiesIds");this.hiddenCode=t.hiddenCode,this.singleEntity=t.singleEntity,this.entityType=t.entityType,this.entitiesFilters=t.entitiesFilters,this.entitiesIds=t.entitiesIds.slice()}}class E{constructor(t){s(this,"hiddenCode");s(this,"value");this.hiddenCode=t.hiddenCode,this.value=t.value}}const O=o=>S.cloneDeepWith(o,e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}});class W{constructor(t){s(this,"hiddenCode");s(this,"meta");this.hiddenCode=t.hiddenCode,this.meta=O(t.meta)}}class D{constructor(t){s(this,"id");s(this,"organisationId");s(this,"dashboardOrganisationTypeId");s(this,"dashboardOrganisationTypeLabel");s(this,"folderId");s(this,"folderLabel");s(this,"folderIcon");s(this,"imageId");s(this,"label");s(this,"code");s(this,"icon");s(this,"tags");s(this,"colors");s(this,"dashboardId");s(this,"scope");this.id=t.id,this.organisationId=t.organisationId,this.dashboardOrganisationTypeId=t.dashboardOrganisationTypeId,this.dashboardOrganisationTypeLabel=t.dashboardOrganisationTypeLabel,this.folderId=t.folderId,this.folderLabel=t.folderLabel,this.folderIcon=t.folderIcon,this.imageId=t.imageId,this.label=t.label,this.code=t.code,this.icon=t.icon,this.tags=t.tags.slice(),this.colors=t.colors.slice(),this.dashboardId=t.dashboardId,this.scope=t.scope}}class h extends D{constructor(e){super(e);s(this,"labelDefault");s(this,"translations");s(this,"path");s(this,"entityPresetCode");s(this,"datePresetCode");s(this,"variableCode");s(this,"defaultDatePresets");s(this,"defaultEntityPresets");s(this,"defaultVariables");s(this,"defaultWidgets");s(this,"overrideDatePresets");s(this,"overrideEntityPresets");s(this,"overrideVariables");s(this,"overrideWidgets");this.labelDefault=e.labelDefault,this.path=e.path.map(i=>new v(i)).sort((i,d)=>d.index-i.index),this.translations=e.translations.map(i=>new P(i)),this.overrideDatePresets=e.overrideDatePresets.map(i=>new L(i)),this.overrideEntityPresets=e.overrideEntityPresets.map(i=>new R(i)),this.overrideVariables=e.overrideVariables.map(i=>new E(i)),this.overrideWidgets=e.overrideWidgets.map(i=>new W(i)),this.entityPresetCode=e.entityPresetCode,this.datePresetCode=e.datePresetCode,this.variableCode=e.variableCode,this.defaultDatePresets=e.defaultDatePresets.map(i=>new c(i)),this.defaultEntityPresets=e.defaultEntityPresets.map(i=>new u(i)),this.defaultVariables=e.defaultVariables.map(i=>new f(i)),this.defaultWidgets=e.defaultWidgets.map(i=>new b(i))}get datePresets(){return this.defaultDatePresets.map(e=>{const i=this.overrideDatePresets.find(d=>d.hiddenCode===e.hiddenCode);return i?new c({...e,...i}):e})}get entityPresets(){return this.defaultEntityPresets.map(e=>{const i=this.overrideEntityPresets.find(d=>d.hiddenCode===e.hiddenCode);return i?new u({...e,...i}):e})}get variables(){return this.defaultVariables.map(e=>{const i=this.overrideVariables.find(d=>d.hiddenCode===e.hiddenCode);return i?new f({...e,...i}):e})}get widgets(){return this.defaultWidgets.map(e=>{const i=this.overrideWidgets.find(d=>d.widgetId===e.id);return i?new b({...e,...i}):e})}}const g=()=>`${I()}/dashboard-shallows`,l=o=>`${g()}/${encodeURIComponent(o)}`,p=o=>`${l(o)}/folder`,a=new n("dashboardShallow",h).createComplete(g,l,D),y=new n("dashboardShallow",h).create(o=>o.build(o.addNotify(t=>({...n.addCustom("duplicate",(e,i)=>e.patch(l(i)),e=>{const i=new h(e);return t.notify("update",i),i}),...n.addCustom("changeFolder",(e,i,d)=>e.put(p(i),d),e=>{const i=new h(e);return t.notify("update",i),i})})))),m=r.get(a),x=r.getMany(a);r.create(a);r.update(a);r.remove(a);r.custom(y.duplicate);r.custom(y.changeFolder);export{m as a,x as u};
