var g=Object.defineProperty;var p=(t,e,s)=>e in t?g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var i=(t,e,s)=>p(t,typeof e!="symbol"?e+"":e,s);import{U as b}from"./vue.esm-bundler-l-siv0w9.js";import{P as v}from"./pathCrumb-Db-cq5HI.js";import{C as G}from"./base-BWToAT4M.js";import{S as a}from"./serviceFactory-DAEdCiSt.js";import{C as r}from"./composableFactory-C5FI4e55.js";class l{constructor(e){i(this,"id");i(this,"organisationId");i(this,"parentId");i(this,"imageId");i(this,"icon");i(this,"code");i(this,"label");i(this,"tags");i(this,"path");i(this,"groupsIds");i(this,"deviceOrganisationsIds");i(this,"modelsIds");i(this,"recursiveGroupsIds");i(this,"recursiveDeviceOrganisationsIds");i(this,"recursiveModelsIds");this.id=e.id,this.organisationId=e.organisationId,this.parentId=e.parentId,this.imageId=e.imageId,this.icon=e.icon,this.code=e.code,this.label=e.label,this.tags=e.tags,this.path=e.path.map(s=>new v({...s})).sort((s,o)=>o.index-s.index),this.groupsIds=e.groupsIds.slice(),this.deviceOrganisationsIds=e.deviceOrganisationsIds.slice(),this.modelsIds=e.modelsIds.slice(),this.recursiveGroupsIds=e.recursiveGroupsIds.slice(),this.recursiveDeviceOrganisationsIds=e.recursiveDeviceOrganisationsIds.slice(),this.recursiveModelsIds=e.recursiveModelsIds.slice()}}class I extends l{constructor(s){super(s);i(this,"parentIcon");i(this,"parentLabel");this.parentIcon=s.parentIcon,this.parentLabel=s.parentLabel}}const u=()=>`${G()}/groups`,n=t=>`${u()}/${encodeURIComponent(t)}`;let c=[];const d=new a("group",I).create(t=>t.build(t.addGet(n),t.addGetMany(u,l),t.addCreate(u),t.addUpdate(n),t.addRemove(n),t.addNotify(e=>({...a.addCustom("changeParent",(s,o,h)=>s.put(n(o),h),s=>{const o=new I(s);return e.notify("update",o),o}),subscribeToMany:s=>{b(()=>{c.forEach(o=>e.unsubscribe(o)),c=[]}),c.push(e.subscribe("all",s))}}))));d.subscribeToMany;const L=r.get(d),P=r.getMany(d);r.create(d);r.update(d);r.remove(d);r.custom(d.changeParent);export{L as a,P as u};
