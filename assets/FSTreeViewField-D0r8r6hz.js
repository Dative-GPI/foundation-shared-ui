import{R as n,b as R,c as y,F as M,m as P,i as ye,Y as he,Z as $e,s as Ie,M as we,l as w,p as Ce,d as ke,z as q,C as V,G as E,H as C,E as B,A as Se,B as N,S as j,N as L,O as z,P as K,D as W,I as J,J as Y}from"./vue.esm-bundler-DtArtqdn.js";import{d as te,m as Fe,e as Te,V as ie,f as qe,g as Pe,h as Ae,i as Le,j as Oe,a as ne,F as Be}from"./VList-DzWKuuQl.js";import{F as X}from"./FSTextField-ofwyccS7.js";import{V as Re,F as _}from"./FSCheckbox-D615kJWP.js";import{_ as fe}from"./FSFadeOut-okmKwNuP.js";import{F as He}from"./FSLoader-C5CmIvK9.js";import{_ as x}from"./FSRadio-K1Efb9Rj.js";import{_ as H}from"./FSSpan-Btkwe66a.js";import{F as Me}from"./FSMenu-BUeXiefy.js";import{F as ee}from"./FSCol-D6yYDi9X.js";import{V as Ue}from"./VDefaultsProvider-ChCmi1O1.js";import{g as U,u as Q,m as De,p as Ge}from"./color-DKVd81aj.js";import{p as D,o as ce}from"./theme-BTycGIF1.js";import{u as Ee}from"./density-96HGjcby.js";import{m as Ne,I as je}from"./VIcon-_X0ionFS.js";import{u as ze}from"./router-DPM6bvc5.js";import{g as Ke}from"./border--9_J8r4E.js";import{V as se}from"./VBtn-YNAwppzK.js";import{V as re}from"./VProgressCircular-vkSDrwPD.js";import{u as We,m as Je}from"./filter-C3p-TgWl.js";import{u as ue}from"./proxiedModel-DNPVb8sx.js";import{u as Ye}from"./useRules-eDN7Chft.js";import{u as Ze}from"./useBreakpoints-DjafNA1e.js";import{u as Qe,C as Xe}from"./useColors-P6sW9vWR.js";import{u as _e}from"./useSlots-DbyfVVj5.js";import{_ as xe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const el=D({start:Boolean,end:Boolean,...De(),...Ne()},"VListItemAction"),oe=U()({name:"VListItemAction",props:el(),setup(e,r){let{slots:g}=r;return Q(()=>n(e.tag,{class:["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class],style:e.style},g)),{}}}),ll=D({...ce(Fe({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),de=U()({name:"VTreeviewGroup",props:ll(),setup(e,r){let{slots:g}=r;const l=R(),h=y(()=>{var f;return(f=l.value)!=null&&f.isOpen?e.collapseIcon:e.expandIcon}),$=y(()=>{var f;return{VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,active:(f=l.value)==null?void 0:f.isOpen,toggleIcon:h.value}}});return Q(()=>{const f=te.filterProps(e);return n(te,P(f,{ref:l,class:["v-treeview-group",e.class],subgroup:!0}),{...g,activator:g.activator?c=>n(M,null,[n(Ue,{defaults:$.value},{default:()=>{var v;return[(v=g.activator)==null?void 0:v.call(g,c)]}})]):void 0})}),{}}}),pe=Symbol.for("vuetify:v-treeview"),al=D({loading:Boolean,toggleIcon:je,...Ae({slim:!0})},"VTreeviewItem"),me=U()({name:"VTreeviewItem",props:al(),setup(e,r){let{attrs:g,slots:l,emit:h}=r;const $=ze(e,g),f=y(()=>e.value===void 0?$.href.value:e.value),c=R(),{activate:v,isActivated:b,select:a,isSelected:i,isIndeterminate:s,isGroupActivator:I,root:k,id:S}=Te(f,!1),F=y(()=>k.activatable.value&&I),{densityClasses:A}=Ee(e,"v-list-item"),d=y(()=>({isActive:b.value,select:a,isSelected:i.value,isIndeterminate:s.value})),u=y(()=>{var p;return!e.disabled&&e.link!==!1&&(e.link||$.isClickable.value||e.value!=null&&!!((p=c.value)!=null&&p.list))});function m(p){var T,G;!u.value||!F.value&&I||k.activatable.value&&(F.value?v(!b.value,p):(G=c.value)==null||G.activate(!((T=c.value)!=null&&T.isActivated),p))}function t(p){(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),m(p))}const o=ye(pe,{visibleIds:R()}).visibleIds;return Q(()=>{var le;const p=l.title||e.title!=null,T=l.subtitle||e.subtitle!=null,G=ie.filterProps(e),be=l.prepend||e.toggleIcon;return F.value?he(n("div",{class:["v-list-item","v-list-item--one-line","v-treeview-item","v-treeview-item--activetable-group-activator",{"v-list-item--active":b.value||i.value,"v-treeview-item--filtered":o.value&&!o.value.has(S.value)},A.value,e.class],onClick:m},[n(M,null,[Ke(b.value||i.value,"v-list-item"),e.toggleIcon&&n(oe,{start:!1},{default:()=>[n(se,{density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text",onClick:e.onClick},{loader(){return n(re,{indeterminate:"disable-shrink",size:"20",width:"2"},null)}})]})]),n("div",{class:"v-list-item__content","data-no-activator":""},[p&&n(qe,{key:"title"},{default:()=>{var O;return[((O=l.title)==null?void 0:O.call(l,{title:e.title}))??e.title]}}),T&&n(Pe,{key:"subtitle"},{default:()=>{var O;return[((O=l.subtitle)==null?void 0:O.call(l,{subtitle:e.subtitle}))??e.subtitle]}}),(le=l.default)==null?void 0:le.call(l,d.value)])]),[[$e("ripple"),u.value&&e.ripple]]):n(ie,P({ref:c},G,{class:["v-treeview-item",{"v-treeview-item--filtered":o.value&&!o.value.has(S.value)},e.class],value:S.value,onClick:m,onKeydown:u.value&&t}),{...l,prepend:be?O=>{var ae;return n(M,null,[e.toggleIcon&&n(oe,{start:!1},{default:()=>[n(se,{density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text"},{loader(){return n(re,{indeterminate:"disable-shrink",size:"20",width:"2"},null)}})]}),(ae=l.prepend)==null?void 0:ae.call(l,O)])}:void 0})}),{}}}),ve=D({loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,selectable:Boolean,selectStrategy:[String,Function,Object]},"VTreeviewChildren"),Z=U()({name:"VTreeviewChildren",props:ve(),setup(e,r){let{emit:g,slots:l}=r;const h=Ie(null);function $(c){return new Promise(v=>{var b,a;if(!((b=e.items)!=null&&b.length)||!e.loadChildren)return v();if(((a=c==null?void 0:c.children)==null?void 0:a.length)===0){h.value=c.value,e.loadChildren(c).then(v);return}v()}).finally(()=>{h.value=null})}function f(c,v){e.selectable&&c(!v)}return()=>{var c,v;return((c=l.default)==null?void 0:c.call(l))??((v=e.items)==null?void 0:v.map(b=>{var A;let{children:a,props:i,raw:s}=b;const I=h.value===s.value,k={prepend:d=>{var u;return n(M,null,[e.selectable&&(!a||a&&!["leaf","single-leaf"].includes(e.selectStrategy))&&n("div",null,[n(Re,{key:s.value,modelValue:d.isSelected,loading:I,indeterminate:d.isIndeterminate,onClick:we(()=>f(d.select,d.isSelected),["stop"]),onKeydown:m=>{["Enter","Space"].includes(m.key)&&(m.stopPropagation(),f(d.select,d.isSelected))}},null)]),(u=l.prepend)==null?void 0:u.call(l,{...d,item:s})])},append:l.append?d=>{var u;return(u=l.append)==null?void 0:u.call(l,{...d,item:s})}:void 0,title:l.title?d=>{var u;return(u=l.title)==null?void 0:u.call(l,{...d,item:s})}:void 0},S=de.filterProps(i),F=Z.filterProps(e);return a?n(de,P({value:i==null?void 0:i.value},S),{activator:d=>{let{props:u}=d;const m={...i,...u,value:i==null?void 0:i.value};return n(me,P(m,{loading:I,onClick:()=>$(s)}),k)},default:()=>n(Z,P(F,{items:a}),l)}):((A=l.item)==null?void 0:A.call(l,{props:i}))??n(me,i,k)}))}}});function Ve(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];for(const g of e)r.push(g),g.children&&Ve(g.children,r);return r}const tl=D({openAll:Boolean,search:String,...Je({filterKeys:["title"]}),...ve(),...ce(Oe({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",slim:!0}),["itemType","nav"])},"VTreeview"),il=U()({name:"VTreeview",props:tl(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,r){let{slots:g}=r;const{items:l}=Le(e),h=w(e,"activeColor"),$=w(e,"baseColor"),f=w(e,"color"),c=ue(e,"activated"),v=ue(e,"selected"),b=R(),a=y(()=>e.openAll?A(l.value):e.opened),i=y(()=>Ve(l.value)),s=w(e,"search"),{filteredItems:I}=We(e,i,s),k=y(()=>s.value?new Set(I.value.flatMap(d=>[...S(d.props.value),...F(d.props.value)])):null);function S(d){var t;const u=[];let m=d;for(;m!=null;)u.unshift(m),m=(t=b.value)==null?void 0:t.parents.get(m);return u}function F(d){var t,o;const u=[],m=(((t=b.value)==null?void 0:t.children.get(d))??[]).slice();for(;m.length;){const p=m.shift();p&&(u.push(p),m.push(...(((o=b.value)==null?void 0:o.children.get(p))??[]).slice()))}return u}function A(d){let u=[];for(const m of d)m.children&&(u.push(m.value),m.children&&(u=u.concat(A(m.children))));return u}return Ce(pe,{visibleIds:k}),Ge({VTreeviewGroup:{activeColor:h,baseColor:$,color:f,collapseIcon:w(e,"collapseIcon"),expandIcon:w(e,"expandIcon")},VTreeviewItem:{activeClass:w(e,"activeClass"),activeColor:h,baseColor:$,color:f,density:w(e,"density"),disabled:w(e,"disabled"),lines:w(e,"lines"),variant:w(e,"variant")}}),Q(()=>{const d=ne.filterProps(e),u=Z.filterProps(e);return n(ne,P({ref:b},d,{class:["v-treeview",e.class],style:e.style,opened:a.value,activated:c.value,"onUpdate:activated":m=>c.value=m,selected:v.value,"onUpdate:selected":m=>v.value=m}),{default:()=>[n(Z,P(u,{items:l.value}),g)]})}),{}}}),ge=ke({name:"FSTreeViewField",components:{VTreeview:il,FSDialogMenu:Be,FSTextField:X,FSCheckbox:_,FSFadeOut:fe,FSLoader:He,FSRadio:x,FSSpan:H,FSMenu:Me,FSCol:ee},props:{label:{type:String,required:!1,default:null},description:{type:String,required:!1,default:null},items:{type:Array,required:!0},itemValue:{type:String,required:!1,default:"id"},itemTitle:{type:String,required:!1,default:"label"},itemParent:{type:String,required:!1,default:"parentId"},exclude:{type:Array,required:!1,default:()=>[]},modelValue:{type:[Array,String,Number],required:!1,default:null},hideHeader:{type:Boolean,required:!1,default:!1},required:{type:Boolean,required:!1,default:!1},multiple:{type:Boolean,required:!1,default:!1},rules:{type:Array,required:!1,default:()=>[]},messages:{type:Array,required:!1,default:null},clearable:{type:Boolean,required:!1,default:!0},disabled:{type:Boolean,required:!1,default:!1},loading:{type:Boolean,required:!1,default:!1}},emits:["update:modelValue"],setup(e,{emit:r}){const{validateOn:g,getMessages:l}=Ye(),{isExtraSmall:h}=Ze(),{getColors:$}=Qe(),{slots:f}=_e();delete f.label,delete f.description,delete f["menu-prepend"];const c=$(Xe.Background),v=R(!1),b=R(!1),a=y(()=>e.disabled?{"--fs-tree-view-field-cursor":"default"}:{"--fs-tree-view-field-cursor":"pointer","--fs-tree-view-field-background-color":c.base}),i=y(()=>e.messages??l(e.modelValue,e.rules)),s=y(()=>"calc(100vh - 40px - 16px)"),I=y(()=>Object.keys(f).filter(t=>!t.startsWith("menu-")).reduce((t,o)=>(t[o]=f[o],t),{})),k=y(()=>Object.keys(f).filter(t=>t.startsWith("menu-")).reduce((t,o)=>(t[o.substring(5)]=f[o],t),{})),S=y(()=>{if(e.multiple&&Array.isArray(e.modelValue))return e.modelValue.map(t=>{const o=e.items.find(p=>p[e.itemValue]===t);if(o)return o[e.itemTitle]}).filter(t=>!!t).join(", ");if(e.modelValue){const t=e.items.find(o=>o[e.itemValue]===e.modelValue);if(t)return t[e.itemTitle]}return null}),F=y(()=>{const t=p=>e.items.filter(T=>e.exclude.includes(T[e.itemValue])?!1:T[e.itemParent]==p),o=p=>e.items.some(T=>T[e.itemParent]===p[e.itemValue])?{...p,children:t(p[e.itemValue]).map(o)}:p;return t(null).map(o)});return{isExtraSmall:h,innerValue:S,fieldSlots:I,validateOn:g,maxHeight:s,menuSlots:k,treeItems:F,messages:i,dialog:v,style:a,menu:b,openMobileOverlay:()=>{e.disabled||(v.value=!0)},onCheckboxChange:t=>{Array.isArray(e.modelValue)?e.modelValue.includes(t)?r("update:modelValue",e.modelValue.filter(o=>o!==t)):r("update:modelValue",[...e.modelValue,t]):e.modelValue!=null?e.modelValue===t?r("update:modelValue",[]):r("update:modelValue",[e.modelValue,t]):r("update:modelValue",[t])},onRadioChange:t=>{r("update:modelValue",t),v.value=!1,b.value=!1},listItemClass:t=>{const o=[];return e.multiple&&Array.isArray(e.modelValue)?e.modelValue.includes(t)&&o.push("fs-tree-view-item-selected"):e.modelValue===t&&o.push("fs-tree-view-item-selected"),o}}}});function nl(e,r,g,l,h,$){const f=E("FSLoader"),c=E("v-treeview"),v=E("FSDialogMenu"),b=E("FSMenu");return e.$props.loading?(C(),q(ee,{key:0},{default:V(()=>[e.$props.hideHeader?B("",!0):(C(),q(f,{key:0,variant:"text-overline"})),e.$props.loading?(C(),q(f,{key:1,width:"100%",height:["40px","36px"]})):B("",!0)]),_:1})):(C(),q(ee,{key:1},{default:V(()=>[e.isExtraSmall?(C(),Se(M,{key:0},[n(X,P({class:"fs-tree-view-field",validationValue:e.$props.modelValue,description:e.$props.description,hideHeader:e.$props.hideHeader,clearable:e.$props.clearable,disabled:e.$props.disabled,required:e.$props.required,validateOn:e.validateOn,label:e.$props.label,rules:e.$props.rules,messages:e.messages,readonly:!0,style:e.style,modelValue:e.innerValue,"onUpdate:modelValue":r[0]||(r[0]=a=>e.$emit("update:modelValue",a)),onClick:e.openMobileOverlay},e.$attrs),N({_:2},[j(e.fieldSlots,(a,i)=>({name:i,fn:V(s=>[L(e.$slots,i,z(K(s)))])}))]),1040,["validationValue","description","hideHeader","clearable","disabled","required","validateOn","label","rules","messages","style","modelValue","onClick"]),n(v,{modelValue:e.dialog,"onUpdate:modelValue":r[1]||(r[1]=a=>e.dialog=a)},{body:V(()=>[n(fe,{maxHeight:e.maxHeight},{default:V(()=>[n(c,{itemTitle:e.$props.itemTitle,itemValue:e.$props.itemValue,items:e.treeItems},N({prepend:V(({item:a})=>{var i;return[e.$props.multiple?(C(),q(_,{key:0,class:W(e.listItemClass(a[e.$props.itemValue])),disabled:e.$props.disabled,modelValue:(i=e.$props.modelValue)==null?void 0:i.includes(a[e.$props.itemValue]),"onUpdate:modelValue":()=>e.onCheckboxChange(a[e.$props.itemValue])},{label:V(({font:s})=>[L(e.$slots,"menu-prepend",{item:a}),n(H,{font:s},{default:V(()=>[J(Y(a[e.$props.itemTitle]),1)]),_:2},1032,["font"])]),_:2},1032,["class","disabled","modelValue","onUpdate:modelValue"])):B("",!0),e.$props.multiple?B("",!0):(C(),q(x,{key:1,selected:e.$props.modelValue===a[e.$props.itemValue],class:W(e.listItemClass(a[e.$props.itemValue])),disabled:e.$props.disabled,modelValue:a[e.$props.itemValue],"onUpdate:modelValue":e.onRadioChange},{label:V(({font:s})=>[L(e.$slots,"menu-prepend",{item:a}),n(H,{font:s},{default:V(()=>[J(Y(a[e.$props.itemTitle]),1)]),_:2},1032,["font"])]),_:2},1032,["selected","class","disabled","modelValue","onUpdate:modelValue"]))]}),title:V(()=>[]),_:2},[j(e.menuSlots,(a,i)=>({name:i,fn:V(s=>[L(e.$slots,i,z(K(s)))])}))]),1032,["itemTitle","itemValue","items"])]),_:3},8,["maxHeight"])]),_:3},8,["modelValue"])],64)):(C(),q(b,{key:1,closeOnContentClick:!1,modelValue:e.menu&&!e.$props.disabled,"onUpdate:modelValue":r[3]||(r[3]=a=>e.menu=a)},{activator:V(({props:a})=>[n(X,P({class:"fs-tree-view-field",validationValue:e.$props.modelValue,description:e.$props.description,hideHeader:e.$props.hideHeader,clearable:e.$props.clearable,disabled:e.$props.disabled,required:e.$props.required,validateOn:e.validateOn,label:e.$props.label,rules:e.$props.rules,messages:e.messages,readonly:!0,style:e.style,modelValue:e.innerValue,"onUpdate:modelValue":r[2]||(r[2]=i=>e.$emit("update:modelValue",i))},{...e.$attrs,...a}),N({_:2},[j(e.fieldSlots,(i,s)=>({name:s,fn:V(I=>[L(e.$slots,s,z(K(I)))])}))]),1040,["validationValue","description","hideHeader","clearable","disabled","required","validateOn","label","rules","messages","style","modelValue"])]),default:V(()=>[n(c,{itemTitle:e.$props.itemTitle,itemValue:e.$props.itemValue,items:e.treeItems},N({prepend:V(({item:a})=>{var i;return[e.$props.multiple?(C(),q(_,{key:0,class:W(e.listItemClass(a[e.$props.itemValue])),disabled:e.$props.disabled,modelValue:(i=e.$props.modelValue)==null?void 0:i.includes(a[e.$props.itemValue]),"onUpdate:modelValue":()=>e.onCheckboxChange(a[e.$props.itemValue])},{label:V(({font:s})=>[L(e.$slots,"menu-prepend",{item:a}),n(H,{font:s},{default:V(()=>[J(Y(a[e.$props.itemTitle]),1)]),_:2},1032,["font"])]),_:2},1032,["class","disabled","modelValue","onUpdate:modelValue"])):B("",!0),e.$props.multiple?B("",!0):(C(),q(x,{key:1,selected:e.$props.modelValue===a[e.$props.itemValue],class:W(e.listItemClass(a[e.$props.itemValue])),disabled:e.$props.disabled,modelValue:a[e.$props.itemValue],"onUpdate:modelValue":e.onRadioChange},{label:V(({font:s})=>[L(e.$slots,"menu-prepend",{item:a}),n(H,{font:s},{default:V(()=>[J(Y(a[e.$props.itemTitle]),1)]),_:2},1032,["font"])]),_:2},1032,["selected","class","disabled","modelValue","onUpdate:modelValue"]))]}),title:V(()=>[]),_:2},[j(e.menuSlots,(a,i)=>({name:i,fn:V(s=>[L(e.$slots,i,z(K(s)))])}))]),1032,["itemTitle","itemValue","items"])]),_:3},8,["modelValue"]))]),_:3}))}const Ll=xe(ge,[["render",nl]]);ge.__docgenInfo={displayName:"FSTreeViewField",exportName:"default",description:"",tags:{},props:[{name:"label",type:{name:"string | null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"description",type:{name:"string | null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"items",type:{name:"any[]"},required:!0},{name:"itemValue",type:{name:"string"},required:!1,defaultValue:{func:!1,value:'"id"'}},{name:"itemTitle",type:{name:"string"},required:!1,defaultValue:{func:!1,value:'"label"'}},{name:"itemParent",type:{name:"string"},required:!1,defaultValue:{func:!1,value:'"parentId"'}},{name:"exclude",type:{name:"string[]"},required:!1,defaultValue:{func:!0,value:"() => []"}},{name:"modelValue",type:{name:"(string | number)[] | string | number | null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"hideHeader",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"required",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"multiple",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"rules",type:{name:"any[]"},required:!1,defaultValue:{func:!0,value:"() => []"}},{name:"messages",type:{name:"string[]"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"clearable",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"true"}},{name:"disabled",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"loading",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}}],events:[{name:"update:modelValue"}],slots:[{name:"name",scoped:!0,bindings:[{name:"name",title:"binding"}]},{name:"menu-prepend",scoped:!0,bindings:[{name:"item",title:"binding"}]}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/shared/foundation-shared-components/components/fields/FSTreeViewField.vue"]};export{Ll as F};
