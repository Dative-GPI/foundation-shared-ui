import{j as D,d as W,s as b,z as c,N as x}from"./vue.esm-bundler-0a1af505.js";import{u as p,g as j}from"./date-be665ad9.js";import{u as V}from"./proxiedModel-350eff8d.js";import{p as M,w as N}from"./theme-8d83670f.js";import{V as C}from"./VDefaultsProvider-76561179.js";import{V as I}from"./VBtn-bc3cd0df.js";import{g as A,m as B,u as O}from"./useRender-76465e3d.js";import{p as L}from"./locale-d3181d48.js";const Y=M({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]}},"calendar");function R(t){const e=p(),u=V(t,"modelValue",[],n=>N(n)),y=D(()=>t.displayValue?e.date(t.displayValue):u.value.length>0?e.date(u.value[0]):t.min?e.date(t.min):Array.isArray(t.allowedDates)?e.date(t.allowedDates[0]):e.date()),k=V(t,"year",void 0,n=>{const l=n!=null?Number(n):e.getYear(y.value);return e.startOfYear(e.setYear(e.date(),l))},n=>e.getYear(n)),h=V(t,"month",void 0,n=>{const l=n!=null?Number(n):e.getMonth(y.value),s=e.setYear(e.startOfMonth(e.date()),e.getYear(k.value));return e.setMonth(s,l)},n=>e.getMonth(n)),r=D(()=>{const n=e.getWeekArray(h.value),l=n.flat(),s=6*7;if(l.length<s){const a=l[l.length-1];let d=[];for(let o=1;o<=s-l.length;o++)d.push(e.addDays(a,o)),o%7===0&&(n.push(d),d=[])}return n});function g(n,l){return n.filter(s=>t.weekdays.includes(e.toJsDate(s).getDay())).map((s,a)=>{const d=e.toISO(s),o=!e.isSameMonth(s,h.value),m=e.isSameDay(s,e.startOfMonth(h.value)),w=e.isSameDay(s,e.endOfMonth(h.value)),S=e.isSameDay(s,h.value);return{date:s,isoDate:d,formatted:e.format(s,"keyboardDate"),year:e.getYear(s),month:e.getMonth(s),isDisabled:_(s),isWeekStart:a%7===0,isWeekEnd:a%7===6,isToday:e.isSameDay(s,l),isAdjacent:o,isHidden:o&&!t.showAdjacentMonths,isStart:m,isSelected:u.value.some(P=>e.isSameDay(s,P)),isEnd:w,isSame:S,localized:e.format(s,"dayOfMonth")}})}const f=D(()=>{const n=e.startOfWeek(u.value),l=[];for(let d=0;d<=6;d++)l.push(e.addDays(n,d));const s=l,a=e.date();return g(s,a)}),i=D(()=>{const n=r.value.flat(),l=e.date();return g(n,l)}),v=D(()=>r.value.map(n=>n.length?j(e,n[0]):null));function _(n){if(t.disabled)return!0;const l=e.date(n);return t.min&&e.isAfter(e.date(t.min),l)||t.max&&e.isAfter(l,e.date(t.max))?!0:Array.isArray(t.allowedDates)&&t.allowedDates.length>0?!t.allowedDates.some(s=>e.isSameDay(e.date(s),l)):typeof t.allowedDates=="function"?!t.allowedDates(l):!1}return{displayValue:y,daysInMonth:i,daysInWeek:f,genDays:g,model:u,weeksInMonth:r,weekNumbers:v}}const T=M({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,...Y()},"VDatePickerMonth"),Q=A()({name:"VDatePickerMonth",props:T(),emits:{"update:modelValue":t=>!0,"update:month":t=>!0,"update:year":t=>!0},setup(t,e){let{emit:u,slots:y}=e;const k=W(),{daysInMonth:h,model:r,weekNumbers:g}=R(t),f=p(),i=b(),v=b(),_=D(()=>{const a=["number","string"].includes(typeof t.multiple)?Number(t.multiple):1/0;return r.value.length>=a});function n(a){const d=f.startOfDay(a);if(!i.value)i.value=d,r.value=[i.value];else if(v.value)i.value=a,v.value=void 0,r.value=[i.value];else{if(f.isSameDay(a,i.value)){i.value=void 0,r.value=[];return}else f.isBefore(a,i.value)?(v.value=i.value,i.value=d):v.value=d;const o=f.getDiff(v.value,i.value,"days"),m=[i.value];for(let w=1;w<o;w++){const S=f.addDays(i.value,w);m.push(S)}m.push(v.value),r.value=m}}function l(a){const d=r.value.findIndex(o=>f.isSameDay(o,a));if(d===-1)r.value=[...r.value,a];else{const o=[...r.value];o.splice(d,1),r.value=o}}function s(a){t.multiple==="range"?n(a):t.multiple?l(a):r.value=[a]}return()=>c("div",{class:"v-date-picker-month"},[t.showWeek&&c("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!t.hideWeekdays&&c("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[x("Â ")]),g.value.map(a=>c("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[a]))]),c("div",{ref:k,class:"v-date-picker-month__days"},[!t.hideWeekdays&&f.getWeekdays().map(a=>c("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[a])),h.value.map((a,d)=>{const o={props:{onClick:()=>s(a.date)},item:a,i:d};return _.value&&!a.isSelected&&(a.isDisabled=!0),c("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":a.isAdjacent,"v-date-picker-month__day--hide-adjacent":a.isHidden,"v-date-picker-month__day--selected":a.isSelected,"v-date-picker-month__day--week-end":a.isWeekEnd,"v-date-picker-month__day--week-start":a.isWeekStart}],"data-v-date":a.isDisabled?void 0:a.isoDate},[(t.showAdjacentMonths||!a.isAdjacent)&&c(C,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(a.isSelected||a.isToday)&&!a.isDisabled?t.color:void 0,disabled:a.isDisabled,icon:!0,ripple:!1,text:a.localized,variant:a.isDisabled?a.isToday?"outlined":"text":a.isToday&&!a.isSelected?"outlined":"flat",onClick:()=>s(a.date)}}},{default:()=>{var m;return[((m=y.day)==null?void 0:m.call(y,o))??c(I,o.props,null)]}})])})])])}});const z=M({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...B()},"VLocaleProvider"),U=A()({name:"VLocaleProvider",props:z(),setup(t,e){let{slots:u}=e;const{rtlClasses:y}=L(t);return O(()=>{var k;return c("div",{class:["v-locale-provider",y.value,t.class],style:t.style},[(k=u.default)==null?void 0:k.call(u)])}),{}}});export{U as V,Q as a};
