import{d as b,j as A,e as c,E as j,z as q,K as I,L as _,V as O,w as J,J as K,M as F,x as Y,P as Q,W as X}from"./vue.esm-bundler-37de1696.js";import{u as Z,s as m}from"./css-b545198d.js";import{u as ee,C as te}from"./useColors-ba22af06.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";import{b as ae}from"./color-efc02365.js";import{m as re,u as ne}from"./dimensions-4b009e60.js";import{m as le,u as ie}from"./elevation-66cfbdec.js";import{u as se}from"./locale-ee313da6.js";import{p as ue,y as oe,z as de,w as ce}from"./theme-07d11e72.js";import{g as fe,u as he}from"./useRender-ccb83440.js";import{G as me}from"./base-55a66464.js";import{S as M}from"./serviceFactory-25228cba.js";import{V as ge}from"./VImg-d6f10770.js";class N{constructor(t){this.blurHash=t.blurHash,this.width=t.width,this.height=t.height}}const U=()=>`${me()}/images`,pe=()=>`${U()}/raw`,ve=e=>`${pe()}/${encodeURIComponent(e)}`,be=()=>`${U()}/blurHash`,ye=e=>`${be()}/${encodeURIComponent(e)}`,xe=new M("image",N).create(e=>e.build(e.addNotify(()=>({getBlurHash:async t=>{const a=await M.http.get(ye(t));return new N(a.data)}})))),we=()=>{const e=xe(),t=b(!1),a=b(null);return{getting:t,get:async i=>{t.value=!0;try{a.value=await e.getBlurHash(i)}finally{t.value=!1}return a},entity:a}},G=A({name:"FSLoader",props:{width:{type:[Array,String,Number],required:!1,default:null},height:{type:[Array,String,Number],required:!1,default:null},padding:{type:[String,Number],required:!1,default:"0"},borderRadius:{type:[String,Number],required:!1,default:"4px"},variant:{type:String,required:!1,default:"standard"}},setup(e){const{isMobileSized:t}=Z(),{getColors:a}=ee(),r=a(te.Background),i=c(()=>({"--fs-loader-background-color":r.base,"--fs-loader-border-radius":["chip"].includes(e.variant)?"50px":m(e.borderRadius),"--fs-loader-padding":m(e.padding),"--fs-loader-height":m(d.value),"--fs-loader-width":m(u.value)})),d=c(()=>{switch(e.variant){case"standard":return m(e.height);case"button":case"input":case"field":return t.value?"36px":"40px";case"chip":return t.value?"20px":"24px";case"text-h1":return t.value?"32px":"40px";case"text-h2":return t.value?"24px":"32px";case"text-h3":return t.value?"20px":"24px";case"text-h4":return t.value?"16px":"20px";case"text-body":case"text-button":return t.value?"14px":"16px";case"text-overline":case"text-underline":return"16px"}}),u=c(()=>{switch(e.variant){case"standard":return m(e.width);case"button":return t?"36px":"40px";case"input":return t?"calc(50% - 124px)":"calc(50% - 132px)";case"field":return"100%";case"chip":return"8vw";case"text-h1":return"calc(50% - 32px)";case"text-h2":return"calc(60% - 32px)";case"text-h3":return"calc(65% - 32px)";default:return"calc(75% - 32px)"}});return{style:i}}});const Re={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function Se(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return q("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[t])}function L(e){const[t,a]=e.split("@");return Array.from({length:a}).map(()=>R(t))}function R(e){let t=[];if(!e)return t;const a=Re[e];if(e!==a){if(e.includes(","))return H(e);if(e.includes("@"))return L(e);a.includes(",")?t=H(a):a.includes("@")?t=L(a):a&&t.push(R(a))}return[Se(e,t)]}function H(e){return e.replace(/\s/g,"").split(",").map(R)}const Be=ue({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...re(),...le(),...oe()},"VSkeletonLoader"),$e=fe()({name:"VSkeletonLoader",props:Be(),setup(e,t){let{slots:a}=t;const{backgroundColorClasses:r,backgroundColorStyles:i}=ae(j(e,"color")),{dimensionStyles:d}=ne(e),{elevationClasses:u}=ie(e),{themeClasses:g}=de(e),{t:h}=se(),f=c(()=>R(ce(e.type).join(",")));return he(()=>{var n;const o=!a.default||e.loading;return q("div",{class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},g.value,r.value,u.value],style:[i.value,o?d.value:{}],"aria-busy":e.boilerplate?void 0:o,"aria-live":e.boilerplate?void 0:"polite","aria-label":e.boilerplate?void 0:h(e.loadingText),role:e.boilerplate?void 0:"alert"},[o?f.value:(n=a.default)==null?void 0:n.call(a)])}),{}}});function ke(e,t,a,r,i,d){return I(),_($e,{class:"fs-loader",type:"image",style:O(e.style)},null,8,["style"])}const Ve=E(G,[["render",ke]]);G.__docgenInfo={displayName:"FSLoader",exportName:"default",description:"",tags:{},props:[{name:"width",type:{name:"string[] | number[] | string | number"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"height",type:{name:"string[] | number[] | string | number"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"padding",type:{name:"string|number"},required:!1,defaultValue:{func:!1,value:'"0"'}},{name:"borderRadius",type:{name:"string|number"},required:!1,defaultValue:{func:!1,value:'"4px"'}},{name:"variant",values:["standard","button","input","field","chip","text-h1","text-h2","text-h3","text-h4","text-body","text-button","text-overline","text-underline"],type:{name:"string"},required:!1,defaultValue:{func:!1,value:'"standard"'}}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/shared/foundation-shared-components/components/FSLoader.vue"]};var Ie=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],v=e=>{let t=0;for(let a=0;a<e.length;a++){let r=e[a],i=Ie.indexOf(r);t=t*83+i}return t},$=e=>{let t=e/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},k=e=>{let t=Math.max(0,Math.min(1,e));return t<=.0031308?Math.trunc(t*12.92*255+.5):Math.trunc((1.055*Math.pow(t,.4166666666666667)-.055)*255+.5)},_e=e=>e<0?-1:1,V=(e,t)=>_e(e)*Math.pow(Math.abs(e),t),C=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},T=e=>{if(!e||e.length<6)throw new C("The blurhash string must be at least 6 characters");let t=v(e[0]),a=Math.floor(t/9)+1,r=t%9+1;if(e.length!==4+2*r*a)throw new C(`blurhash length mismatch: length is ${e.length} but it should be ${4+2*r*a}`)},qe=e=>{try{T(e)}catch(t){return{result:!1,errorReason:t.message}}return{result:!0}},Fe=e=>{let t=e>>16,a=e>>8&255,r=e&255;return[$(t),$(a),$(r)]},Me=(e,t)=>{let a=Math.floor(e/361),r=Math.floor(e/19)%19,i=e%19;return[V((a-9)/9,2)*t,V((r-9)/9,2)*t,V((i-9)/9,2)*t]},Ne=(e,t,a,r)=>{T(e),r=r|1;let i=v(e[0]),d=Math.floor(i/9)+1,u=i%9+1,g=(v(e[1])+1)/166,h=new Array(u*d);for(let n=0;n<h.length;n++)if(n===0){let s=v(e.substring(2,6));h[n]=Fe(s)}else{let s=v(e.substring(4+n*2,6+n*2));h[n]=Me(s,g*r)}let f=t*4,o=new Uint8ClampedArray(f*a);for(let n=0;n<a;n++)for(let s=0;s<t;s++){let l=0,y=0,p=0;for(let x=0;x<d;x++)for(let w=0;w<u;w++){let S=Math.cos(Math.PI*s*w/t)*Math.cos(Math.PI*n*x/a),B=h[w+x*u];l+=B[0]*S,y+=B[1]*S,p+=B[2]*S}let P=k(l),D=k(y),z=k(p);o[4*s+0+n*f]=P,o[4*s+1+n*f]=D,o[4*s+2+n*f]=z,o[4*s+3+n*f]=255}return o},Le=Ne;const W=A({name:"FSImage",components:{FSLoader:Ve},props:{imageId:{type:String,required:!1,default:null},imageB64:{type:String,required:!1,default:null},cover:{type:Boolean,required:!1,default:!0},width:{type:[String,Number],required:!1,default:null},height:{type:[String,Number],required:!1,default:null},aspectRatio:{type:String,required:!1,default:null},borderRadius:{type:[String,Number],required:!1,default:"4px"}},setup(e){const{get:t,entity:a}=we(),r=b(null),i=b(null),d=b({JVBERi0:"application/pdf",R0lGODdh:"image/gif",R0lGODlh:"image/gif",iVBORw0KGgo:"image/png","/9j/":"image/jpg"}),u=c(()=>({"--fs-image-border-radius":m(e.borderRadius),"--fs-image-blurhash-opacity":a.value?"1":"0"})),g=c(()=>{if(e.height)return e.height;if(e.width){if(typeof e.width=="string")return;if(e.aspectRatio){const l=e.aspectRatio.split("/");if(l.length===2&&!isNaN(parseFloat(l[0]))&&!isNaN(parseFloat(l[1])))return e.width*(parseFloat(l[1])/parseFloat(l[0]))}return e.width}}),h=c(()=>{if(e.width)return e.width;if(e.height){if(typeof e.height=="string")return;if(e.aspectRatio){const l=e.aspectRatio.split("/");if(l.length===2&&!isNaN(parseFloat(l[0]))&&!isNaN(parseFloat(l[1])))return e.height*(parseFloat(l[0])/parseFloat(l[1]))}return e.height}}),f=c(()=>{if(e.imageId)return ve(e.imageId);if(e.imageB64&&n.value&&o.value)return`${n.value},${o.value}`}),o=c(()=>e.imageB64&&e.imageB64.includes(",")?e.imageB64.split(",")[1]:e.imageB64),n=c(()=>{if(e.imageB64&&e.imageB64.includes(","))return e.imageB64.split(",")[0];if(e.imageB64){for(const l in d.value)if(e.imageB64.startsWith(l))return`data:${d.value[l]};base64`}return null}),s=()=>{e.imageId&&t(e.imageId)};return J(()=>a.value,()=>{if(i.value&&r.value&&a.value&&qe(a.value.blurHash).result){const l=i.value.getContext("2d");if(l){const y=Le(a.value.blurHash,r.value.$el.clientWidth,r.value.$el.clientHeight),p=l.createImageData(r.value.$el.clientWidth,r.value.$el.clientHeight);p.data.set(y),l.putImageData(p,0,0)}}}),{computedHeight:g,computedWidth:h,canvasRef:i,imageRef:r,blurHash:a,source:f,style:u,onError:s}}}),He={ref:"canvasRef"};function Ce(e,t,a,r,i,d){const u=K("FSLoader");return I(),_(ge,Y({class:"fs-image",ref:"imageRef",height:e.computedHeight,width:e.computedWidth,cover:e.$props.cover,style:e.style,src:e.source,onError:e.onError},e.$attrs),{placeholder:F(()=>[q(u,{class:"fs-image-load",height:"100%",width:"100%",borderRadius:e.$props.borderRadius},null,8,["borderRadius"])]),error:F(()=>[e.blurHash?Q("",!0):(I(),_(u,{key:0,class:"fs-image-load",height:"100%",width:"100%",borderRadius:e.$props.borderRadius},null,8,["borderRadius"])),X("canvas",He,null,512)]),_:1},16,["height","width","cover","style","src","onError"])}const Ye=E(W,[["render",Ce]]);W.__docgenInfo={displayName:"FSImage",exportName:"default",description:"",tags:{},props:[{name:"imageId",type:{name:"string | null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"imageB64",type:{name:"string | null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"cover",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"true"}},{name:"width",type:{name:"string|number"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"height",type:{name:"string|number"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"aspectRatio",type:{name:"string | null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"borderRadius",type:{name:"string|number"},required:!1,defaultValue:{func:!1,value:'"4px"'}}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/shared/foundation-shared-components/components/FSImage.vue"]};export{Ye as F,$e as V,Ve as a};
