import{d as u,G as R,e as i,o as I,w as S,I as b,J as H,K as F,A as N,z as _,S as $}from"./vue.esm-bundler-588e96c7.js";import{G as q}from"./base-5094c3fa.js";import{S as l}from"./serviceFactory-25228cba.js";import{s as A}from"./css-50f0aa1d.js";import{_ as V}from"./_plugin-vue_export-helper-c27b6911.js";import{V as B}from"./VImg-3d3560c1.js";import{V as U}from"./VSkeletonLoader-2eb0f688.js";class f{constructor(t){this.blurHash=t.blurHash,this.width=t.width,this.height=t.height}}const g=()=>`${q()}/images`,L=()=>`${g()}/raw`,G=e=>`${L()}/${encodeURIComponent(e)}`,E=()=>`${g()}/blurHash`,M=e=>`${E()}/${encodeURIComponent(e)}`,h=new l("image",f).create(e=>e.build(e.addNotify(()=>({getRaw:async t=>(await l.http.get(G(t))).data,getBlurHash:async t=>{const a=await l.http.get(M(t));return new f(a.data)}})))),W=()=>{const e=h(),t=u(!1),a=u(null);return{getting:t,get:async s=>{t.value=!0;try{a.value=await e.getRaw(s)}finally{t.value=!1}return a},entity:a}},k=()=>{const e=h(),t=u(!1),a=u(null);return{getting:t,get:async s=>{t.value=!0;try{a.value=await e.getBlurHash(s)}finally{t.value=!1}return a},entity:a}},m=R({name:"FSImage",props:{imageId:{type:[String,null,void 0],required:!1,default:null},cover:{type:Boolean,required:!1,default:!0},width:{type:[String,Number],required:!1,default:null},height:{type:[String,Number],required:!1,default:null},aspectRatio:{type:String,required:!1,default:null},borderRadius:{type:[String,Number],required:!1,default:"4px"}},setup(e){const{getting:t,get:a,entity:n}=W(),{getting:s,get:o,entity:d}=k(),y=i(()=>({"--fs-image-border-radius":A(e.borderRadius)})),p=i(()=>{if(e.width)return e.width;if(e.height){if(typeof e.height=="string")return;if(e.aspectRatio){const r=e.aspectRatio.split("/");if(r.length===2&&!isNaN(parseFloat(r[0]))&&!isNaN(parseFloat(r[1])))return e.height*(parseFloat(r[0])/parseFloat(r[1]))}return e.height}}),v=i(()=>{if(e.height)return e.height;if(e.width){if(typeof e.width=="string")return;if(e.aspectRatio){const r=e.aspectRatio.split("/");if(r.length===2&&!isNaN(parseFloat(r[0]))&&!isNaN(parseFloat(r[1])))return e.width*(parseFloat(r[1])/parseFloat(r[0]))}return e.width}}),w=i(()=>t.value?null:n.value?n.value:s.value?null:d.value?d.value.blurHash:null);I(()=>{c()}),S(()=>e.imageId,()=>{c()});const c=async()=>{e.imageId&&(await a(e.imageId),n.value||await o(e.imageId))};return{style:y,source:w,computedWidth:p,computedHeight:v}}});function C(e,t,a,n,s,o){return b(),H(B,N({class:"fs-image",src:e.source,style:e.style,cover:e.$props.cover,width:e.computedWidth,height:e.computedHeight},e.$attrs),{placeholder:F(()=>[_(U,{class:"fs-load-image",type:"image",style:$(e.style)},null,8,["style"])]),_:1},16,["src","style","cover","width","height"])}const x=V(m,[["render",C]]);m.__docgenInfo={displayName:"FSImage",exportName:"default",description:"",tags:{},props:[{name:"imageId",type:{name:"string|null|undefined"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"cover",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"true"}},{name:"width",type:{name:"string|number"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"height",type:{name:"string|number"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"aspectRatio",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"borderRadius",type:{name:"string|number"},required:!1,defaultValue:{func:!1,value:'"4px"'}}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/shared/foundation-shared-components/components/FSImage.vue"]};export{x as F};
