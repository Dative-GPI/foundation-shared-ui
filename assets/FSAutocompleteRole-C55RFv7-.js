var z=Object.defineProperty;var Y=(e,o,l)=>o in e?z(e,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[o]=l;var n=(e,o,l)=>Y(e,typeof o!="symbol"?o+"":o,l);import{d as W,c as C,y as w,z as p,A as d,B as s,m as H,E as g,G as m,D as O,I as r,S as J}from"./vue.esm-bundler-DC82FEWN.js";import{F as K}from"./FSAutocompleteField-BLtdU6sI.js";import{F as N}from"./FSButton-C3_cXTyP.js";import{F as Q}from"./FSChip-B7kBtaBB.js";import{_ as b}from"./FSIcon-AG2DcsLT.js";import{_ as S}from"./FSSpan-Bs4x_ELf.js";import{_ as F}from"./FSRow-Dx6kiy_m.js";import{P as V}from"./permissionInfos-BPDgTHQl.js";import{C as A}from"./base-CMiH1YbJ.js";import{S as $}from"./serviceFactory-Bd5jifNi.js";import{C as L}from"./composableFactory-J8cSLWf9.js";import{u as X}from"./useAutocomplete-DfYPH4wo.js";import{C as T}from"./useColors-MENgOxRI.js";import{u as Z}from"./useTranslations-DV-taHAL.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";var i=(e=>(e[e.None=0]="None",e[e.Organisation=1]="Organisation",e[e.OrganisationType=2]="OrganisationType",e))(i||{});class q{constructor(o){n(this,"id");n(this,"roleId");n(this,"organisationId");n(this,"icon");n(this,"code");n(this,"label");n(this,"scope");n(this,"userType");n(this,"tags");n(this,"permissions");this.id=o.id,this.roleId=o.roleId,this.organisationId=o.organisationId,this.icon=o.icon,this.code=o.code,this.label=o.label,this.scope=o.scope,this.userType=o.userType,this.tags=o.tags.slice(),this.permissions=o.permissions.map(l=>new V(l))}}class ee extends q{constructor(l){super(l);n(this,"description");this.description=l.description}}class v{constructor(o){n(this,"id");n(this,"roleId");n(this,"organisationTypeId");n(this,"organisationTypeLabel");n(this,"icon");n(this,"code");n(this,"label");n(this,"scope");n(this,"userType");n(this,"tags");n(this,"permissions");this.id=o.id,this.roleId=o.roleId,this.organisationTypeId=o.organisationTypeId,this.organisationTypeLabel=o.organisationTypeLabel,this.scope=o.scope,this.userType=o.userType,this.icon=o.icon,this.code=o.code,this.label=o.label,this.scope=o.scope,this.userType=o.userType,this.tags=o.tags.slice(),this.permissions=o.permissions.map(l=>new V(l))}}class oe extends v{constructor(l){super(l);n(this,"description");this.description=l.description}}const U=()=>`${A()}/role-organisations`,te=e=>`${U()}/${encodeURIComponent(e)}`,E=()=>`${A()}/role-organisation-types`,ne=e=>`${E()}/${encodeURIComponent(e)}`,ae=new $("roleOrganisation",ee).createComplete(U,te,q),le=L.getMany(ae),ie=new $("roleOrganisationType",oe).create(e=>e.build(e.addGet(ne),e.addGetMany(E,v),e.addNotify())),se=L.getMany(ie),{$tr:h}=Z(),re=e=>{switch(e){case i.None:return h("ui.role-type.none","None");case i.Organisation:return h("ui.role-type.organisation","Custom");case i.OrganisationType:return h("ui.role-type.organisation-type","Shared")}},ce=e=>{switch(e){case i.None:return T.Error;case i.Organisation:return T.Primary;case i.OrganisationType:return T.Warning}},k=W({name:"FSAutocompleteRole",components:{FSAutocompleteField:K,FSButton:N,FSChip:Q,FSIcon:b,FSSpan:S,FSRow:F},props:{roleOrganisationTypeFilters:{type:Object,required:!1,default:null},roleOrganisationFilters:{type:Object,required:!1,default:null},modelValue:{type:[Array,String],required:!1,default:null},type:{type:Number,required:!1,default:i.None},multiple:{type:Boolean,required:!1,default:!1},toggleSetDisabled:{type:Boolean,required:!1,default:!1}},emits:["update:modelValue","update:type"],setup(e,{emit:o}){const{getMany:l,fetching:R,entities:I}=se(),{getMany:_,fetching:c,entities:y}=le(),t=C(()=>I.value.map(a=>({id:a.id,icon:a.icon,label:a.label,type:i.OrganisationType})).concat(y.value.map(a=>({id:a.id,icon:a.icon,label:a.label,type:i.Organisation})))),u=C(()=>B.value&&(R.value||c.value)),D=a=>{Array.isArray(a)?(o("update:modelValue",a.map(f=>f.id)),o("update:type",a.map(f=>f.type))):(o("update:modelValue",a==null?void 0:a.id),o("update:type",a==null?void 0:a.type))},G=a=>Promise.all([l({...e.roleOrganisationTypeFilters,search:a??void 0}),_({...e.roleOrganisationFilters,search:a??void 0})]),{toggleSet:M,search:P,init:B,onUpdate:j}=X(t,[()=>e.roleOrganisationTypeFilters,()=>e.roleOrganisationFilters],o,G,D);return{toggleSet:M,RoleType:i,loading:u,search:P,roles:t,roleTypeColor:ce,roleTypeLabel:re,onUpdate:j}}});function ue(e,o,l,R,I,_){const c=w("FSChip"),y=w("FSAutocompleteField");return p(),d(y,H({toggleSet:!e.$props.toggleSetDisabled&&e.toggleSet,multiple:e.$props.multiple,loading:e.loading,items:e.roles,modelValue:e.$props.modelValue,"onUpdate:modelValue":e.onUpdate},e.$attrs),{"autocomplete-selection":s(({item:t})=>[e.$props.modelValue?(p(),d(F,{key:0,align:"center-center",wrap:!1},{default:s(()=>[t.raw.icon?(p(),d(b,{key:0},{default:s(()=>[g(m(t.raw.icon),1)]),_:2},1024)):O("",!0),r(S,null,{default:s(()=>[g(m(t.raw.label),1)]),_:2},1024),r(c,{color:e.roleTypeColor(t.raw.type),label:e.roleTypeLabel(t.raw.type),editable:!1},null,8,["color","label"])]),_:2},1024)):O("",!0)]),"item-label":s(({item:t,font:u})=>[r(F,{align:"center-left",wrap:!1},{default:s(()=>[t.raw.icon?(p(),d(b,{key:0},{default:s(()=>[g(m(t.raw.icon),1)]),_:2},1024)):O("",!0),r(S,{font:u},{default:s(()=>[g(m(t.raw.label),1)]),_:2},1032,["font"]),r(c,{color:e.roleTypeColor(t.raw.type),label:e.roleTypeLabel(t.raw.type),editable:!1},null,8,["color","label"])]),_:2},1024)]),"toggle-set-item":s(t=>[r(N,{prependIcon:t.item.icon,variant:t.getVariant(t.item),color:t.getColor(t.item),class:J(t.getClass(t.item)),label:t.item.label,onClick:u=>t.toggle(t.item)},{append:s(()=>[r(c,{color:e.roleTypeColor(t.item.type),label:e.roleTypeLabel(t.item.type),editable:!1},null,8,["color","label"])]),_:2},1032,["prependIcon","variant","color","class","label","onClick"])]),_:1},16,["toggleSet","multiple","loading","items","modelValue","onUpdate:modelValue"])}const we=x(k,[["render",ue]]);k.__docgenInfo={displayName:"FSAutocompleteRole",exportName:"default",description:"",tags:{},props:[{name:"roleOrganisationTypeFilters",type:{name:"RoleOrganisationTypeFilters"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"roleOrganisationFilters",type:{name:"RoleOrganisationFilters"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"modelValue",type:{name:"string[] | string | null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"type",type:{name:"RoleType"},required:!1,defaultValue:{func:!1,value:"RoleType.None"}},{name:"multiple",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"toggleSetDisabled",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}}],events:[{name:"update:modelValue"},{name:"update:type"}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/core/foundation-core-components/components/autocompletes/FSAutocompleteRole.vue"]};export{we as F};
