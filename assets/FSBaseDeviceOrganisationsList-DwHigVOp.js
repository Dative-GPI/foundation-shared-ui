var E=Object.defineProperty;var R=(t,o,l)=>o in t?E(t,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[o]=l;var s=(t,o,l)=>R(t,typeof o!="symbol"?o+"":o,l);import{d as z,c as A,o as G,w as x,y as m,z as u,A as p,M as j,N as I,B as a,m as P,I as w,J as D,K as _,L as c,E as $,D as h,C as b}from"./vue.esm-bundler-BSyvBTC9.js";import{_ as J}from"./lodash-BiW_TGGX.js";import{F as K}from"./FSDataTable-polZZLaD.js";import{F as H}from"./FSMetaValue-CXj4573D.js";import{F as Q}from"./FSImage-B4BG5Dfm.js";import{F as X}from"./FSTagGroup-CHBbAJXY.js";import{F as Y}from"./FSIconCheck-CSAIFnAh.js";import{a as Z,F as ee,b as te,C as n,c as d}from"./FSDeviceOrganisationTileUI-DQNEwNtw.js";import{F as oe}from"./FSStatusesCarousel-Yl2Hyymq.js";import{C as ie}from"./base-1FyQZYnT.js";import{S as re}from"./serviceFactory-Bd5jifNi.js";import{C as se}from"./composableFactory-wHNy9kQa.js";import{u as ne}from"./useDeviceOrganisations-CvIgpWuO.js";import{a as q}from"./customProperties-DqkON8hk.js";import{a as O}from"./FSDataTableUI-DxSRpIwT.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{F as M}from"./FSCol-DZA6pxA1.js";import{F as k}from"./FSIcon-rAhoF0bo.js";import"./_commonjsHelpers-BosuxZz1.js";import"./FSLoader-DuEJL8Ft.js";import"./css-DLfrm0pR.js";import"./useColors-Ccf8xVyg.js";import"./index-3zl-tJp_.js";import"./theme-D4rXHj3O.js";import"./color-BygXFKwQ.js";import"./dimensions-DyYT4L19.js";import"./elevation-Ben4zuE4.js";import"./locale-C-s_GJlL.js";import"./FSRow-CA1vgNXx.js";import"./VSpacer-C4plVoTE.js";import"./FSFadeOut-Chaq66Nt.js";import"./uuid-DTaye2KM.js";import"./useAppTimeZone-D_npl1cn.js";import"./FSText-BN3VvfV9.js";import"./useSlots-P12pG1X5.js";import"./useDateFormat-CNSspUCn.js";import"./datesTools-BRWlXl6j.js";import"./useTranslations-CdSqQFV3.js";import"./useAppLanguageCode-CwkNj4O3.js";import"./FSImageUI-BJK7Y-HI.js";import"./VImg-DW7Ik4XH.js";import"./rounded-Dg8mz8II.js";import"./transition-CNA6wh-m.js";import"./index-D_lBla-s.js";import"./useImages-BaeRdzQ-.js";import"./base-CmdGny12.js";import"./FSWrapGroup-BrSPku3K.js";import"./FSSlideGroup-D8p4gDD2.js";import"./FSButton-DrXuY6Y3.js";import"./FSClickable-BfYZKNeL.js";import"./FSCard-CiUY3jF9.js";import"./VProgressCircular-Dh9H7lZx.js";import"./tag-DB5D_XjQ.js";import"./FSSpan-CCGpb4KF.js";import"./index-CHbvZ5Sj.js";import"./display-BMkR1-zV.js";import"./group-CBCTR8u6.js";import"./proxiedModel-Bq4wip6p.js";import"./VIcon-BIpY_noq.js";import"./FSTag-C2eH4Bqh.js";import"./VBtn-CC1p3R0h.js";import"./border-njGtMOdT.js";import"./density-CDPzHPmZ.js";import"./loader-pPiux2KM.js";import"./anchor-D9N-895C.js";import"./router-D2IrSaAD.js";import"./index-DPxysH4G.js";import"./VDefaultsProvider-YWdCRIjF.js";import"./FSChip-CtfQSu86.js";import"./FSStatus-quy50hn6.js";import"./FSColor-C7pBGL-O.js";import"./VMenu-BVgNprPc.js";import"./VOverlay-CLFcrAVK.js";import"./forwardRefs-DWGaNmQL.js";import"./lazy-CAOrKziU.js";import"./alerts-pw2xvgtT.js";import"./FSDivider-CW2X6WDB.js";import"./FSTile-D-5PKG1-.js";import"./FSCheckbox-4wBZQYNd.js";import"./useRules-B3HKjmia.js";import"./VSelectionControl-BRDFiqFl.js";import"./VLabel-owjBjdIA.js";import"./VInput-DO9fMQeR.js";import"./form-B61Sg6X-.js";import"./FSWindow-BMzav7Sc.js";import"./ssrBoot-SGvAq9J5.js";import"./useAppOrganisationId-BfPsGMlN.js";import"./hubFactory-CTsGCpS5.js";import"./pathCrumb-Db-cq5HI.js";import"./vue-router-BhvpcqFa.js";import"./FSSearchField-DPg5OwBc.js";import"./FSTextField-BEw-xMN9.js";import"./FSBaseField-gW2RxCAK.js";import"./VField-DndYz9t7.js";import"./FSSelectField-DezFuhph.js";import"./FSDialogMenu-EkZski4P.js";import"./VDialog-BkP6MFQ7.js";import"./FSToggleSet-HZXJOFK9.js";import"./FSRadio-9XeVwuGU.js";import"./VList-BSxk2mkg.js";import"./VSelect-DUosO76x.js";import"./FSOptionGroup-ClEEG5FU.js";import"./filter-CTnmeGG4.js";import"./filter-DuGNEgHB.js";class le{constructor(o){s(this,"priority");s(this,"filterType");s(this,"filterValues");s(this,"color");this.priority=o.priority,this.filterType=o.filterType,this.filterValues=o.filterValues.slice(),this.color=o.color}}class L{constructor(o){s(this,"id");s(this,"code");s(this,"label");s(this,"categoryLabel");s(this,"index");s(this,"entity");s(this,"dataType");s(this,"addInInfos");s(this,"readOnlyCore");s(this,"readOnlyAdmin");s(this,"defaultValue");s(this,"history");s(this,"historySize");s(this,"colorful");s(this,"colorMap");s(this,"useOnlyAllowedValues");s(this,"allowedValues");this.id=o.id,this.code=o.code,this.label=o.label,this.categoryLabel=o.categoryLabel,this.index=o.index,this.entity=o.entity,this.dataType=o.dataType,this.addInInfos=o.addInInfos,this.readOnlyCore=o.readOnlyCore,this.readOnlyAdmin=o.readOnlyAdmin,this.defaultValue=o.defaultValue,this.history=o.history,this.historySize=o.historySize,this.colorful=o.colorful,this.colorMap=o.colorMap.map(l=>new le(l)),this.useOnlyAllowedValues=o.useOnlyAllowedValues,this.allowedValues={...o.allowedValues}}}class me extends L{constructor(o){super(o)}}const ce=()=>`${ie()}/custom-properties`,ue=new re("customProperty",me).create(t=>t.build(t.addGetMany(ce,L),t.addNotify())),de=se.getMany(ue),N=z({name:"FSBaseDeviceOrganisationsList",components:{FSConnectivity:Z,FSDataTable:K,FSDeviceOrganisationTileUI:ee,FSIconCheck:Y,FSImage:Q,FSMetaValue:H,FSStatusesCarousel:oe,FSTagGroup:X,FSWorstAlert:te},props:{modelValue:{type:Array,default:()=>[],required:!1},deviceOrganisationFilters:{type:Object,required:!1,default:null},connectedOnly:{type:Boolean,required:!1,default:!1},itemTo:{type:Function,required:!1},alertTo:{type:Function,required:!1,default:null},singleSelect:{type:Boolean,required:!1,default:!1},tableCode:{type:String,required:!0}},emits:["update:modelValue"],setup(t){const{fetching:o,entities:l,getMany:V}=de(),{entities:g,fetching:T,getMany:S}=ne(),y=A(()=>t.connectedOnly?g.value.filter(i=>i.connectivity!=null&&i.connectivity.status!=n.None):g.value),F=A(()=>({connectable:{fixedFilters:[{value:n.None,text:"—"},{value:n.Offline,text:d(n.Offline)},{value:n.AlmostOffline,text:d(n.AlmostOffline)},{value:n.PartiallyConnected,text:d(n.PartiallyConnected)},{value:n.Connected,text:d(n.Connected)}],methodFilter:(i,r)=>!r.status&&!i||r.status==i,sort:(i,r)=>O(i==null?void 0:i.status,r==null?void 0:r.status)},connectivity:{fixedFilters:[{value:n.None,text:"—"},{value:n.Offline,text:d(n.Offline)},{value:n.AlmostOffline,text:d(n.AlmostOffline)},{value:n.PartiallyConnected,text:d(n.PartiallyConnected)},{value:n.Connected,text:d(n.Connected)}],methodFilter:(i,r)=>!r.status&&!i||r.status==i,sort:(i,r)=>O(i==null?void 0:i.status,r==null?void 0:r.status)},worstAlert:{sort:(i,r)=>O(i==null?void 0:i.criticity,r==null?void 0:r.criticity)}})),C=i=>t.modelValue.includes(i);return G(()=>{V({entities:[q.Device,q.DeviceOrganisation]})}),x(()=>t.deviceOrganisationFilters,(i,r)=>{(!i&&!r||!J.isEqual(i,r))&&S(t.deviceOrganisationFilters)},{immediate:!0}),{fetchingDeviceOrganisations:T,fecthingCustomProperties:o,deviceOrganisations:y,ConnectivityStatus:n,customProperties:l,headersOptions:F,isSelected:C}}}),pe={key:1},fe={key:1};function ye(t,o,l,V,g,T){const S=m("FSImage"),y=m("FSConnectivity"),F=m("FSIconCheck"),C=m("FSTagGroup"),i=m("FSWorstAlert"),r=m("FSStatusesCarousel"),B=m("FSMetaValue"),U=m("FSDeviceOrganisationTileUI"),W=m("FSDataTable");return u(),p(W,P({loading:t.fetchingDeviceOrganisations,headersOptions:t.headersOptions,tableCode:t.$props.tableCode,items:t.deviceOrganisations,itemTo:t.$props.itemTo,modelValue:t.$props.modelValue,"onUpdate:modelValue":o[0]||(o[0]=e=>t.$emit("update:modelValue",e))},t.$attrs),j({"header.connectable-title":a(()=>[c(k,null,{default:a(()=>[$(" mdi-wifi ")]),_:1})]),"header.connectivity-title":a(()=>[c(k,null,{default:a(()=>[$(" mdi-wifi ")]),_:1})]),"item.imageId":a(({item:e})=>[e.imageId?(u(),p(S,{key:0,height:"32px",width:"32px",imageId:e.imageId},null,8,["imageId"])):h("",!0)]),"item.connectable":a(({item:e})=>[c(M,null,{default:a(()=>[e.connectivity.status!=t.ConnectivityStatus.None?(u(),p(y,{key:0,deviceConnectivity:e.connectivity},null,8,["deviceConnectivity"])):h("",!0)]),_:2},1024)]),"item.connectivity":a(({item:e})=>[c(M,null,{default:a(()=>[e.connectivity.status!=t.ConnectivityStatus.None?(u(),p(y,{key:0,deviceConnectivity:e.connectivity},null,8,["deviceConnectivity"])):h("",!0)]),_:2},1024)]),"item.unrestricted":a(({item:e})=>[c(F,{value:e.unrestricted},null,8,["value"])]),"item.tags":a(({item:e})=>[c(C,{variant:"slide",editable:!1,tags:e.tags},null,8,["tags"])]),"item.worstAlert":a(({item:e})=>[e.worstAlert?(u(),p(i,{key:0,deviceWorstAlert:e.worstAlert,deviceAlerts:e.alerts,alertTo:t.$props.alertTo},null,8,["deviceWorstAlert","deviceAlerts","alertTo"])):(u(),b("div",pe))]),"item.alerts":a(({item:e})=>[e.worstAlert?(u(),p(i,{key:0,deviceWorstAlert:e.worstAlert,deviceAlerts:e.alerts,alertTo:t.$props.alertTo},null,8,["deviceWorstAlert","deviceAlerts","alertTo"])):(u(),b("div",fe))]),"item.status":a(({item:e})=>[c(r,{modelStatuses:e.modelStatuses,deviceStatuses:e.status.statuses},null,8,["modelStatuses","deviceStatuses"])]),"item.actions":a(({item:e})=>[w(t.$slots,"actions",D(_({item:e})))]),"item.tile":a(({item:e,toggleSelect:f})=>[c(U,P(e,{modelValue:t.isSelected(e.id),singleSelect:t.singleSelect,deviceStatuses:e.status.statuses,deviceConnectivity:e.connectivity,deviceWorstAlert:e.worstAlert,deviceAlerts:e.alerts,to:t.$props.itemTo&&t.$props.itemTo(e),alertTo:t.$props.alertTo,"onUpdate:modelValue":v=>f(e)}),null,16,["modelValue","singleSelect","deviceStatuses","deviceConnectivity","deviceWorstAlert","deviceAlerts","to","alertTo","onUpdate:modelValue"])]),_:2},[I(t.$slots,(e,f)=>({name:f,fn:a(v=>[w(t.$slots,f,D(_(v)))])})),I(t.customProperties,(e,f)=>({name:`item.meta.${e.code}`,fn:a(({item:v})=>[c(B,{customProperty:e,meta:v.meta},null,8,["customProperty","meta"])])}))]),1040,["loading","headersOptions","tableCode","items","itemTo","modelValue"])}const fo=ae(N,[["render",ye]]);N.__docgenInfo={displayName:"FSBaseDeviceOrganisationsList",exportName:"default",description:"",tags:{},props:[{name:"modelValue",type:{name:"string[]"},required:!1,defaultValue:{func:!0,value:"() => []"}},{name:"deviceOrganisationFilters",type:{name:"DeviceOrganisationFilters"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"connectedOnly",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"itemTo",type:{name:"(item: DeviceOrganisationInfos) => Partial<RouteLocation>"},required:!1},{name:"alertTo",type:{name:"func"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"singleSelect",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"tableCode",type:{name:"string"},required:!0}],events:[{name:"update:modelValue"}],slots:[{name:"name",scoped:!0,bindings:[{name:"name",title:"binding"}]},{name:"actions",scoped:!0,bindings:[{name:"item",title:"binding"}]}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/core/foundation-core-components/components/lists/deviceOrganisations/FSBaseDeviceOrganisationsList.vue"]};export{fo as default};
