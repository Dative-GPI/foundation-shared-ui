var h=Object.defineProperty;var p=(e,s,i)=>s in e?h(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i;var t=(e,s,i)=>p(e,typeof s!="symbol"?s+"":s,i);import{U as g}from"./vue.esm-bundler-l-siv0w9.js";import{P as b}from"./pathCrumb-Db-cq5HI.js";import{C as v}from"./base-BWToAT4M.js";import{S as u}from"./serviceFactory-DAEdCiSt.js";import{C as n}from"./composableFactory-DG8ITK-n.js";class I{constructor(s){t(this,"id");t(this,"organisationId");t(this,"parentId");t(this,"imageId");t(this,"icon");t(this,"code");t(this,"label");t(this,"tags");t(this,"path");t(this,"groupsIds");t(this,"deviceOrganisationsIds");t(this,"modelsIds");t(this,"recursiveGroupsIds");t(this,"recursiveDeviceOrganisationsIds");t(this,"recursiveModelsIds");this.id=s.id,this.organisationId=s.organisationId,this.parentId=s.parentId,this.imageId=s.imageId,this.icon=s.icon,this.code=s.code,this.label=s.label,this.tags=s.tags,this.path=s.path.map(i=>new b({...i})).sort((i,r)=>r.index-i.index),this.groupsIds=s.groupsIds.slice(),this.deviceOrganisationsIds=s.deviceOrganisationsIds.slice(),this.modelsIds=s.modelsIds.slice(),this.recursiveGroupsIds=s.recursiveGroupsIds.slice(),this.recursiveDeviceOrganisationsIds=s.recursiveDeviceOrganisationsIds.slice(),this.recursiveModelsIds=s.recursiveModelsIds.slice()}}class a extends I{constructor(i){super(i);t(this,"parentIcon");t(this,"parentLabel");this.parentIcon=i.parentIcon,this.parentLabel=i.parentLabel}}const c=()=>`${v()}/groups`,d=e=>`${c()}/${encodeURIComponent(e)}`,o=new u("group",a).create(e=>e.build(e.addGet(d),e.addGetMany(c,I),e.addCreate(c),e.addUpdate(d),e.addRemove(d),e.addNotify(s=>({...u.addCustom("changeParent",(i,r,l)=>i.put(d(r),l),i=>{const r=new a(i);return s.notify("update",r),r})})))),M=()=>{let e=[];return g(()=>{e.forEach(i=>o.unsubscribe(i)),e=[]}),{subscribeToMany:i=>{e.push(o.subscribe("all",i))}}},L=n.get(o),P=n.getMany(o);n.create(o);n.update(o);n.remove(o);n.custom(o.changeParent);export{L as a,M as s,P as u};
