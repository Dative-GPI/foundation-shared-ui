var k=Object.defineProperty;var N=(a,e,n)=>e in a?k(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n;var l=(a,e,n)=>N(a,typeof e!="symbol"?e+"":e,n);import{b as v,d as w,c as C,y as T,z as p,A as y,B as b,O as _,L as r,V as x,w as S,C as V,M as E,N as A,m as q,E as z,G as K,F as G,I as j,J,K as M}from"./vue.esm-bundler-BSyvBTC9.js";import{F as H,V as Q}from"./FSLoader-hEATKEG-.js";import{F as P}from"./FSCol-BU2q2sTe.js";import{F as f}from"./FSRow-DzlUM3r6.js";import{u as W,C as X}from"./useColors-Ccf8xVyg.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as Y}from"./VSpacer-C4plVoTE.js";import{F as Z}from"./FSDataTableUI-DBp9zqfN.js";import{C as ee}from"./base-1FyQZYnT.js";import{S as ae}from"./serviceFactory-Bd5jifNi.js";import{C as B}from"./composableFactory-wHNy9kQa.js";import{u as te}from"./FSFadeOut-BJ1ngUIg.js";class oe{constructor(){l(this,"called",!1);l(this,"result",null)}call(e){return this.called?this.result:(this.called=!0,this.result=e(),this.result)}}const g=v({}),se=new oe,ne=()=>se.call(()=>({getTable:n=>g.value[n]!=null?g.value[n]:null,setTable:(n,d)=>{g.value[n]={...d}}}));class le{constructor(e){l(this,"columnId");l(this,"text");l(this,"value");l(this,"sortable");l(this,"filterable");l(this,"index");l(this,"hidden");this.columnId=e.columnId,this.text=e.text,this.value=e.value,this.sortable=e.sortable,this.filterable=e.filterable,this.index=e.index,this.hidden=e.hidden}}class re{constructor(e){l(this,"id");l(this,"code");l(this,"columns");l(this,"mode");l(this,"rowsPerPage");l(this,"sortByKey");l(this,"sortByOrder");var n;this.id=e.id,this.code=e.code,this.mode=e.mode,this.rowsPerPage=e.rowsPerPage,this.sortByKey=e.sortByKey,this.sortByOrder=e.sortByOrder,this.columns=((n=e.columns)==null?void 0:n.map(d=>new le(d)))??[]}}class ue extends re{constructor(e){super(e)}}const ie=()=>`${ee()}/user-organisation-tables`,U=a=>`${ie()}/${encodeURIComponent(a)}`,de=()=>{const a=v(!1),e=v({headers:[],mode:"iterator",sortBy:null,rowsPerPage:10,filters:{},page:1});return{initialized:a,table:e,onTableCodeChange:async(o,t,i)=>{if(i){const s=t(i);if(s)e.value=s;else try{const u=await o(i);u.value&&(e.value={headers:u.value.columns,sortBy:{key:u.value.sortByKey,order:u.value.sortByOrder},mode:u.value.mode,rowsPerPage:u.value.rowsPerPage,filters:{},page:1})}catch{}}a.value=!0},computeTable:o=>({...e.value,headers:e.value.headers.map(t=>({...t,fixedFilters:t.value&&o[t.value]&&o[t.value].fixedFilters||null,methodFilter:t.value&&o[t.value]&&o[t.value].methodFilter||null,methodFilterRaw:t.value&&o[t.value]&&o[t.value].methodFilterRaw||null,sort:t.value&&o[t.value]&&o[t.value].sort||null,sortRaw:t.value&&o[t.value]&&o[t.value].sortRaw||null,innerValue:t.value&&o[t.value]&&o[t.value].innerValue||null}))}),updateTable:(o,t,i)=>{var s,u;e.value&&(t(i,e.value),o(i,{columns:e.value.headers.map(m=>({columnId:m.columnId,hidden:m.hidden,index:m.index})),rowsPerPage:e.value.rowsPerPage,sortByKey:((s=e.value.sortBy)==null?void 0:s.key)??null,sortByOrder:((u=e.value.sortBy)==null?void 0:u.order)??null,mode:e.value.mode}))}}},D=new ae("userOrgansiationTable",ue).create(a=>a.build(a.addGet(U),a.addUpdate(U),a.addNotify())),me=B.get(D),ce=B.update(D),I=w({name:"FSLoadDataTable",components:{FSLoader:H,FSCol:P,FSRow:f},setup(){const{getColors:a}=W(),e=a(X.Background);return{style:C(()=>({"--fs-load-data-table-background-color":e.base}))}}});function be(a,e,n,d,c,o){const t=T("FSLoader");return p(),y(P,{class:"fs-load-data-table",gap:"16px",style:_(a.style)},{default:b(()=>[r(f,{align:"bottom-center"},{default:b(()=>[r(t,{variant:"input"}),r(t,{variant:"button"}),r(Y),r(t,{variant:"button"}),r(t,{variant:"button"})]),_:1}),r(f,null,{default:b(()=>[r(t,{variant:"chip"}),r(t,{variant:"chip"}),r(t,{variant:"chip"})]),_:1}),r(Q,{type:"table-row-divider@10"}),r(f,{align:"center-right"},{default:b(()=>[r(t,{height:"16px",width:"100px"}),r(t,{width:"120px",height:["40px","36px"]}),r(t,{variant:"button"}),r(t,{variant:"button"}),r(t,{variant:"button"})]),_:1})]),_:1},8,["style"])}const pe=h(I,[["render",be]]);I.__docgenInfo={displayName:"FSLoadDataTable",exportName:"default",description:"",tags:{},sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/shared/foundation-shared-components/components/lists/FSLoadDataTable.vue"]};const L=w({name:"FSDataTable",components:{FSLoadDataTable:pe,FSDataTableUI:Z},props:{tableCode:{type:String,required:!0},debounceTime:{type:Number,required:!1,default:1e3},headersOptions:{type:Object,required:!1,default:()=>({})}},setup(a){const{get:e,getting:n}=me(),{initialized:d,table:c,updateTable:o,computeTable:t,onTableCodeChange:i}=de(),{update:s}=ce(),{getTable:u,setTable:m}=ne(),{debounce:$,cancel:O}=te(),R=C(()=>t(a.headersOptions));x(()=>{O(),F()});const F=()=>{o(s,m,a.tableCode)};return S(()=>a.tableCode,async()=>{i(e,u,a.tableCode)},{immediate:!0}),S(()=>c.value,()=>{c.value&&d.value&&$(F,a.debounceTime)},{deep:!0}),{gettingUserOrganisationTable:n,computedTable:R,initialized:d,table:c}}});function fe(a,e,n,d,c,o){const t=T("FSLoadDataTable"),i=T("FSDataTableUI");return p(),V(G,null,[!a.initialized||a.gettingUserOrganisationTable?(p(),y(t,{key:0})):(p(),y(i,q({key:1,"onUpdate:rowsPerPage":e[0]||(e[0]=s=>a.table.rowsPerPage=s),"onUpdate:filters":e[1]||(e[1]=s=>a.table.filters=s),"onUpdate:headers":e[2]||(e[2]=s=>a.table.headers=s),"onUpdate:sortBy":e[3]||(e[3]=s=>a.table.sortBy=s),"onUpdate:mode":e[4]||(e[4]=s=>a.table.mode=s),"onUpdate:page":e[5]||(e[5]=s=>a.table.page=s)},{...a.computedTable,...a.$attrs}),E({_:2},[A(a.$slots,(s,u)=>({name:u,fn:b(m=>[j(a.$slots,u,J(M(m)))])}))]),1040)),z(" "+K(a.$attrs),1)],64)}const Ie=h(L,[["render",fe]]);L.__docgenInfo={displayName:"FSDataTable",exportName:"default",description:"",tags:{},props:[{name:"tableCode",type:{name:"string"},required:!0},{name:"debounceTime",type:{name:"number"},required:!1,defaultValue:{func:!1,value:"1000"}},{name:"headersOptions",type:{name:"{ [key: string]: Partial<FSDataTableColumn> }"},required:!1,defaultValue:{func:!0,value:"() => ({})"}}],slots:[{name:"name",scoped:!0,bindings:[{name:"name",title:"binding"}]}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/core/foundation-core-components/components/lists/FSDataTable.vue"]};export{Ie as F};
