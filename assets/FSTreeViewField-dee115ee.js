import{P as n,j as R,g as b,J as D,x as P,e as ye,$ as he,a0 as $e,s as we,O as Ie,A as I,w as Ce,p as ke,f as Se,D as Y,E as k,F,G as p,I as B,H as Te,U as E,V as N,Q as A,R as j,S as K,X as z,K as W,L as J}from"./vue.esm-bundler-a0893183.js";import{F as qe}from"./FSDialogMenu-2fb2114e.js";import{_}from"./FSTextField-3d775cb5.js";import{V as Fe,F as x}from"./FSCheckbox-358f34d9.js";import{F as fe}from"./FSFadeOut-a78e38e1.js";import{F as Pe}from"./FSLoader-5eac453d.js";import{_ as ee}from"./FSRadio-46cacfaf.js";import{_ as U}from"./FSSpan-4daadeb4.js";import{_ as le}from"./FSCol-e45ac157.js";import{m as Ae,c as ie,d as Le,e as Oe,V as ne,f as Be,g as Re,h as Ue,i as De,a as se}from"./VList-f2210020.js";import{V as Ge}from"./VDefaultsProvider-c4e19f1a.js";import{p as G,y as ce,k as Me}from"./theme-41eca2c8.js";import{m as He,g as M,u as X,p as Ee}from"./useRender-13ac3742.js";import{u as Ne}from"./density-fc3376dc.js";import{m as je,I as Ke}from"./tag-c957791e.js";import{u as ze}from"./router-abc66a83.js";import{g as We}from"./border-ca0badc6.js";import{V as re}from"./VBtn-f8320e3a.js";import{V as ue}from"./VProgressCircular-94f3850c.js";import{m as Je,u as Qe}from"./filter-9e36c4cc.js";import{u as Z}from"./proxiedModel-59232916.js";import{u as Xe}from"./useRules-8ba0ecf4.js";import{u as Ye}from"./css-03aed76d.js";import{u as Ze,C as _e}from"./useColors-6c375bb5.js";import{u as xe}from"./useSlots-d5b57407.js";import{_ as el}from"./_plugin-vue_export-helper-c27b6911.js";import{V as ll}from"./VMenu-02096e7e.js";const al=G({start:Boolean,end:Boolean,...He(),...je()},"VListItemAction"),oe=M()({name:"VListItemAction",props:al(),setup(e,u){let{slots:V}=u;return X(()=>n(e.tag,{class:["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class],style:e.style},V)),{}}}),tl=G({...ce(Ae({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),de=M()({name:"VTreeviewGroup",props:tl(),setup(e,u){let{slots:V}=u;const t=R(),h=b(()=>{var d;return(d=t.value)!=null&&d.isOpen?e.collapseIcon:e.expandIcon}),w=b(()=>{var d;return{VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,active:(d=t.value)==null?void 0:d.isOpen,toggleIcon:h.value}}});return X(()=>{const d=ie.filterProps(e);return n(ie,P(d,{ref:t,class:["v-treeview-group",e.class],subgroup:!0}),{...V,activator:V.activator?m=>n(D,null,[n(Ge,{defaults:w.value},{default:()=>{var v;return[(v=V.activator)==null?void 0:v.call(V,m)]}})]):void 0})}),{}}});const pe=Symbol.for("vuetify:v-treeview"),il=G({loading:Boolean,toggleIcon:Ke,...Le({slim:!0})},"VTreeviewItem"),me=M()({name:"VTreeviewItem",props:il(),setup(e,u){let{attrs:V,slots:t,emit:h}=u;const w=ze(e,V),d=b(()=>e.value===void 0?w.href.value:e.value),m=R(),{activate:v,isActivated:a,select:s,isSelected:i,isIndeterminate:y,isGroupActivator:C,root:S,id:T}=Oe(d,!1),q=b(()=>S.activatable.value&&C),{densityClasses:L}=Ne(e,"v-list-item"),g=b(()=>({isActive:a.value,select:s,isSelected:i.value,isIndeterminate:y.value})),o=b(()=>{var f;return!e.disabled&&e.link!==!1&&(e.link||w.isClickable.value||e.value!=null&&!!((f=m.value)!=null&&f.list))});function c(f){var $,H;!o.value||!q.value&&C||S.activatable.value&&(q.value?v(!a.value,f):(H=m.value)==null||H.activate(!(($=m.value)!=null&&$.isActivated),f))}function l(f){(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),c(f))}const r=ye(pe,{visibleIds:R()}).visibleIds;return X(()=>{var ae;const f=t.title||e.title!=null,$=t.subtitle||e.subtitle!=null,H=ne.filterProps(e),be=t.prepend||e.toggleIcon;return q.value?he(n("div",{class:["v-list-item","v-list-item--one-line","v-treeview-item","v-treeview-item--activetable-group-activator",{"v-list-item--active":a.value||i.value,"v-treeview-item--filtered":r.value&&!r.value.has(T.value)},L.value,e.class],onClick:c},[n(D,null,[We(a.value||i.value,"v-list-item"),e.toggleIcon&&n(oe,{start:!1},{default:()=>[n(re,{density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text",onClick:e.onClick},{loader(){return n(ue,{indeterminate:"disable-shrink",size:"20",width:"2"},null)}})]})]),n("div",{class:"v-list-item__content","data-no-activator":""},[f&&n(Be,{key:"title"},{default:()=>{var O;return[((O=t.title)==null?void 0:O.call(t,{title:e.title}))??e.title]}}),$&&n(Re,{key:"subtitle"},{default:()=>{var O;return[((O=t.subtitle)==null?void 0:O.call(t,{subtitle:e.subtitle}))??e.subtitle]}}),(ae=t.default)==null?void 0:ae.call(t,g.value)])]),[[$e("ripple"),o.value&&e.ripple]]):n(ne,P({ref:m},H,{class:["v-treeview-item",{"v-treeview-item--filtered":r.value&&!r.value.has(T.value)},e.class],value:T.value,onClick:c,onKeydown:o.value&&l}),{...t,prepend:be?O=>{var te;return n(D,null,[e.toggleIcon&&n(oe,{start:!1},{default:()=>[n(re,{density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text"},{loader(){return n(ue,{indeterminate:"disable-shrink",size:"20",width:"2"},null)}})]}),(te=t.prepend)==null?void 0:te.call(t,O)])}:void 0})}),{}}}),ve=G({loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,selectable:Boolean,selectStrategy:[String,Function,Object]},"VTreeviewChildren"),Q=M()({name:"VTreeviewChildren",props:ve(),setup(e,u){let{emit:V,slots:t}=u;const h=we(null);function w(m){return new Promise(v=>{var a,s;if(!((a=e.items)!=null&&a.length)||!e.loadChildren)return v();if(((s=m==null?void 0:m.children)==null?void 0:s.length)===0){h.value=m.value,e.loadChildren(m).then(v);return}v()}).finally(()=>{h.value=null})}function d(m,v){e.selectable&&m(!v)}return()=>{var m,v;return((m=t.default)==null?void 0:m.call(t))??((v=e.items)==null?void 0:v.map(a=>{var L;let{children:s,props:i,raw:y}=a;const C=h.value===y.value,S={prepend:g=>{var o;return n(D,null,[e.selectable&&(!s||s&&!["leaf","single-leaf"].includes(e.selectStrategy))&&n("div",null,[n(Fe,{key:y.value,modelValue:g.isSelected,loading:C,indeterminate:g.isIndeterminate,onClick:Ie(()=>d(g.select,g.isSelected),["stop"]),onKeydown:c=>{["Enter","Space"].includes(c.key)&&(c.stopPropagation(),d(g.select,g.isSelected))}},null)]),(o=t.prepend)==null?void 0:o.call(t,{...g,item:y})])},append:t.append?g=>{var o;return(o=t.append)==null?void 0:o.call(t,{...g,item:y})}:void 0,title:t.title?g=>{var o;return(o=t.title)==null?void 0:o.call(t,{...g,item:y})}:void 0},T=de.filterProps(i),q=Q.filterProps(e);return s?n(de,P({value:i==null?void 0:i.value},T),{activator:g=>{let{props:o}=g;const c={...i,...o,value:i==null?void 0:i.value};return n(me,P(c,{loading:C,onClick:()=>w(y)}),S)},default:()=>n(Q,P(q,{items:s}),t)}):((L=t.item)==null?void 0:L.call(t,{props:i}))??n(me,i,S)}))}}});function Ve(e){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];for(const V of e)u.push(V),V.children&&Ve(V.children,u);return u}const nl=G({openAll:Boolean,search:String,...Je({filterKeys:["title"]}),...ve(),...ce(Ue({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",selectStrategy:"classic",openStrategy:"multiple",slim:!0}),["nav"])},"VTreeview"),sl=M()({name:"VTreeview",props:nl(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,u){let{slots:V}=u;const t=Me("VTreeview"),{items:h}=De(e),w=I(e,"activeColor"),d=I(e,"baseColor"),m=I(e,"color"),v=Z(e,"opened"),a=Z(e,"activated"),s=Z(e,"selected"),i=R(),y=b(()=>Ve(h.value)),C=I(e,"search"),{filteredItems:S}=Qe(e,y,C),T=b(()=>C.value?new Set(S.value.flatMap(o=>[...q(o.props.value),...L(o.props.value)])):null);function q(o){var r;const c=[];let l=o;for(;l!=null;)c.unshift(l),l=(r=i.value)==null?void 0:r.parents.get(l);return c}function L(o){var r,f;const c=[],l=(((r=i.value)==null?void 0:r.children.get(o))??[]).slice();for(;l.length;){const $=l.shift();$&&(c.push($),l.push(...(((f=i.value)==null?void 0:f.children.get($))??[]).slice()))}return c}Ce(()=>e.openAll,o=>{v.value=o?g(h.value):[]},{immediate:!0});function g(o){let c=[];for(const l of o)l.children&&(c.push(l.value),l.children&&(c=c.concat(g(l.children))));return c}return ke(pe,{visibleIds:T}),Ee({VTreeviewGroup:{activeColor:w,baseColor:d,color:m,collapseIcon:I(e,"collapseIcon"),expandIcon:I(e,"expandIcon")},VTreeviewItem:{activeClass:I(e,"activeClass"),activeColor:w,baseColor:d,color:m,density:I(e,"density"),disabled:I(e,"disabled"),lines:I(e,"lines"),variant:I(e,"variant")}}),X(()=>{const o=se.filterProps(t.vnode.props),c=Q.filterProps(e);return n(se,P({ref:i},o,{class:["v-treeview",e.class],style:e.style,activated:a.value,"onUpdate:activated":l=>a.value=l,selected:s.value,"onUpdate:selected":l=>s.value=l}),{default:()=>[n(Q,P(c,{items:h.value}),V)]})}),{open}}}),ge=Se({name:"FSTreeViewField",components:{VTreeview:sl,FSDialogMenu:qe,FSTextField:_,FSCheckbox:x,FSFadeOut:fe,FSLoader:Pe,FSRadio:ee,FSSpan:U,FSCol:le},props:{label:{type:String,required:!1,default:null},description:{type:String,required:!1,default:null},items:{type:Array,required:!0},itemValue:{type:String,required:!1,default:"id"},itemTitle:{type:String,required:!1,default:"label"},itemParent:{type:String,required:!1,default:"parentId"},exclude:{type:Array,required:!1,default:()=>[]},modelValue:{type:[Array,String,Number],required:!1,default:null},hideHeader:{type:Boolean,required:!1,default:!1},required:{type:Boolean,required:!1,default:!1},multiple:{type:Boolean,required:!1,default:!1},rules:{type:Array,required:!1,default:()=>[]},messages:{type:Array,required:!1,default:null},clearable:{type:Boolean,required:!1,default:!0},editable:{type:Boolean,required:!1,default:!0},loading:{type:Boolean,required:!1,default:!1}},emits:["update:modelValue"],setup(e,{emit:u}){const{validateOn:V,getMessages:t}=Xe(),{isExtraSmall:h}=Ye(),{getColors:w}=Ze(),{slots:d}=xe();delete d.label,delete d.description,delete d["menu-prepend"];const m=w(_e.Background),v=R(!1),a=R(!1),s=b(()=>e.editable?{"--fs-tree-view-field-cursor":"pointer","--fs-tree-view-field-background-color":m.base}:{"--fs-tree-view-field-cursor":"default"}),i=b(()=>e.messages??t(e.modelValue,e.rules)),y=b(()=>"calc(100vh - 40px - 16px)"),C=b(()=>Object.keys(d).filter(l=>!l.startsWith("menu-")).reduce((l,r)=>(l[r]=d[r],l),{})),S=b(()=>Object.keys(d).filter(l=>l.startsWith("menu-")).reduce((l,r)=>(l[r.substring(5)]=d[r],l),{})),T=b(()=>{if(e.multiple&&Array.isArray(e.modelValue))return e.modelValue.map(l=>{const r=e.items.find(f=>f[e.itemValue]===l);if(r)return r[e.itemTitle]}).filter(l=>!!l).join(", ");if(e.modelValue){const l=e.items.find(r=>r[e.itemValue]===e.modelValue);if(l)return l[e.itemTitle]}return null}),q=b(()=>{const l=f=>e.items.filter($=>e.exclude.includes($[e.itemValue])?!1:$[e.itemParent]==f),r=f=>e.items.some($=>$[e.itemParent]===f[e.itemValue])?{...f,children:l(f[e.itemValue]).map(r)}:f;return l(null).map(r)});return{isExtraSmall:h,innerValue:T,fieldSlots:C,validateOn:V,menuSlots:S,treeItems:q,messages:i,dialog:v,height:y,style:s,menu:a,openMobileOverlay:()=>{e.editable&&(v.value=!0)},onCheckboxChange:l=>{Array.isArray(e.modelValue)?e.modelValue.includes(l)?u("update:modelValue",e.modelValue.filter(r=>r!==l)):u("update:modelValue",[...e.modelValue,l]):e.modelValue!=null?e.modelValue===l?u("update:modelValue",[]):u("update:modelValue",[e.modelValue,l]):u("update:modelValue",[l])},onRadioChange:l=>{u("update:modelValue",l),v.value=!1,a.value=!1},listItemClass:l=>{const r=[];return e.multiple&&Array.isArray(e.modelValue)?e.modelValue.includes(l)&&r.push("fs-tree-view-item-selected"):e.modelValue===l&&r.push("fs-tree-view-item-selected"),r}}}});function rl(e,u,V,t,h,w){const d=Y("FSLoader"),m=Y("v-treeview"),v=Y("FSDialogMenu");return e.$props.loading?(k(),F(le,{key:0},{default:p(()=>[e.$props.hideHeader?B("",!0):(k(),F(d,{key:0,variant:"text-overline"})),e.$props.loading?(k(),F(d,{key:1,width:"100%",height:["40px","36px"]})):B("",!0)]),_:1})):(k(),F(le,{key:1},{default:p(()=>[e.isExtraSmall?(k(),Te(D,{key:0},[n(_,P({class:"fs-tree-view-field",validationValue:e.$props.modelValue,description:e.$props.description,hideHeader:e.$props.hideHeader,clearable:e.$props.clearable,editable:e.$props.editable,required:e.$props.required,validateOn:e.validateOn,label:e.$props.label,rules:e.$props.rules,messages:e.messages,readonly:!0,style:e.style,modelValue:e.innerValue,"onUpdate:modelValue":u[0]||(u[0]=a=>e.$emit("update:modelValue",a)),onClick:e.openMobileOverlay},e.$attrs),E({_:2},[N(e.fieldSlots,(a,s)=>({name:s,fn:p(i=>[A(e.$slots,s,j(K(i)))])}))]),1040,["validationValue","description","hideHeader","clearable","editable","required","validateOn","label","rules","messages","style","modelValue","onClick"]),n(v,{modelValue:e.dialog,"onUpdate:modelValue":u[1]||(u[1]=a=>e.dialog=a)},{body:p(()=>[n(fe,{height:e.height},{default:p(()=>[n(m,{itemTitle:e.$props.itemTitle,itemValue:e.$props.itemValue,items:e.treeItems},E({prepend:p(({item:a})=>{var s;return[e.$props.multiple?(k(),F(x,{key:0,class:z(e.listItemClass(a[e.$props.itemValue])),editable:e.$props.editable,modelValue:(s=e.$props.modelValue)==null?void 0:s.includes(a[e.$props.itemValue]),"onUpdate:modelValue":()=>e.onCheckboxChange(a[e.$props.itemValue])},{label:p(({font:i})=>[A(e.$slots,"menu-prepend",{item:a}),n(U,{font:i},{default:p(()=>[W(J(a[e.$props.itemTitle]),1)]),_:2},1032,["font"])]),_:2},1032,["class","editable","modelValue","onUpdate:modelValue"])):B("",!0),e.$props.multiple?B("",!0):(k(),F(ee,{key:1,selected:e.$props.modelValue===a[e.$props.itemValue],class:z(e.listItemClass(a[e.$props.itemValue])),editable:e.$props.editable,modelValue:a[e.$props.itemValue],"onUpdate:modelValue":e.onRadioChange},{label:p(({font:i})=>[A(e.$slots,"menu-prepend",{item:a}),n(U,{font:i},{default:p(()=>[W(J(a[e.$props.itemTitle]),1)]),_:2},1032,["font"])]),_:2},1032,["selected","class","editable","modelValue","onUpdate:modelValue"]))]}),title:p(()=>[]),_:2},[N(e.menuSlots,(a,s)=>({name:s,fn:p(i=>[A(e.$slots,s,j(K(i)))])}))]),1032,["itemTitle","itemValue","items"])]),_:3},8,["height"])]),_:3},8,["modelValue"])],64)):(k(),F(ll,{key:1,closeOnContentClick:!1,modelValue:e.menu&&e.$props.editable,"onUpdate:modelValue":u[3]||(u[3]=a=>e.menu=a)},{activator:p(({props:a})=>[n(_,P({class:"fs-tree-view-field",validationValue:e.$props.modelValue,description:e.$props.description,hideHeader:e.$props.hideHeader,clearable:e.$props.clearable,editable:e.$props.editable,required:e.$props.required,validateOn:e.validateOn,label:e.$props.label,rules:e.$props.rules,messages:e.messages,readonly:!0,style:e.style,modelValue:e.innerValue,"onUpdate:modelValue":u[2]||(u[2]=s=>e.$emit("update:modelValue",s))},{...e.$attrs,...a}),E({_:2},[N(e.fieldSlots,(s,i)=>({name:i,fn:p(y=>[A(e.$slots,i,j(K(y)))])}))]),1040,["validationValue","description","hideHeader","clearable","editable","required","validateOn","label","rules","messages","style","modelValue"])]),default:p(()=>[n(m,{itemTitle:e.$props.itemTitle,itemValue:e.$props.itemValue,items:e.treeItems},E({prepend:p(({item:a})=>{var s;return[e.$props.multiple?(k(),F(x,{key:0,class:z(e.listItemClass(a[e.$props.itemValue])),editable:e.$props.editable,modelValue:(s=e.$props.modelValue)==null?void 0:s.includes(a[e.$props.itemValue]),"onUpdate:modelValue":()=>e.onCheckboxChange(a[e.$props.itemValue])},{label:p(({font:i})=>[A(e.$slots,"menu-prepend",{item:a}),n(U,{font:i},{default:p(()=>[W(J(a[e.$props.itemTitle]),1)]),_:2},1032,["font"])]),_:2},1032,["class","editable","modelValue","onUpdate:modelValue"])):B("",!0),e.$props.multiple?B("",!0):(k(),F(ee,{key:1,selected:e.$props.modelValue===a[e.$props.itemValue],class:z(e.listItemClass(a[e.$props.itemValue])),editable:e.$props.editable,modelValue:a[e.$props.itemValue],"onUpdate:modelValue":e.onRadioChange},{label:p(({font:i})=>[A(e.$slots,"menu-prepend",{item:a}),n(U,{font:i},{default:p(()=>[W(J(a[e.$props.itemTitle]),1)]),_:2},1032,["font"])]),_:2},1032,["selected","class","editable","modelValue","onUpdate:modelValue"]))]}),title:p(()=>[]),_:2},[N(e.menuSlots,(a,s)=>({name:s,fn:p(i=>[A(e.$slots,s,j(K(i)))])}))]),1032,["itemTitle","itemValue","items"])]),_:3},8,["modelValue"]))]),_:3}))}const Rl=el(ge,[["render",rl]]);ge.__docgenInfo={displayName:"FSTreeViewField",exportName:"default",description:"",tags:{},props:[{name:"label",type:{name:"string | null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"description",type:{name:"string | null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"items",type:{name:"any[]"},required:!0},{name:"itemValue",type:{name:"string"},required:!1,defaultValue:{func:!1,value:'"id"'}},{name:"itemTitle",type:{name:"string"},required:!1,defaultValue:{func:!1,value:'"label"'}},{name:"itemParent",type:{name:"string"},required:!1,defaultValue:{func:!1,value:'"parentId"'}},{name:"exclude",type:{name:"string[]"},required:!1,defaultValue:{func:!0,value:"() => []"}},{name:"modelValue",type:{name:"(string | number)[] | string | number | null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"hideHeader",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"required",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"multiple",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"rules",type:{name:"any[]"},required:!1,defaultValue:{func:!0,value:"() => []"}},{name:"messages",type:{name:"string[]"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"clearable",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"true"}},{name:"editable",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"true"}},{name:"loading",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}}],events:[{name:"update:modelValue"}],slots:[{name:"name",scoped:!0,bindings:[{name:"name",title:"binding"}]},{name:"menu-prepend",scoped:!0,bindings:[{name:"item",title:"binding"}]}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/shared/foundation-shared-components/components/fields/FSTreeViewField.vue"]};export{Rl as F};
