import{q as l,e as q,c as V,F as x,m as L,a as le,Z as re,_ as se,s as ue,O as oe,y as I,p as ce,d as de,B as D,D as E,C as ve,U as me,I as K,J as R,H as fe,P as pe,Q as ge,R as he}from"./vue.esm-bundler-B9lxvfDw.js";import{F as Ie}from"./FSLoader-FkDR4IbG.js";import{F as X}from"./FSCol-BwxAijHz.js";import{d as j,m as Ve,e as we,V as z,f as ye,g as ke,h as be,i as Ce,a as M,j as Te}from"./VList-CuJqKfkq.js";import{V as Pe}from"./VDefaultsProvider-BurwYF19.js";import{g as F,u as B,m as Se,p as Le}from"./useRender-DM2jvMPN.js";import{p as A,o as Y}from"./theme-Bz5xEpqh.js";import{u as Fe}from"./density-DvMOIaQw.js";import{m as Ae,I as _e}from"./icons-B5bBvhw0.js";import{u as $e}from"./router-BlaQ2-ft.js";import{g as qe}from"./variant-BIgPYL9J.js";import{V as U}from"./VBtn-CjvfwDqR.js";import{V as H}from"./VProgressCircular-DSOzHF7B.js";import{V as xe}from"./VCheckboxBtn-BM2tTzJT.js";import{u as Ge,m as Be}from"./filter-7QmGX2th.js";import{u as J}from"./proxiedModel-DRvKxps3.js";import{_ as De}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Re=A({start:Boolean,end:Boolean,...Se(),...Ae()},"VListItemAction"),Q=F()({name:"VListItemAction",props:Re(),setup(e,f){let{slots:s}=f;return B(()=>l(e.tag,{class:["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class],style:e.style},s)),{}}}),Ne=A({...Y(Ve({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),W=F()({name:"VTreeviewGroup",props:Ne(),setup(e,f){let{slots:s}=f;const t=q(),u=V(()=>{var o;return(o=t.value)!=null&&o.isOpen?e.collapseIcon:e.expandIcon}),p=V(()=>{var o;return{VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,active:(o=t.value)==null?void 0:o.isOpen,toggleIcon:u.value}}});return B(()=>{const o=j.filterProps(e);return l(j,L(o,{ref:t,class:["v-treeview-group",e.class],subgroup:!0}),{...s,activator:s.activator?r=>l(x,null,[l(Pe,{defaults:p.value},{default:()=>{var c;return[(c=s.activator)==null?void 0:c.call(s,r)]}})]):void 0})}),{}}}),ee=Symbol.for("vuetify:v-treeview"),Oe=A({loading:Boolean,toggleIcon:_e,...be({slim:!0})},"VTreeviewItem"),Z=F()({name:"VTreeviewItem",props:Oe(),setup(e,f){let{attrs:s,slots:t,emit:u}=f;const p=$e(e,s),o=V(()=>e.value===void 0?p.href.value:e.value),r=q(),{activate:c,isActivated:d,select:g,isSelected:v,isIndeterminate:h,isGroupActivator:w,root:y,id:k}=we(o,!1),b=V(()=>y.activatable.value&&w),{densityClasses:C}=Fe(e,"v-list-item"),i=V(()=>({isActive:d.value,select:g,isSelected:v.value,isIndeterminate:h.value})),a=V(()=>{var m;return!e.disabled&&e.link!==!1&&(e.link||p.isClickable.value||e.value!=null&&!!((m=r.value)!=null&&m.list))});function n(m){var _,$;!a.value||!b.value&&w||y.activatable.value&&(b.value?c(!d.value,m):($=r.value)==null||$.activate(!((_=r.value)!=null&&_.isActivated),m))}function T(m){(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),n(m))}const P=le(ee,{visibleIds:q()}).visibleIds;return B(()=>{var N;const m=t.title||e.title!=null,_=t.subtitle||e.subtitle!=null,$=z.filterProps(e),ne=t.prepend||e.toggleIcon;return b.value?re(l("div",{class:["v-list-item","v-list-item--one-line","v-treeview-item","v-treeview-item--activetable-group-activator",{"v-list-item--active":d.value||v.value,"v-treeview-item--filtered":P.value&&!P.value.has(k.value)},C.value,e.class],onClick:n},[l(x,null,[qe(d.value||v.value,"v-list-item"),e.toggleIcon&&l(Q,{start:!1},{default:()=>[l(U,{density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text",onClick:e.onClick},{loader(){return l(H,{indeterminate:"disable-shrink",size:"20",width:"2"},null)}})]})]),l("div",{class:"v-list-item__content","data-no-activator":""},[m&&l(ye,{key:"title"},{default:()=>{var S;return[((S=t.title)==null?void 0:S.call(t,{title:e.title}))??e.title]}}),_&&l(ke,{key:"subtitle"},{default:()=>{var S;return[((S=t.subtitle)==null?void 0:S.call(t,{subtitle:e.subtitle}))??e.subtitle]}}),(N=t.default)==null?void 0:N.call(t,i.value)])]),[[se("ripple"),a.value&&e.ripple]]):l(z,L({ref:r},$,{class:["v-treeview-item",{"v-treeview-item--filtered":P.value&&!P.value.has(k.value)},e.class],value:k.value,onClick:n,onKeydown:a.value&&T}),{...t,prepend:ne?S=>{var O;return l(x,null,[e.toggleIcon&&l(Q,{start:!1},{default:()=>[l(U,{density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text"},{loader(){return l(H,{indeterminate:"disable-shrink",size:"20",width:"2"},null)}})]}),(O=t.prepend)==null?void 0:O.call(t,S)])}:void 0})}),{}}}),te=A({loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,selectable:Boolean,selectStrategy:[String,Function,Object]},"VTreeviewChildren"),G=F()({name:"VTreeviewChildren",props:te(),setup(e,f){let{emit:s,slots:t}=f;const u=ue(null);function p(r){return new Promise(c=>{var d,g;if(!((d=e.items)!=null&&d.length)||!e.loadChildren)return c();if(((g=r==null?void 0:r.children)==null?void 0:g.length)===0){u.value=r.value,e.loadChildren(r).then(c);return}c()}).finally(()=>{u.value=null})}function o(r,c){e.selectable&&r(!c)}return()=>{var r,c;return((r=t.default)==null?void 0:r.call(t))??((c=e.items)==null?void 0:c.map(d=>{var C;let{children:g,props:v,raw:h}=d;const w=u.value===h.value,y={prepend:i=>{var a;return l(x,null,[e.selectable&&(!g||g&&!["leaf","single-leaf"].includes(e.selectStrategy))&&l("div",null,[l(xe,{key:h.value,modelValue:i.isSelected,loading:w,indeterminate:i.isIndeterminate,onClick:oe(()=>o(i.select,i.isSelected),["stop"]),onKeydown:n=>{["Enter","Space"].includes(n.key)&&(n.stopPropagation(),o(i.select,i.isSelected))}},null)]),(a=t.prepend)==null?void 0:a.call(t,{...i,item:h})])},append:t.append?i=>{var a;return(a=t.append)==null?void 0:a.call(t,{...i,item:h})}:void 0,title:t.title?i=>{var a;return(a=t.title)==null?void 0:a.call(t,{...i,item:h})}:void 0},k=W.filterProps(v),b=G.filterProps(e);return g?l(W,L({value:v==null?void 0:v.value},k),{activator:i=>{let{props:a}=i;const n={...v,...a,value:v==null?void 0:v.value};return l(Z,L(n,{loading:w,onClick:()=>p(h)}),y)},default:()=>l(G,L(b,{items:g}),t)}):((C=t.item)==null?void 0:C.call(t,{props:v}))??l(Z,v,y)}))}}});function ae(e){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];for(const s of e)f.push(s),s.children&&ae(s.children,f);return f}const Ee=A({openAll:Boolean,search:String,...Be({filterKeys:["title"]}),...te(),...Y(Te({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",slim:!0}),["itemType","nav"])},"VTreeview"),Ke=F()({name:"VTreeview",props:Ee(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,f){let{slots:s}=f;const{items:t}=Ce(e),u=I(e,"activeColor"),p=I(e,"baseColor"),o=I(e,"color"),r=J(e,"activated"),c=J(e,"selected"),d=q(),g=V(()=>e.openAll?C(t.value):e.opened),v=V(()=>ae(t.value)),h=I(e,"search"),{filteredItems:w}=Ge(e,v,h),y=V(()=>h.value?new Set(w.value.flatMap(i=>[...k(i.props.value),...b(i.props.value)])):null);function k(i){var T;const a=[];let n=i;for(;n!=null;)a.unshift(n),n=(T=d.value)==null?void 0:T.parents.get(n);return a}function b(i){var T,P;const a=[],n=(((T=d.value)==null?void 0:T.children.get(i))??[]).slice();for(;n.length;){const m=n.shift();m&&(a.push(m),n.push(...(((P=d.value)==null?void 0:P.children.get(m))??[]).slice()))}return a}function C(i){let a=[];for(const n of i)n.children&&(a.push(n.value),n.children&&(a=a.concat(C(n.children))));return a}return ce(ee,{visibleIds:y}),Le({VTreeviewGroup:{activeColor:u,baseColor:p,color:o,collapseIcon:I(e,"collapseIcon"),expandIcon:I(e,"expandIcon")},VTreeviewItem:{activeClass:I(e,"activeClass"),activeColor:u,baseColor:p,color:o,density:I(e,"density"),disabled:I(e,"disabled"),lines:I(e,"lines"),variant:I(e,"variant")}}),B(()=>{const i=M.filterProps(e),a=G.filterProps(e);return l(M,L({ref:d},i,{class:["v-treeview",e.class],style:e.style,opened:g.value,activated:r.value,"onUpdate:activated":n=>r.value=n,selected:c.value,"onUpdate:selected":n=>c.value=n}),{default:()=>[l(G,L(a,{items:t.value}),s)]})}),{}}}),ie=de({name:"FSTreeView",components:{VTreeview:Ke,FSLoader:Ie,FSCol:X},props:{items:{type:Array,required:!0},itemValue:{type:String,required:!1,default:"id"},itemTitle:{type:String,required:!1,default:"label"},itemParent:{type:String,required:!1,default:"parentId"},exclude:{type:Array,required:!1,default:()=>[]},loading:{type:Boolean,required:!1,default:!1}},setup(e){return{treeItems:V(()=>{const s=u=>e.items.filter(p=>e.exclude.includes(p[e.itemValue])?!1:p[e.itemParent]==u),t=u=>e.items.some(p=>p[e.itemParent]===u[e.itemValue])?{...u,children:s(u[e.itemValue]).map(t)}:u;return s(null).map(t)})}}});function je(e,f,s,t,u,p){const o=K("FSLoader"),r=K("v-treeview");return e.$props.loading?(R(),D(X,{key:0},{default:E(()=>[e.$props.loading?(R(),D(o,{key:0,width:"100%",height:["40px","36px"]})):fe("",!0)]),_:1})):(R(),D(r,{key:1,itemTitle:e.$props.itemTitle,itemValue:e.$props.itemValue,items:e.treeItems},ve({_:2},[me(e.$slots,(c,d)=>({name:d,fn:E(g=>[pe(e.$slots,d,ge(he(g)))])}))]),1032,["itemTitle","itemValue","items"]))}const st=De(ie,[["render",je]]);ie.__docgenInfo={displayName:"FSTreeView",exportName:"default",description:"",tags:{},props:[{name:"items",type:{name:"any[]"},required:!0},{name:"itemValue",type:{name:"string"},required:!1,defaultValue:{func:!1,value:'"id"'}},{name:"itemTitle",type:{name:"string"},required:!1,defaultValue:{func:!1,value:'"label"'}},{name:"itemParent",type:{name:"string"},required:!1,defaultValue:{func:!1,value:'"parentId"'}},{name:"exclude",type:{name:"string[]"},required:!1,defaultValue:{func:!0,value:"() => []"}},{name:"loading",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}}],slots:[{name:"name",scoped:!0,bindings:[{name:"name",title:"binding"}]}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/shared/foundation-shared-components/components/FSTreeView.vue"]};export{st as F};
