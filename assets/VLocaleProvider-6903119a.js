import{j as D,d as W,s as b,z as v,N as x}from"./vue.esm-bundler-0a1af505.js";import{u as p,g as j}from"./date-46cac397.js";import{u as V}from"./proxiedModel-7a45f3f8.js";import{p as M,w as N}from"./theme-2d24b19c.js";import{V as O}from"./VDefaultsProvider-0c713390.js";import{V as C}from"./VBtn-bd41b5e0.js";import{g as A,m as I,u as B}from"./useRender-cc726afb.js";import{p as L}from"./locale-767f04a5.js";const Y=M({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]}},"calendar");function R(t){const e=p(),c=V(t,"modelValue",[],n=>N(n)),f=D(()=>t.displayValue?e.date(t.displayValue):c.value.length>0?e.date(c.value[0]):t.min?e.date(t.min):Array.isArray(t.allowedDates)?e.date(t.allowedDates[0]):e.date()),k=V(t,"year",void 0,n=>{const s=n!=null?Number(n):e.getYear(f.value);return e.startOfYear(e.setYear(e.date(),s))},n=>e.getYear(n)),h=V(t,"month",void 0,n=>{const s=n!=null?Number(n):e.getMonth(f.value),l=e.setYear(e.startOfMonth(e.date()),e.getYear(k.value));return e.setMonth(l,s)},n=>e.getMonth(n)),d=D(()=>{const n=e.getWeekArray(h.value),s=n.flat(),l=6*7;if(s.length<l){const a=s[s.length-1];let o=[];for(let r=1;r<=l-s.length;r++)o.push(e.addDays(a,r)),r%7===0&&(n.push(o),o=[])}return n});function g(n,s){return n.filter(l=>t.weekdays.includes(e.toJsDate(l).getDay())).map((l,a)=>{const o=e.toISO(l),r=!e.isSameMonth(l,h.value),m=e.isSameDay(l,e.startOfMonth(h.value)),w=e.isSameDay(l,e.endOfMonth(h.value)),S=e.isSameDay(l,h.value);return{date:l,isoDate:o,formatted:e.format(l,"keyboardDate"),year:e.getYear(l),month:e.getMonth(l),isDisabled:_(l),isWeekStart:a%7===0,isWeekEnd:a%7===6,isToday:e.isSameDay(l,s),isAdjacent:r,isHidden:r&&!t.showAdjacentMonths,isStart:m,isSelected:c.value.some(P=>e.isSameDay(l,P)),isEnd:w,isSame:S,localized:e.format(l,"dayOfMonth")}})}const u=D(()=>{const n=e.startOfWeek(c.value),s=[];for(let o=0;o<=6;o++)s.push(e.addDays(n,o));const l=s,a=e.date();return g(l,a)}),i=D(()=>{const n=d.value.flat(),s=e.date();return g(n,s)}),y=D(()=>d.value.map(n=>n.length?j(e,n[0]):null));function _(n){if(t.disabled)return!0;const s=e.date(n);return t.min&&e.isAfter(e.date(t.min),s)||t.max&&e.isAfter(s,e.date(t.max))?!0:Array.isArray(t.allowedDates)&&t.allowedDates.length>0?!t.allowedDates.some(l=>e.isSameDay(e.date(l),s)):typeof t.allowedDates=="function"?!t.allowedDates(s):!1}return{displayValue:f,daysInMonth:i,daysInWeek:u,genDays:g,model:c,weeksInMonth:d,weekNumbers:y}}const T=M({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,...Y()},"VDatePickerMonth"),Q=A()({name:"VDatePickerMonth",props:T(),emits:{"update:modelValue":t=>!0,"update:month":t=>!0,"update:year":t=>!0},setup(t,e){let{emit:c,slots:f}=e;const k=W(),{daysInMonth:h,model:d,weekNumbers:g}=R(t),u=p(),i=b(),y=b();t.multiple==="range"&&d.value.length>0&&(i.value=d.value[0],d.value.length>1&&(y.value=d.value[d.value.length-1]));const _=D(()=>{const a=["number","string"].includes(typeof t.multiple)?Number(t.multiple):1/0;return d.value.length>=a});function n(a){const o=u.startOfDay(a);if(!i.value)i.value=o,d.value=[i.value];else if(y.value)i.value=a,y.value=void 0,d.value=[i.value];else{if(u.isSameDay(o,i.value)){i.value=void 0,d.value=[];return}else u.isBefore(o,i.value)?(y.value=u.endOfDay(i.value),i.value=o):y.value=u.endOfDay(o);const r=u.getDiff(y.value,i.value,"days"),m=[i.value];for(let w=1;w<r;w++){const S=u.addDays(i.value,w);m.push(S)}m.push(y.value),d.value=m}}function s(a){const o=d.value.findIndex(r=>u.isSameDay(r,a));if(o===-1)d.value=[...d.value,a];else{const r=[...d.value];r.splice(o,1),d.value=r}}function l(a){t.multiple==="range"?n(a):t.multiple?s(a):d.value=[a]}return()=>v("div",{class:"v-date-picker-month"},[t.showWeek&&v("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!t.hideWeekdays&&v("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[x("Â ")]),g.value.map(a=>v("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[a]))]),v("div",{ref:k,class:"v-date-picker-month__days"},[!t.hideWeekdays&&u.getWeekdays().map(a=>v("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[a])),h.value.map((a,o)=>{const r={props:{onClick:()=>l(a.date)},item:a,i:o};return _.value&&!a.isSelected&&(a.isDisabled=!0),v("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":a.isAdjacent,"v-date-picker-month__day--hide-adjacent":a.isHidden,"v-date-picker-month__day--selected":a.isSelected,"v-date-picker-month__day--week-end":a.isWeekEnd,"v-date-picker-month__day--week-start":a.isWeekStart}],"data-v-date":a.isDisabled?void 0:a.isoDate},[(t.showAdjacentMonths||!a.isAdjacent)&&v(O,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(a.isSelected||a.isToday)&&!a.isDisabled?t.color:void 0,disabled:a.isDisabled,icon:!0,ripple:!1,text:a.localized,variant:a.isDisabled?a.isToday?"outlined":"text":a.isToday&&!a.isSelected?"outlined":"flat",onClick:()=>l(a.date)}}},{default:()=>{var m;return[((m=f.day)==null?void 0:m.call(f,r))??v(C,r.props,null)]}})])})])])}});const z=M({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...I()},"VLocaleProvider"),U=A()({name:"VLocaleProvider",props:z(),setup(t,e){let{slots:c}=e;const{rtlClasses:f}=L(t);return B(()=>{var k;return v("div",{class:["v-locale-provider",f.value,t.class],style:t.style},[(k=c.default)==null?void 0:k.call(c)])}),{}}});export{U as V,Q as a};
