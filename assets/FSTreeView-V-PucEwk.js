import{k as l,b as _,c as V,F as q,m as L,i as le,Y as re,Z as se,s as oe,N as ue,o as I,p as ce,d as de,B as D,E as O,D as ve,S as me,I as K,J as R,H as fe,O as pe,P as ge,Q as he}from"./vue.esm-bundler-PONd4AmC.js";import{F as Ie}from"./FSLoader-B0jwcdOS.js";import{F as Z}from"./FSCol-Bfhiyt6Y.js";import{d as j,m as Ve,e as we,V as z,f as ye,g as ke,h as be,i as Ce,j as Te,a as M}from"./VList-BCmGq4kQ.js";import{V as Pe}from"./VDefaultsProvider--dbql3OT.js";import{g as F,u as B,m as Se,p as Le}from"./color-CQ7P2KsY.js";import{p as A,o as X}from"./theme-DW7AHeJn.js";import{u as Fe}from"./density-DM1TPnyn.js";import{m as Ae,I as $e}from"./VIcon-shEmQARK.js";import{u as xe}from"./router-DS8hXbpn.js";import{g as _e}from"./border-BL_XAYaf.js";import{V as U}from"./VBtn-Bcg5Dpfx.js";import{V as H}from"./VProgressCircular-D57tYVQX.js";import{V as qe}from"./VCheckboxBtn-CYnHxMSC.js";import{u as Ge,m as Be}from"./filter-D4n0RRF9.js";import{u as J}from"./proxiedModel-BMHfYIia.js";import{_ as De}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Re=A({start:Boolean,end:Boolean,...Se(),...Ae()},"VListItemAction"),Q=F()({name:"VListItemAction",props:Re(),setup(e,f){let{slots:s}=f;return B(()=>l(e.tag,{class:["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class],style:e.style},s)),{}}}),Ne=A({...X(Ve({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),W=F()({name:"VTreeviewGroup",props:Ne(),setup(e,f){let{slots:s}=f;const t=_(),o=V(()=>{var u;return(u=t.value)!=null&&u.isOpen?e.collapseIcon:e.expandIcon}),p=V(()=>{var u;return{VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,active:(u=t.value)==null?void 0:u.isOpen,toggleIcon:o.value}}});return B(()=>{const u=j.filterProps(e);return l(j,L(u,{ref:t,class:["v-treeview-group",e.class],subgroup:!0}),{...s,activator:s.activator?r=>l(q,null,[l(Pe,{defaults:p.value},{default:()=>{var c;return[(c=s.activator)==null?void 0:c.call(s,r)]}})]):void 0})}),{}}}),ee=Symbol.for("vuetify:v-treeview"),Ee=A({loading:Boolean,toggleIcon:$e,...be({slim:!0})},"VTreeviewItem"),Y=F()({name:"VTreeviewItem",props:Ee(),setup(e,f){let{attrs:s,slots:t,emit:o}=f;const p=xe(e,s),u=V(()=>e.value===void 0?p.href.value:e.value),r=_(),{activate:c,isActivated:d,select:g,isSelected:v,isIndeterminate:h,isGroupActivator:w,root:y,id:k}=we(u,!1),b=V(()=>y.activatable.value&&w),{densityClasses:C}=Fe(e,"v-list-item"),i=V(()=>({isActive:d.value,select:g,isSelected:v.value,isIndeterminate:h.value})),a=V(()=>{var m;return!e.disabled&&e.link!==!1&&(e.link||p.isClickable.value||e.value!=null&&!!((m=r.value)!=null&&m.list))});function n(m){var $,x;!a.value||!b.value&&w||y.activatable.value&&(b.value?c(!d.value,m):(x=r.value)==null||x.activate(!(($=r.value)!=null&&$.isActivated),m))}function T(m){(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),n(m))}const P=le(ee,{visibleIds:_()}).visibleIds;return B(()=>{var N;const m=t.title||e.title!=null,$=t.subtitle||e.subtitle!=null,x=z.filterProps(e),ne=t.prepend||e.toggleIcon;return b.value?re(l("div",{class:["v-list-item","v-list-item--one-line","v-treeview-item","v-treeview-item--activetable-group-activator",{"v-list-item--active":d.value||v.value,"v-treeview-item--filtered":P.value&&!P.value.has(k.value)},C.value,e.class],onClick:n},[l(q,null,[_e(d.value||v.value,"v-list-item"),e.toggleIcon&&l(Q,{start:!1},{default:()=>[l(U,{density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text",onClick:e.onClick},{loader(){return l(H,{indeterminate:"disable-shrink",size:"20",width:"2"},null)}})]})]),l("div",{class:"v-list-item__content","data-no-activator":""},[m&&l(ye,{key:"title"},{default:()=>{var S;return[((S=t.title)==null?void 0:S.call(t,{title:e.title}))??e.title]}}),$&&l(ke,{key:"subtitle"},{default:()=>{var S;return[((S=t.subtitle)==null?void 0:S.call(t,{subtitle:e.subtitle}))??e.subtitle]}}),(N=t.default)==null?void 0:N.call(t,i.value)])]),[[se("ripple"),a.value&&e.ripple]]):l(z,L({ref:r},x,{class:["v-treeview-item",{"v-treeview-item--filtered":P.value&&!P.value.has(k.value)},e.class],value:k.value,onClick:n,onKeydown:a.value&&T}),{...t,prepend:ne?S=>{var E;return l(q,null,[e.toggleIcon&&l(Q,{start:!1},{default:()=>[l(U,{density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text"},{loader(){return l(H,{indeterminate:"disable-shrink",size:"20",width:"2"},null)}})]}),(E=t.prepend)==null?void 0:E.call(t,S)])}:void 0})}),{}}}),te=A({loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,selectable:Boolean,selectStrategy:[String,Function,Object]},"VTreeviewChildren"),G=F()({name:"VTreeviewChildren",props:te(),setup(e,f){let{emit:s,slots:t}=f;const o=oe(null);function p(r){return new Promise(c=>{var d,g;if(!((d=e.items)!=null&&d.length)||!e.loadChildren)return c();if(((g=r==null?void 0:r.children)==null?void 0:g.length)===0){o.value=r.value,e.loadChildren(r).then(c);return}c()}).finally(()=>{o.value=null})}function u(r,c){e.selectable&&r(!c)}return()=>{var r,c;return((r=t.default)==null?void 0:r.call(t))??((c=e.items)==null?void 0:c.map(d=>{var C;let{children:g,props:v,raw:h}=d;const w=o.value===h.value,y={prepend:i=>{var a;return l(q,null,[e.selectable&&(!g||g&&!["leaf","single-leaf"].includes(e.selectStrategy))&&l("div",null,[l(qe,{key:h.value,modelValue:i.isSelected,loading:w,indeterminate:i.isIndeterminate,onClick:ue(()=>u(i.select,i.isSelected),["stop"]),onKeydown:n=>{["Enter","Space"].includes(n.key)&&(n.stopPropagation(),u(i.select,i.isSelected))}},null)]),(a=t.prepend)==null?void 0:a.call(t,{...i,item:h})])},append:t.append?i=>{var a;return(a=t.append)==null?void 0:a.call(t,{...i,item:h})}:void 0,title:t.title?i=>{var a;return(a=t.title)==null?void 0:a.call(t,{...i,item:h})}:void 0},k=W.filterProps(v),b=G.filterProps(e);return g?l(W,L({value:v==null?void 0:v.value},k),{activator:i=>{let{props:a}=i;const n={...v,...a,value:v==null?void 0:v.value};return l(Y,L(n,{loading:w,onClick:()=>p(h)}),y)},default:()=>l(G,L(b,{items:g}),t)}):((C=t.item)==null?void 0:C.call(t,{props:v}))??l(Y,v,y)}))}}});function ae(e){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];for(const s of e)f.push(s),s.children&&ae(s.children,f);return f}const Oe=A({openAll:Boolean,search:String,...Be({filterKeys:["title"]}),...te(),...X(Te({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",slim:!0}),["itemType","nav"])},"VTreeview"),Ke=F()({name:"VTreeview",props:Oe(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,f){let{slots:s}=f;const{items:t}=Ce(e),o=I(e,"activeColor"),p=I(e,"baseColor"),u=I(e,"color"),r=J(e,"activated"),c=J(e,"selected"),d=_(),g=V(()=>e.openAll?C(t.value):e.opened),v=V(()=>ae(t.value)),h=I(e,"search"),{filteredItems:w}=Ge(e,v,h),y=V(()=>h.value?new Set(w.value.flatMap(i=>[...k(i.props.value),...b(i.props.value)])):null);function k(i){var T;const a=[];let n=i;for(;n!=null;)a.unshift(n),n=(T=d.value)==null?void 0:T.parents.get(n);return a}function b(i){var T,P;const a=[],n=(((T=d.value)==null?void 0:T.children.get(i))??[]).slice();for(;n.length;){const m=n.shift();m&&(a.push(m),n.push(...(((P=d.value)==null?void 0:P.children.get(m))??[]).slice()))}return a}function C(i){let a=[];for(const n of i)n.children&&(a.push(n.value),n.children&&(a=a.concat(C(n.children))));return a}return ce(ee,{visibleIds:y}),Le({VTreeviewGroup:{activeColor:o,baseColor:p,color:u,collapseIcon:I(e,"collapseIcon"),expandIcon:I(e,"expandIcon")},VTreeviewItem:{activeClass:I(e,"activeClass"),activeColor:o,baseColor:p,color:u,density:I(e,"density"),disabled:I(e,"disabled"),lines:I(e,"lines"),variant:I(e,"variant")}}),B(()=>{const i=M.filterProps(e),a=G.filterProps(e);return l(M,L({ref:d},i,{class:["v-treeview",e.class],style:e.style,opened:g.value,activated:r.value,"onUpdate:activated":n=>r.value=n,selected:c.value,"onUpdate:selected":n=>c.value=n}),{default:()=>[l(G,L(a,{items:t.value}),s)]})}),{}}}),ie=de({name:"FSTreeView",components:{VTreeview:Ke,FSLoader:Ie,FSCol:Z},props:{items:{type:Array,required:!0},itemValue:{type:String,required:!1,default:"id"},itemTitle:{type:String,required:!1,default:"label"},itemParent:{type:String,required:!1,default:"parentId"},exclude:{type:Array,required:!1,default:()=>[]},loading:{type:Boolean,required:!1,default:!1}},setup(e){return{treeItems:V(()=>{const s=o=>e.items.filter(p=>e.exclude.includes(p[e.itemValue])?!1:p[e.itemParent]==o),t=o=>e.items.some(p=>p[e.itemParent]===o[e.itemValue])?{...o,children:s(o[e.itemValue]).map(t)}:o;return s(null).map(t)})}}});function je(e,f,s,t,o,p){const u=K("FSLoader"),r=K("v-treeview");return e.$props.loading?(R(),D(Z,{key:0},{default:O(()=>[e.$props.loading?(R(),D(u,{key:0,width:"100%",height:["40px","36px"]})):fe("",!0)]),_:1})):(R(),D(r,{key:1,itemTitle:e.$props.itemTitle,itemValue:e.$props.itemValue,items:e.treeItems},ve({_:2},[me(e.$slots,(c,d)=>({name:d,fn:O(g=>[pe(e.$slots,d,ge(he(g)))])}))]),1032,["itemTitle","itemValue","items"]))}const st=De(ie,[["render",je]]);ie.__docgenInfo={displayName:"FSTreeView",exportName:"default",description:"",tags:{},props:[{name:"items",type:{name:"any[]"},required:!0},{name:"itemValue",type:{name:"string"},required:!1,defaultValue:{func:!1,value:'"id"'}},{name:"itemTitle",type:{name:"string"},required:!1,defaultValue:{func:!1,value:'"label"'}},{name:"itemParent",type:{name:"string"},required:!1,defaultValue:{func:!1,value:'"parentId"'}},{name:"exclude",type:{name:"string[]"},required:!1,defaultValue:{func:!0,value:"() => []"}},{name:"loading",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}}],slots:[{name:"name",scoped:!0,bindings:[{name:"name",title:"binding"}]}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/shared/foundation-shared-components/components/FSTreeView.vue"]};export{st as F};
