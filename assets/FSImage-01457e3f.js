import{d as b,g as A,j as h,E as j,z as _,K as $,L as I,V as J,w as K,J as O,M as N,x as Y,P as Q,W as X}from"./vue.esm-bundler-e580dd1f.js";import{u as Z,s as f}from"./css-ca36ed75.js";import{u as ee,C as te}from"./useColors-b2cb658b.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";import{b as ae}from"./color-0af6d6f5.js";import{m as re,u as ne}from"./dimensions-10c7935e.js";import{m as se,u as le}from"./elevation-02492a14.js";import{u as ie}from"./locale-405fbfb1.js";import{p as oe,y as ue,z as de,w as ce}from"./theme-a3bb880e.js";import{g as he,u as fe}from"./useRender-16acb9c4.js";import{G as me,S as q}from"./base-7f65d26c.js";import{V as ge}from"./VImg-07ac5889.js";class L{constructor(t){this.blurHash=t.blurHash,this.width=t.width,this.height=t.height}}const U=()=>`${me()}/images`,pe=()=>`${U()}/raw`,ve=e=>`${pe()}/${encodeURIComponent(e)}`,be=()=>`${U()}/blurHash`,ye=e=>`${be()}/${encodeURIComponent(e)}`,xe=new q("image",L).create(e=>e.build(e.addNotify(()=>({getBlurHash:async t=>{const a=await q.http.get(ye(t));return new L(a.data)}})))),we=()=>{const e=xe(),t=b(!1),a=b(null);return{getting:t,get:async l=>{t.value=!0;try{a.value=await e.getBlurHash(l)}finally{t.value=!1}return a},entity:a}},P=A({name:"FSLoader",props:{width:{type:[Array,String,Number],required:!1,default:null},height:{type:[Array,String,Number],required:!1,default:null},padding:{type:[String,Number],required:!1,default:"0"},borderRadius:{type:[String,Number],required:!1,default:"4px"},variant:{type:String,required:!1,default:"standard"}},setup(e){const{isMobileSized:t}=Z(),{getColors:a}=ee(),r=a(te.Background),l=h(()=>({"--fs-loader-background-color":r.base,"--fs-loader-border-radius":["chip"].includes(e.variant)?"50px":f(e.borderRadius),"--fs-loader-padding":f(e.padding),"--fs-loader-height":f(u.value),"--fs-loader-width":f(o.value)})),u=h(()=>{switch(e.variant){case"standard":return f(e.height);case"button":case"input":case"field":return t.value?"36px":"40px";case"chip":return t.value?"20px":"24px";case"text-h1":return t.value?"32px":"40px";case"text-h2":return t.value?"24px":"32px";case"text-h3":return t.value?"20px":"24px";case"text-h4":return t.value?"16px":"20px";case"text-body":case"text-button":return t.value?"14px":"16px";case"text-overline":case"text-underline":return"16px"}}),o=h(()=>{switch(e.variant){case"standard":return f(e.width);case"button":return t?"36px":"40px";case"input":return t?"calc(50% - 124px)":"calc(50% - 132px)";case"field":return"100%";case"chip":return"8vw";case"text-h1":return"calc(50% - 32px)";case"text-h2":return"calc(60% - 32px)";case"text-h3":return"calc(65% - 32px)";default:return"calc(75% - 32px)"}});return{style:l}}});const Se={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function Re(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return _("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[t])}function H(e){const[t,a]=e.split("@");return Array.from({length:a}).map(()=>y(t))}function y(e){let t=[];if(!e)return t;const a=Se[e];if(e!==a){if(e.includes(","))return B(e);if(e.includes("@"))return H(e);a.includes(",")?t=B(a):a.includes("@")?t=H(a):a&&t.push(y(a))}return[Re(e,t)]}function B(e){return e.replace(/\s/g,"").split(",").map(y)}const ke=oe({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...re(),...se(),...ue()},"VSkeletonLoader"),$e=he()({name:"VSkeletonLoader",props:ke(),setup(e,t){let{slots:a}=t;const{backgroundColorClasses:r,backgroundColorStyles:l}=ae(j(e,"color")),{dimensionStyles:u}=ne(e),{elevationClasses:o}=le(e),{themeClasses:m}=de(e),{t:c}=ie(),d=h(()=>y(ce(e.type).join(",")));return fe(()=>{var s;const n=!a.default||e.loading;return _("div",{class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},m.value,r.value,o.value],style:[l.value,n?u.value:{}],"aria-busy":e.boilerplate?void 0:n,"aria-live":e.boilerplate?void 0:"polite","aria-label":e.boilerplate?void 0:c(e.loadingText),role:e.boilerplate?void 0:"alert"},[n?d.value:(s=a.default)==null?void 0:s.call(a)])}),{}}});function Ie(e,t,a,r,l,u){return $(),I($e,{class:"fs-loader",type:"image",style:J(e.style)},null,8,["style"])}const _e=E(P,[["render",Ie]]);P.__docgenInfo={displayName:"FSLoader",exportName:"default",description:"",tags:{},props:[{name:"width",type:{name:"string[] | number[] | string | number"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"height",type:{name:"string[] | number[] | string | number"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"padding",type:{name:"string|number"},required:!1,defaultValue:{func:!1,value:'"0"'}},{name:"borderRadius",type:{name:"string|number"},required:!1,defaultValue:{func:!1,value:'"4px"'}},{name:"variant",values:["standard","button","input","field","chip","text-h1","text-h2","text-h3","text-h4","text-body","text-button","text-overline","text-underline"],type:{name:"string"},required:!1,defaultValue:{func:!1,value:'"standard"'}}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/shared/foundation-shared-components/components/FSLoader.vue"]};var Ve=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],g=e=>{let t=0;for(let a=0;a<e.length;a++){let r=e[a],l=Ve.indexOf(r);t=t*83+l}return t},S=e=>{let t=e/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},R=e=>{let t=Math.max(0,Math.min(1,e));return t<=.0031308?Math.trunc(t*12.92*255+.5):Math.trunc((1.055*Math.pow(t,.4166666666666667)-.055)*255+.5)},Fe=e=>e<0?-1:1,k=(e,t)=>Fe(e)*Math.pow(Math.abs(e),t),C=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},T=e=>{if(!e||e.length<6)throw new C("The blurhash string must be at least 6 characters");let t=g(e[0]),a=Math.floor(t/9)+1,r=t%9+1;if(e.length!==4+2*r*a)throw new C(`blurhash length mismatch: length is ${e.length} but it should be ${4+2*r*a}`)},Me=e=>{try{T(e)}catch(t){return{result:!1,errorReason:t.message}}return{result:!0}},Ne=e=>{let t=e>>16,a=e>>8&255,r=e&255;return[S(t),S(a),S(r)]},qe=(e,t)=>{let a=Math.floor(e/361),r=Math.floor(e/19)%19,l=e%19;return[k((a-9)/9,2)*t,k((r-9)/9,2)*t,k((l-9)/9,2)*t]},Le=(e,t,a,r)=>{T(e),r=r|1;let l=g(e[0]),u=Math.floor(l/9)+1,o=l%9+1,m=(g(e[1])+1)/166,c=new Array(o*u);for(let s=0;s<c.length;s++)if(s===0){let i=g(e.substring(2,6));c[s]=Ne(i)}else{let i=g(e.substring(4+s*2,6+s*2));c[s]=qe(i,m*r)}let d=t*4,n=new Uint8ClampedArray(d*a);for(let s=0;s<a;s++)for(let i=0;i<t;i++){let V=0,F=0,M=0;for(let p=0;p<u;p++)for(let v=0;v<o;v++){let x=Math.cos(Math.PI*i*v/t)*Math.cos(Math.PI*s*p/a),w=c[v+p*o];V+=w[0]*x,F+=w[1]*x,M+=w[2]*x}let G=R(V),z=R(F),D=R(M);n[4*i+0+s*d]=G,n[4*i+1+s*d]=z,n[4*i+2+s*d]=D,n[4*i+3+s*d]=255}return n},He=Le;const W=A({name:"FSImage",components:{FSLoader:_e},props:{imageId:{type:[String,null,void 0],required:!1,default:null},cover:{type:Boolean,required:!1,default:!0},width:{type:[String,Number],required:!1,default:null},height:{type:[String,Number],required:!1,default:null},aspectRatio:{type:String,required:!1,default:null},borderRadius:{type:[String,Number],required:!1,default:"4px"}},setup(e){const{get:t,entity:a}=we(),r=b(null),l=b(null),u=h(()=>({"--fs-image-border-radius":f(e.borderRadius),"--fs-image-blurhash-opacity":a.value?"1":"0"})),o=h(()=>{if(e.height)return e.height;if(e.width){if(typeof e.width=="string")return;if(e.aspectRatio){const n=e.aspectRatio.split("/");if(n.length===2&&!isNaN(parseFloat(n[0]))&&!isNaN(parseFloat(n[1])))return e.width*(parseFloat(n[1])/parseFloat(n[0]))}return e.width}}),m=h(()=>{if(e.width)return e.width;if(e.height){if(typeof e.height=="string")return;if(e.aspectRatio){const n=e.aspectRatio.split("/");if(n.length===2&&!isNaN(parseFloat(n[0]))&&!isNaN(parseFloat(n[1])))return e.height*(parseFloat(n[0])/parseFloat(n[1]))}return e.height}}),c=h(()=>e.imageId?ve(e.imageId):null),d=()=>{e.imageId&&t(e.imageId)};return K(()=>a.value,()=>{if(l.value&&r.value&&a.value&&Me(a.value.blurHash).result){const n=l.value.getContext("2d");if(n){const s=He(a.value.blurHash,r.value.$el.clientWidth,r.value.$el.clientHeight),i=n.createImageData(r.value.$el.clientWidth,r.value.$el.clientHeight);i.data.set(s),n.putImageData(i,0,0)}}}),{computedHeight:o,computedWidth:m,canvasRef:l,imageRef:r,blurHash:a,source:c,style:u,onError:d}}}),Be={ref:"canvasRef"};function Ce(e,t,a,r,l,u){const o=O("FSLoader");return $(),I(ge,Y({class:"fs-image",ref:"imageRef",height:e.computedHeight,width:e.computedWidth,cover:e.$props.cover,style:e.style,src:e.source,onError:e.onError},e.$attrs),{placeholder:N(()=>[_(o,{class:"fs-image-load",height:"100%",width:"100%",borderRadius:e.$props.borderRadius},null,8,["borderRadius"])]),error:N(()=>[e.blurHash?Q("",!0):($(),I(o,{key:0,class:"fs-image-load",height:"100%",width:"100%",borderRadius:e.$props.borderRadius},null,8,["borderRadius"])),X("canvas",Be,null,512)]),_:1},16,["height","width","cover","style","src","onError"])}const Oe=E(W,[["render",Ce]]);W.__docgenInfo={displayName:"FSImage",exportName:"default",description:"",tags:{},props:[{name:"imageId",type:{name:"string|null|undefined"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"cover",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"true"}},{name:"width",type:{name:"string|number"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"height",type:{name:"string|number"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"aspectRatio",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"borderRadius",type:{name:"string|number"},required:!1,defaultValue:{func:!1,value:'"4px"'}}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/shared/foundation-shared-components/components/FSImage.vue"]};export{Oe as F,$e as V,_e as a};
