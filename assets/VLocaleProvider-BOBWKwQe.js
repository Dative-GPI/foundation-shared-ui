import{i as x,r as I,w as O,c as S,b as j,s as V,P as m,J as N}from"./vue.esm-bundler-Zcuj-zyO.js";import{u as C,p as T}from"./locale-Beavd5eP.js";import{u as W}from"./proxiedModel-Xz4IZg0a.js";import{p as A,w as B}from"./theme-DppimMvq.js";import{M as Y}from"./transition-shOmLEJh.js";import{V as L}from"./VDefaultsProvider-BGrIgR0V.js";import{V as R}from"./VBtn-CKg6JYm3.js";import{g as P,m as E,a as F}from"./color-mm3JSYKM.js";const J=Symbol.for("vuetify:date-options");function z(e,a){const d=I(typeof e.adapter=="function"?new e.adapter({locale:e.locale[a.current.value]??a.current.value,formats:e.formats}):e.adapter);return O(a.current,o=>{d.locale=e.locale[o]??o??d.locale}),d}function p(){const e=x(J);if(!e)throw new Error("[Vuetify] Could not find injected date options");const a=C();return z(e,a)}function H(e,a){const d=e.toJsDate(a);let o=d.getFullYear(),f=new Date(o,0,1);if(d<f)o=o-1,f=new Date(o,0,1);else{const D=new Date(o+1,0,1);d>=D&&(o=o+1,f=D)}const v=Math.abs(d.getTime()-f.getTime()),s=Math.ceil(v/(1e3*60*60*24));return Math.floor(s/7)+1}const q=A({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:[Number,String]},"calendar");function G(e){const a=p(),d=W(e,"modelValue",[],n=>B(n)),o=S(()=>e.displayValue?a.date(e.displayValue):d.value.length>0?a.date(d.value[0]):e.min?a.date(e.min):Array.isArray(e.allowedDates)?a.date(e.allowedDates[0]):a.date()),f=W(e,"year",void 0,n=>{const r=n!=null?Number(n):a.getYear(o.value);return a.startOfYear(a.setYear(a.date(),r))},n=>a.getYear(n)),v=W(e,"month",void 0,n=>{const r=n!=null?Number(n):a.getMonth(o.value),l=a.setYear(a.startOfMonth(a.date()),a.getYear(f.value));return a.setMonth(l,r)},n=>a.getMonth(n)),s=S(()=>{const n=Number(e.firstDayOfWeek??0);return e.weekdays.map(r=>(r+n)%7)}),D=S(()=>{const n=a.getWeekArray(v.value,e.firstDayOfWeek),r=n.flat(),l=6*7;if(e.weeksInMonth==="static"&&r.length<l){const y=r[r.length-1];let i=[];for(let t=1;t<=l-r.length;t++)i.push(a.addDays(y,t)),t%7===0&&(n.push(i),i=[])}return n});function c(n,r){return n.filter(l=>s.value.includes(a.toJsDate(l).getDay())).map((l,y)=>{const i=a.toISO(l),t=!a.isSameMonth(l,v.value),k=a.isSameDay(l,a.startOfMonth(v.value)),g=a.isSameDay(l,a.endOfMonth(v.value)),w=a.isSameDay(l,v.value);return{date:l,isoDate:i,formatted:a.format(l,"keyboardDate"),year:a.getYear(l),month:a.getMonth(l),isDisabled:M(l),isWeekStart:y%7===0,isWeekEnd:y%7===6,isToday:a.isSameDay(l,r),isAdjacent:t,isHidden:t&&!e.showAdjacentMonths,isStart:k,isSelected:d.value.some(_=>a.isSameDay(l,_)),isEnd:g,isSame:w,localized:a.format(l,"dayOfMonth")}})}const u=S(()=>{const n=a.startOfWeek(o.value,e.firstDayOfWeek),r=[];for(let y=0;y<=6;y++)r.push(a.addDays(n,y));const l=a.date();return c(r,l)}),h=S(()=>{const n=D.value.flat(),r=a.date();return c(n,r)}),b=S(()=>D.value.map(n=>n.length?H(a,n[0]):null));function M(n){if(e.disabled)return!0;const r=a.date(n);return e.min&&a.isAfter(a.date(e.min),r)||e.max&&a.isAfter(r,a.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(l=>a.isSameDay(a.date(l),r)):typeof e.allowedDates=="function"?!e.allowedDates(r):!1}return{displayValue:o,daysInMonth:h,daysInWeek:u,genDays:c,model:d,weeksInMonth:D,weekDays:s,weekNumbers:b}}const K=A({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...q()},"VDatePickerMonth"),le=P()({name:"VDatePickerMonth",props:K(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,a){let{emit:d,slots:o}=a;const f=j(),{daysInMonth:v,model:s,weekNumbers:D}=G(e),c=p(),u=V(),h=V(),b=V(!1),M=S(()=>b.value?e.reverseTransition:e.transition);e.multiple==="range"&&s.value.length>0&&(u.value=s.value[0],s.value.length>1&&(h.value=s.value[s.value.length-1]));const n=S(()=>{const i=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return s.value.length>=i});O(v,(i,t)=>{t&&(b.value=c.isBefore(i[0].date,t[0].date))});function r(i){const t=c.startOfDay(i);if(s.value.length===0?u.value=void 0:s.value.length===1&&(u.value=s.value[0],h.value=void 0),!u.value)u.value=t,s.value=[u.value];else if(h.value)u.value=i,h.value=void 0,s.value=[u.value];else{if(c.isSameDay(t,u.value)){u.value=void 0,s.value=[];return}else c.isBefore(t,u.value)?(h.value=c.endOfDay(u.value),u.value=t):h.value=c.endOfDay(t);const k=c.getDiff(h.value,u.value,"days"),g=[u.value];for(let w=1;w<k;w++){const _=c.addDays(u.value,w);g.push(_)}g.push(h.value),s.value=g}}function l(i){const t=s.value.findIndex(k=>c.isSameDay(k,i));if(t===-1)s.value=[...s.value,i];else{const k=[...s.value];k.splice(t,1),s.value=k}}function y(i){e.multiple==="range"?r(i):e.multiple?l(i):s.value=[i]}return()=>m("div",{class:"v-date-picker-month"},[e.showWeek&&m("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&m("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[N("Â ")]),D.value.map(i=>m("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[i]))]),m(Y,{name:M.value},{default:()=>{var i;return[m("div",{ref:f,key:(i=v.value[0].date)==null?void 0:i.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&c.getWeekdays(e.firstDayOfWeek).map(t=>m("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[t])),v.value.map((t,k)=>{const g={props:{onClick:()=>y(t.date)},item:t,i:k};return n.value&&!t.isSelected&&(t.isDisabled=!0),m("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":t.isAdjacent,"v-date-picker-month__day--hide-adjacent":t.isHidden,"v-date-picker-month__day--selected":t.isSelected,"v-date-picker-month__day--week-end":t.isWeekEnd,"v-date-picker-month__day--week-start":t.isWeekStart}],"data-v-date":t.isDisabled?void 0:t.isoDate},[(e.showAdjacentMonths||!t.isAdjacent)&&m(L,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(t.isSelected||t.isToday)&&!t.isDisabled?e.color:void 0,disabled:t.isDisabled,icon:!0,ripple:!1,text:t.localized,variant:t.isDisabled?t.isToday?"outlined":"text":t.isToday&&!t.isSelected?"outlined":"flat",onClick:()=>y(t.date)}}},{default:()=>{var w;return[((w=o.day)==null?void 0:w.call(o,g))??m(R,g.props,null)]}})])})])]}})])}}),Q=A({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...E()},"VLocaleProvider"),se=P()({name:"VLocaleProvider",props:Q(),setup(e,a){let{slots:d}=a;const{rtlClasses:o}=T(e);return F(()=>{var f;return m("div",{class:["v-locale-provider",o.value,e.class],style:e.style},[(f=d.default)==null?void 0:f.call(d)])}),{}}});export{se as V,le as a};
