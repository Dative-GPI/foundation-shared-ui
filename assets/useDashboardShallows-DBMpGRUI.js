var P=Object.defineProperty;var v=(o,s,e)=>s in o?P(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e;var t=(o,s,e)=>v(o,typeof s!="symbol"?s+"":s,e);import{C as y}from"./base-TJZSgE4h.js";import{t as g,a as h,b as u,c,D as w,W as I}from"./dashboardTranslation-YYcr6rlG.js";import{P as E}from"./pathCrumb-Db-cq5HI.js";import{S as r}from"./serviceFactory-Bd5jifNi.js";import{C as n}from"./composableFactory-Bs2ItKgK.js";class S{constructor(s){t(this,"hiddenCode");t(this,"startDate");t(this,"endDate");t(this,"useAutoRefresh");t(this,"autoRefresh");this.hiddenCode=s.hiddenCode,this.startDate=s.startDate,this.endDate=s.endDate,this.useAutoRefresh=s.useAutoRefresh,this.autoRefresh=s.autoRefresh}}class L{constructor(s){t(this,"hiddenCode");t(this,"singleEntity");t(this,"selectedEntities");t(this,"entitiesFilters");t(this,"entitiesIds");this.hiddenCode=s.hiddenCode,this.singleEntity=s.singleEntity,this.selectedEntities=s.selectedEntities,this.entitiesFilters=s.entitiesFilters,this.entitiesIds=s.entitiesIds.slice()}}class R{constructor(s){t(this,"hiddenCode");t(this,"value");this.hiddenCode=s.hiddenCode,this.value=s.value}}class b{constructor(s){t(this,"id");t(this,"organisationId");t(this,"dashboardOrganisationTypeId");t(this,"dashboardOrganisationTypeLabel");t(this,"folderId");t(this,"folderLabel");t(this,"folderIcon");t(this,"imageId");t(this,"label");t(this,"code");t(this,"icon");t(this,"tags");t(this,"colors");t(this,"dashboardId");t(this,"scope");this.id=s.id,this.organisationId=s.organisationId,this.dashboardOrganisationTypeId=s.dashboardOrganisationTypeId,this.dashboardOrganisationTypeLabel=s.dashboardOrganisationTypeLabel,this.folderId=s.folderId,this.folderLabel=s.folderLabel,this.folderIcon=s.folderIcon,this.imageId=s.imageId,this.label=s.label,this.code=s.code,this.icon=s.icon,this.tags=s.tags.slice(),this.colors=s.colors.slice(),this.dashboardId=s.dashboardId,this.scope=s.scope}}class a extends b{constructor(e){super(e);t(this,"labelDefault");t(this,"translations");t(this,"path");t(this,"widgets");t(this,"defaultEntityPresetCode");t(this,"defaultDatePresetCode");t(this,"defaultVariableCode");t(this,"defaultDatePresets");t(this,"defaultEntityPresets");t(this,"defaultVariables");t(this,"overrideEntityPresetCode");t(this,"overrideDatePresetCode");t(this,"overrideVariableCode");t(this,"overrideDatePresets");t(this,"overrideEntityPresets");t(this,"overrideVariables");this.labelDefault=e.labelDefault,this.path=e.path.map(i=>new E(i)).sort((i,d)=>d.index-i.index),this.translations=e.translations.map(i=>new w(i)),this.widgets=e.widgets.map(i=>new I(i)),this.overrideEntityPresetCode=e.overrideEntityPresetCode,this.overrideDatePresetCode=e.overrideDatePresetCode,this.overrideVariableCode=e.overrideVariableCode,this.overrideDatePresets=e.overrideDatePresets.map(i=>new S(i)),this.overrideEntityPresets=e.overrideEntityPresets.map(i=>new L(i)),this.overrideVariables=e.overrideVariables.map(i=>new R(i)),this.defaultEntityPresetCode=e.entityPresetCode,this.defaultDatePresetCode=e.datePresetCode,this.defaultVariableCode=e.variableCode,this.defaultDatePresets=e.datePresets.map(i=>new h(i)),this.defaultEntityPresets=e.entityPresets.map(i=>new u(i)),this.defaultVariables=e.variables.map(i=>new c(i))}get label(){return g(this.translations,e=>e.label,this.labelDefault)}get entityPresetCode(){return this.overrideEntityPresetCode??this.defaultEntityPresetCode}get datePresetCode(){return this.overrideDatePresetCode??this.defaultDatePresetCode}get variableCode(){return this.overrideVariableCode??this.defaultVariableCode}get datePresets(){return this.defaultDatePresets.map(e=>{const i=this.overrideDatePresets.find(d=>d.hiddenCode===e.hiddenCode);return i?new h({...e,...i}):e})}get entityPresets(){return this.defaultEntityPresets.map(e=>{const i=this.overrideEntityPresets.find(d=>d.hiddenCode===e.hiddenCode);return i?new u({...e,...i}):e})}get variables(){return this.defaultVariables.map(e=>{const i=this.overrideVariables.find(d=>d.hiddenCode===e.hiddenCode);return i?new c({...e,...i}):e})}}const f=()=>`${y()}/dashboard-shallows`,l=o=>`${f()}/${encodeURIComponent(o)}`,V=o=>`${l(o)}/folder`,C=new r("dashboardShallow",a).createComplete(f,l,b),D=new r("dashboardShallow",a).create(o=>o.build(o.addNotify(s=>({...r.addCustom("duplicate",(e,i)=>e.patch(l(i)),e=>{const i=new a(e);return s.notify("update",i),i}),...r.addCustom("changeFolder",(e,i,d)=>e.put(V(i),d),e=>{const i=new a(e);return s.notify("update",i),i})})))),U=n.get(C),W=n.getMany(C);n.custom(D.duplicate);n.custom(D.changeFolder);export{U as a,W as u};
