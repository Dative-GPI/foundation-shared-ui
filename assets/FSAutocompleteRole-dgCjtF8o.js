import{d as k,c as p,y as F,z as b,A as h,B as r,m as D,E as M,G as _,D as w,L as d,M as I,P as L}from"./vue.esm-bundler-DjjVIdVI.js";import{F as P}from"./FSAutocompleteField-DOTJQYwk.js";import{F as V}from"./FSButton-P9SybKcj.js";import{F as U}from"./FSChip-Cp6DW4fA.js";import{F as S}from"./FSIcon-DCIvejCK.js";import{u as E}from"./useRoleOrganisationTypes-Da7CUSXo.js";import{u as j}from"./useRoleOrganisations-D2xuri2b.js";import{u as z}from"./useAutocomplete-BGpKVulV.js";import{C as m}from"./useColors-C-2usiDI.js";import{u as T}from"./useTranslations-f9CWAvtI.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";var l=(e=>(e[e.None=0]="None",e[e.Organisation=1]="Organisation",e[e.OrganisationType=2]="OrganisationType",e))(l||{});const{$tr:c}=T(),W=e=>{switch(e){case l.None:return c("ui.role-type.none","None");case l.Organisation:return c("ui.role-type.organisation","Custom");case l.OrganisationType:return c("ui.role-type.organisation-type","Shared")}},H=e=>{switch(e){case l.None:return m.Error;case l.Organisation:return m.Primary;case l.OrganisationType:return m.Warning}},C=k({name:"FSAutocompleteRole",components:{FSAutocompleteField:P,FSButton:V,FSChip:U,FSIcon:S},props:{roleOrganisationTypeFilters:{type:Object,required:!1,default:null},roleOrganisationFilters:{type:Object,required:!1,default:null},modelValue:{type:[Array,String],required:!1,default:null},type:{type:[Array,Number],required:!1,default:l.None},ignoreRoleOrganisationTypes:{type:Boolean,required:!1,default:!1},ignoreRoleOrganisations:{type:Boolean,required:!1,default:!1},multiple:{type:Boolean,required:!1,default:!1},toggleSetDisabled:{type:Boolean,required:!1,default:!1}},emits:["update:modelValue","update:type"],setup(e,{emit:n}){const{getMany:f,fetching:g,entities:y}=E(),{getMany:O,fetching:i,entities:s}=j(),{$tr:a}=T(),u=p(()=>y.value.map(o=>({id:o.id,icon:o.icon,label:o.label,type:l.OrganisationType})).concat(s.value.map(o=>({id:o.id,icon:o.icon,label:o.label,type:l.Organisation})))),q=p(()=>$.value&&(g.value||i.value)),R=p(()=>e.multiple&&e.modelValue?a("ui.autocomplete-role.placeholder","{0} role(s) selected",e.modelValue.length):null),A=o=>{Array.isArray(o)?(n("update:modelValue",o.map(t=>t.id)),n("update:type",o.map(t=>t.type))):(n("update:modelValue",o==null?void 0:o.id),n("update:type",o==null?void 0:o.type))},N=o=>{const t=[];return e.ignoreRoleOrganisations||t.push(O({...e.roleOrganisationFilters,search:o??void 0})),e.ignoreRoleOrganisationTypes||t.push(f({...e.roleOrganisationTypeFilters,search:o??void 0})),Promise.all(t)},{toggleSet:v,init:$,onUpdate:B}=z(u,[()=>e.roleOrganisationTypeFilters,()=>e.roleOrganisationFilters],n,N,A);return{placeholder:R,toggleSet:v,RoleType:l,loading:q,roles:u,roleTypeColor:H,roleTypeLabel:W,onUpdate:B}}});function J(e,n,f,g,y,O){const i=F("FSChip"),s=F("FSAutocompleteField");return b(),h(s,D({toggleSet:!e.$props.toggleSetDisabled&&e.toggleSet,multiple:e.$props.multiple,placeholder:e.placeholder,loading:e.loading,items:e.roles,modelValue:e.$props.modelValue,"onUpdate:modelValue":e.onUpdate},e.$attrs),{"item-prepend":r(({item:a})=>[a.icon?(b(),h(S,{key:0},{default:r(()=>[M(_(a.icon),1)]),_:2},1024)):w("",!0)]),"item-append":r(({item:a})=>[d(i,{color:e.roleTypeColor(a.type),label:e.roleTypeLabel(a.type),editable:!1},null,8,["color","label"])]),"toggle-set-item":r(a=>[d(V,{prependIcon:a.item.icon,variant:a.getVariant(a.item),color:a.getColor(a.item),class:L(a.getClass(a.item)),label:a.item.label,onClick:u=>a.toggle(a.item)},I({_:2},[a.item.type?{name:"append",fn:r(()=>[d(i,{color:e.roleTypeColor(a.item.type),label:e.roleTypeLabel(a.item.type),editable:!1},null,8,["color","label"])]),key:"0"}:void 0]),1032,["prependIcon","variant","color","class","label","onClick"])]),_:1},16,["toggleSet","multiple","placeholder","loading","items","modelValue","onUpdate:modelValue"])}const ne=G(C,[["render",J]]);C.__docgenInfo={displayName:"FSAutocompleteRole",exportName:"default",description:"",tags:{},props:[{name:"roleOrganisationTypeFilters",type:{name:"RoleOrganisationTypeFilters"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"roleOrganisationFilters",type:{name:"RoleOrganisationFilters"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"modelValue",type:{name:"string[] | string | null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"type",type:{name:"RoleType[] | RoleType"},required:!1,defaultValue:{func:!1,value:"RoleType.None"}},{name:"ignoreRoleOrganisationTypes",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"ignoreRoleOrganisations",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"multiple",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"toggleSetDisabled",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}}],events:[{name:"update:modelValue"},{name:"update:type"}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/core/foundation-core-components/components/autocompletes/FSAutocompleteRole.vue"]};export{ne as F};
