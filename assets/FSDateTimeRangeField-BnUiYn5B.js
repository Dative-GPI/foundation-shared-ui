import{d as B,b as s,c as m,w,A as V,F as U,P as r,C as H,Q as L,D as u,j as O,H as P,I as M,M as F,N as E,O as N}from"./vue.esm-bundler-0BaZj8Cy.js";import{F as j}from"./FSDialogSubmit-CCgJn-0t.js";import{F as I}from"./FSCalendarTwin-DsfvCRSm.js";import{F as y}from"./FSTextField-B8oyUUoT.js";import{F as S}from"./FSButton-BDSx2V0J.js";import{F as z}from"./FSClock-DrYA6bZH.js";import{F as f}from"./FSCol-D35grUmj.js";import{_ as C}from"./FSRow-CAJM3FZ0.js";import{C as b}from"./useColors-SBQj5l4a.js";import{u as Q}from"./useAppTimeZone-DjPZmopE.js";import{u as Z}from"./useDateFormat-BwdEXDwr.js";import{u as G}from"./useRules-B-2YsFdr.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const h=B({name:"FSDateTimeRangeField",components:{FSDialogSubmit:j,FSCalendarTwin:I,FSTextField:y,FSButton:S,FSClock:z,FSCol:f,FSRow:C},props:{label:{type:String,required:!1,default:null},description:{type:String,required:!1,default:null},modelValue:{type:Array,required:!1,default:()=>null},color:{type:String,required:!1,default:b.Primary},hideHeader:{type:Boolean,required:!1,default:!1},required:{type:Boolean,required:!1,default:!1},rules:{type:Array,required:!1,default:()=>[]},editable:{type:Boolean,required:!1,default:!0}},emits:["update:modelValue"],setup(e,{emit:o}){const{getUserOffset:i}=Q(),{epochToShortTimeFormat:v}=Z(),{validateOn:c,getMessages:g}=G(),t=s(!1),l=s(null),n=s(0),a=s(0),d=m(()=>!e.modelValue||!Array.isArray(e.modelValue)||!e.modelValue.length?"":e.modelValue.map(A=>v(A)).join(" - ")),p=m(()=>l.value&&Array.isArray(l.value)&&l.value.length?l.value[0]:null),$=m(()=>l.value&&Array.isArray(l.value)&&l.value.length>1?l.value[1]:null),q=m(()=>g(e.modelValue,e.rules,!0)),T=()=>{e.editable&&(t.value=!0)},D=()=>{o("update:modelValue",null),a.value=0,n.value=0,l.value=null},k=()=>{l.value&&Array.isArray(l.value)&&l.value.length>1&&o("update:modelValue",[l.value[0]+a.value,l.value[1]+n.value]),t.value=!1},R=()=>{if(e.modelValue&&Array.isArray(e.modelValue))switch(e.modelValue.length){case 0:break;case 1:{a.value=Math.floor((e.modelValue[0]+i(e.modelValue[0]))%(24*60*60*1e3)),l.value=[e.modelValue[0]-a.value];break}default:{a.value=Math.floor((e.modelValue[0]+i(e.modelValue[0]))%(24*60*60*1e3)),n.value=Math.floor((e.modelValue[1]+i(e.modelValue[1]))%(24*60*60*1e3)),l.value=[e.modelValue[0]-a.value,e.modelValue[1]-n.value];break}}else l.value=null,a.value=0,n.value=0};return w(()=>e.modelValue,()=>{R()},{immediate:!0}),{toShortTimeFormat:d,innerDateLeft:p,innerTimeLeft:a,innerDateRight:$,innerTimeRight:n,innerDateRange:l,validateOn:c,ColorEnum:b,messages:q,dialog:t,onSubmit:k,onClear:D,onClick:T}}});function K(e,o,i,v,c,g){const t=V("FSCalendarTwin"),l=V("FSClock"),n=V("FSDialogSubmit");return M(),U(P,null,[r(y,O({class:"fs-date-field",label:e.$props.label,description:e.$props.description,color:e.$props.color,hideHeader:e.$props.hideHeader,required:e.$props.required,editable:e.$props.editable,readonly:!0,rules:e.$props.rules,messages:e.messages,validateOn:e.validateOn,validationValue:e.$props.modelValue,modelValue:e.toShortTimeFormat,onClick:e.onClick,"onUpdate:modelValue":e.onClear},e.$attrs),H({"prepend-inner":u(()=>[F(e.$slots,"prepend-inner",{},()=>[r(S,{variant:"icon",icon:"mdi-calendar",editable:e.$props.editable,color:e.ColorEnum.Dark},null,8,["editable","color"])])]),_:2},[L(e.$slots,(a,d)=>({name:d,fn:u(p=>[F(e.$slots,d,E(N(p)))])}))]),1040,["label","description","color","hideHeader","required","editable","rules","messages","validateOn","validationValue","modelValue","onClick","onUpdate:modelValue"]),r(n,{title:e.$props.label,submitButtonColor:e.$props.color,"onClick:submitButton":e.onSubmit,modelValue:e.dialog,"onUpdate:modelValue":o[3]||(o[3]=a=>e.dialog=a)},{body:u(()=>[r(f,null,{default:u(()=>[r(t,{color:e.$props.color,modelValue:e.innerDateRange,"onUpdate:modelValue":o[0]||(o[0]=a=>e.innerDateRange=a)},null,8,["color","modelValue"]),r(C,null,{default:u(()=>[r(f,null,{default:u(()=>[r(l,{color:e.$props.color,date:e.innerDateLeft,modelValue:e.innerTimeLeft,"onUpdate:modelValue":o[1]||(o[1]=a=>e.innerTimeLeft=a)},null,8,["color","date","modelValue"])]),_:1}),r(f,null,{default:u(()=>[r(l,{color:e.$props.color,date:e.innerDateRight,modelValue:e.innerTimeRight,"onUpdate:modelValue":o[2]||(o[2]=a=>e.innerTimeRight=a)},null,8,["color","date","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","submitButtonColor","onClick:submitButton","modelValue"])],64)}const ie=J(h,[["render",K]]);h.__docgenInfo={displayName:"FSDateTimeRangeField",exportName:"default",description:"",tags:{},props:[{name:"label",type:{name:"string | null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"description",type:{name:"string | null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"modelValue",type:{name:"number[] | null"},required:!1,defaultValue:{func:!0,value:"() => null"}},{name:"color",type:{name:"ColorBase"},required:!1,defaultValue:{func:!1,value:"ColorEnum.Primary"}},{name:"hideHeader",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"required",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"rules",type:{name:"any[]"},required:!1,defaultValue:{func:!0,value:"() => []"}},{name:"editable",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"true"}}],events:[{name:"update:modelValue"}],slots:[{name:"prepend-inner"},{name:"name",scoped:!0,bindings:[{name:"name",title:"binding"}]}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/shared/foundation-shared-components/components/fields/FSDateTimeRangeField.vue"]};export{ie as F};
