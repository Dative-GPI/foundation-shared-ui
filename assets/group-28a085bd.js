import{u as V}from"./proxiedModel-e633c715.js";import{p as I,g as B,x as b,e as h,m as w,w as E,r as P,o as U,H as k,u as A}from"./vue.esm-bundler-3386cb71.js";import{p as y,a as C,s as M,d as $,w as q,t as F}from"./theme-620a0d92.js";const z=y({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),D=y({value:null,disabled:Boolean,selectedClass:String},"group-item");function J(s,o){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const e=C("useGroupItem");if(!e)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const t=M();I(Symbol.for(`${o.description}:id`),t);const l=B(o,null);if(!l){if(!r)return l;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${o.description}`)}const m=b(s,"value"),p=h(()=>!!(l.disabled.value||s.disabled));l.register({id:t,value:m,disabled:p},e),w(()=>{l.unregister(t)});const f=h(()=>l.isSelected(t)),v=h(()=>f.value&&[l.selectedClass.value,s.selectedClass]);return E(f,g=>{e.emit("group:selected",{value:g})},{flush:"sync"}),{id:t,isSelected:f,toggle:()=>l.select(t,!f.value),select:g=>l.select(t,g),selectedClass:v,value:m,disabled:p,group:l}}function L(s,o){let r=!1;const e=P([]),t=V(s,"modelValue",[],n=>n==null?[]:S(e,q(n)),n=>{const i=N(e,n);return s.multiple?i:i[0]}),l=C("useGroup");function m(n,i){const d=n,u=Symbol.for(`${o.description}:id`),c=F(u,l==null?void 0:l.vnode).indexOf(i);A(d.value)==null&&(d.value=c,d.useIndexAsValue=!0),c>-1?e.splice(c,0,d):e.push(d)}function p(n){if(r)return;f();const i=e.findIndex(d=>d.id===n);e.splice(i,1)}function f(){const n=e.find(i=>!i.disabled);n&&s.mandatory==="force"&&!t.value.length&&(t.value=[n.id])}U(()=>{f()}),w(()=>{r=!0}),k(()=>{for(let n=0;n<e.length;n++)e[n].useIndexAsValue&&(e[n].value=n)});function v(n,i){const d=e.find(u=>u.id===n);if(!(i&&(d!=null&&d.disabled)))if(s.multiple){const u=t.value.slice(),a=u.findIndex(G=>G===n),c=~a;if(i=i??!c,c&&s.mandatory&&u.length<=1||!c&&s.max!=null&&u.length+1>s.max)return;a<0&&i?u.push(n):a>=0&&!i&&u.splice(a,1),t.value=u}else{const u=t.value.includes(n);if(s.mandatory&&u)return;t.value=i??!u?[n]:[]}}function g(n){if(s.multiple,t.value.length){const i=t.value[0],d=e.findIndex(c=>c.id===i);let u=(d+n)%e.length,a=e[u];for(;a.disabled&&u!==d;)u=(u+n)%e.length,a=e[u];if(a.disabled)return;t.value=[e[u].id]}else{const i=e.find(d=>!d.disabled);i&&(t.value=[i.id])}}const x={register:m,unregister:p,selected:t,select:v,disabled:b(s,"disabled"),prev:()=>g(e.length-1),next:()=>g(1),isSelected:n=>t.value.includes(n),selectedClass:h(()=>s.selectedClass),items:h(()=>e),getItemIndex:n=>H(e,n)};return I(o,x),x}function H(s,o){const r=S(s,[o]);return r.length?s.findIndex(e=>e.id===r[0]):-1}function S(s,o){const r=[];return o.forEach(e=>{const t=s.find(m=>$(e,m.value)),l=s[e];(t==null?void 0:t.value)!=null?r.push(t.id):l!=null&&r.push(l.id)}),r}function N(s,o){const r=[];return o.forEach(e=>{const t=s.findIndex(l=>l.id===e);if(~t){const l=s[t];r.push(l.value!=null?l.value:t)}}),r}export{z as a,L as b,D as m,J as u};
