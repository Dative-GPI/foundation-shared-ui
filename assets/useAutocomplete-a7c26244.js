import{d as f,e as D,w as c,o as E}from"./vue.esm-bundler-41eda46b.js";import{_ as L}from"./lodash-569b8a6d.js";import{u as M}from"./useDebounce-c713d9ff.js";const j=(n,p,g,i,t=null,d=a=>a.id,h=a=>a.label,b=!1,A=!0,w=5,y=1e3)=>{const{debounce:a}=M(),l=f(null),v=f(0),s=f(!0),q=D(()=>A&&v.value<=w),m=()=>a(()=>i(l.value),y),x=e=>{if(t)if(Array.isArray(e)){const u=e.map(o=>n.value.find(r=>d(r)===o)||null).filter(o=>o!==null);t(u)}else t(e&&n.value.find(u=>d(u)===e)||null);else g("update:modelValue",e)};return c(p,(e,u)=>{L.isEqual(e,u)||m()}),c(l,(e,u)=>{e!==u&&b&&!n.value.map(r=>h(r)).includes(l.value)&&(!l.value||!l.value.length||l.value.length>2)&&m()}),c(n,()=>{s.value&&(s.value=!1,v.value=n.value.length)}),E(()=>{i(l.value)}),{toggleSet:q,search:l,init:s,onUpdate:x}};export{j as u};
