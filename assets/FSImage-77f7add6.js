import{d as i,f as u,E as R,e as l,o as I,H,I as _,J as F,A as S,z as N}from"./vue.esm-bundler-a27e881e.js";import{G as $}from"./base-5094c3fa.js";import{S as o}from"./serviceFactory-25228cba.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";import{V as b}from"./VImg-06cc8851.js";import{V as B}from"./VSkeletonLoader-4438a914.js";class f{constructor(t){this.blurHash=t.blurHash,this.width=t.width,this.height=t.height}}const d=()=>`${$()}/images`,q=()=>`${d()}/raw`,U=e=>`${q()}/${encodeURIComponent(e)}`,L=()=>`${d()}/blurHash`,V=e=>`${L()}/${encodeURIComponent(e)}`,m=new o("image",f).create(e=>e.build(e.addNotify(()=>({getRaw:async t=>(await o.http.get(U(t))).data,getBlurHash:async t=>{const a=await o.http.get(V(t));return new f(a.data)}})))),E=()=>{const e=m(),t=i(!1),a=i(null),n=async s=>{t.value=!0;try{a.value=await e.getRaw(s)}finally{t.value=!1}return u(a)};return{fetching:u(t),fetch:n,fetched:u(a)}},G=()=>{const e=m(),t=i(!1),a=i(null),n=async s=>{t.value=!0;try{a.value=await e.getBlurHash(s)}finally{t.value=!1}return u(a)};return{fetching:u(t),fetch:n,fetched:u(a)}},g=R({name:"FSImage",props:{imageId:{type:String,required:!0},cover:{type:Boolean,required:!1,default:!0},width:{type:Number,required:!1,default:null},height:{type:Number,required:!1,default:null},aspectRatio:{type:String,required:!1,default:null}},setup(e){const{fetching:t,fetch:a,fetched:n}=E(),{fetching:s,fetch:c,fetched:h}=G(),p=l(()=>{if(e.width)return e.width;if(e.height){if(e.aspectRatio){const r=e.aspectRatio.split("/");if(r.length===2&&!isNaN(parseFloat(r[0]))&&!isNaN(parseFloat(r[1])))return e.height*(parseFloat(r[0])/parseFloat(r[1]))}return e.height}return 0}),v=l(()=>{if(e.height)return e.height;if(e.width){if(e.aspectRatio){const r=e.aspectRatio.split("/");if(r.length===2&&!isNaN(parseFloat(r[0]))&&!isNaN(parseFloat(r[1])))return e.width*(parseFloat(r[1])/parseFloat(r[0]))}return e.width}return 0}),w=l(()=>t.value?null:n.value?n.value:s.value?null:h.value?h.value.blurHash:null);I(()=>{y()});const y=async()=>{await a(e.imageId),n.value||await c(e.imageId)};return{source:w,computedWidth:p,computedHeight:v}}});function M(e,t,a,n,s,c){return H(),_(b,S({class:"fs-image",src:e.source,cover:e.$props.cover,width:e.computedWidth,height:e.computedHeight},e.$attrs),{placeholder:F(()=>[N(B,{type:"image"})]),_:1},16,["src","cover","width","height"])}const T=A(g,[["render",M]]);g.__docgenInfo={displayName:"FSImage",exportName:"default",description:"",tags:{},props:[{name:"imageId",type:{name:"string"},required:!0},{name:"cover",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"true"}},{name:"width",type:{name:"number"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"height",type:{name:"number"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"aspectRatio",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"null"}}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/shared/foundation-shared-components/components/FSImage.vue"]};export{T as F};
