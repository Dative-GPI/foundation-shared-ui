import{j as g,e as y,I as M,J as c,K as i,L as u,N as h,U as l,V as m}from"./vue.esm-bundler-7c237656.js";import{F as P}from"./FSText-fda370f0.js";import{F as S}from"./FSSwitch-28fd68a6.js";import{F as k}from"./FSIconField-5f485d9d.js";import{F as N}from"./FSSelectField-96856ed9.js";import{F as b}from"./FSDateTimeField-39a88a14.js";import{u as p}from"./useAppTimeZone-62c4f11c.js";import{P as n}from"./customPropertyEnums-7823143c.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as w}from"./FSIcon-5ad13b7e.js";var a=(e=>(e[e.None=0]="None",e[e.Equal=1]="Equal",e[e.More=2]="More",e[e.Less=3]="Less",e[e.MoreOrEqual=4]="MoreOrEqual",e[e.LessOrEqual=5]="LessOrEqual",e[e.Different=6]="Different",e[e.Contains=7]="Contains",e[e.StartsWith=8]="StartsWith",e[e.EndsWith=9]="EndsWith",e))(a||{});const{getUserOffsetMillis:F,getMachineOffsetMillis:$}=p(),V=(e,t)=>{if(e.colorful)for(const o of[...e.colorMap].sort((s,r)=>r.priority-s.priority)){let s=[...o.filterValues];switch([n.DateTime].includes(e.dataType)&&(s=s.map(r=>q(r))),o.filterType){case a.None:return o.color;case a.Equal:{if(s.includes(t))return o.color;break}case a.More:{if(!isNaN(parseFloat(t))&&s.some(r=>!isNaN(parseFloat(r))&&parseFloat(r)<parseFloat(t)))return o.color;break}case a.Less:{if(!isNaN(parseFloat(t))&&s.some(r=>!isNaN(parseFloat(r))&&parseFloat(r)>parseFloat(t)))return o.color;break}case a.MoreOrEqual:{if(!isNaN(parseFloat(t))&&s.some(r=>!isNaN(parseFloat(r))&&parseFloat(r)<=parseFloat(t)))return o.color;break}case a.LessOrEqual:{if(!isNaN(parseFloat(t))&&s.some(r=>!isNaN(parseFloat(r))&&parseFloat(r)>=parseFloat(t)))return o.color;break}case a.Different:{if(!s.includes(t))return o.color;break}case a.Contains:{if(s.some(r=>t.includes(r)))return o.color;break}case a.StartsWith:{if(s.some(r=>t.startsWith(r)))return o.color;break}case a.EndsWith:{if(s.some(r=>t.endsWith(r)))return o.color;break}}}},q=e=>{if(!isNaN(parseInt(e)))return e;let t=new Date;if(e.startsWith("now"))e=e.substring(3).replace(/\s/g,"");else return t.getTime().toString();let o=/^(?:(?:([-\+])(\d*))?(\w+))?(?:\/(\w))?/g.exec(e);for(;o!=null&&o[0]!=null&&o[0].length>0;){if(o[1]!=null&&o[3]!=null){if(!["-","+"].includes(o[1])||isNaN(parseInt(o[2]))||!["s","m","h","d","w","M","y"].includes(o[3]))return t.getTime().toString();let s=o[1]=="-"?-1*parseInt(o[2]):1*parseInt(o[2]);switch(o[3]){case"s":{t.setSeconds(t.getSeconds()+s);break}case"m":t.setMinutes(t.getMinutes()+s);case"h":{t.setHours(t.getHours()+s);break}case"d":{t.setDate(t.getDate()+s);break}case"w":{t.setDate(t.getDate()+s*7);break}case"M":{t.setMonth(t.getMonth()+s);break}case"y":{t.setFullYear(t.getFullYear()+s);break}}}if(o[4]!=null){if(!["s","m","h","d","w","M","y"].includes(o[4]))return t.getTime().toString();switch(o[4]){case"s":{t.setMilliseconds(0);break}case"m":{t.setMilliseconds(0),t.setSeconds(0);break}case"h":{t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0);break}case"d":{t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0);break}case"w":{t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t.setDate(t.getDate()-t.getDay()+(t.getDay()===0?-6:1));break}case"M":{t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t.setDate(1);break}case"y":{t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t.setDate(1),t.setMonth(0);break}}}e=e.substring(o[0].length),o=/(?:(?:([-\+])(\d*))?(\w+))?(?:\/(\w))?/g.exec(e)}return(t.getTime()+$()-F()).toString()},f=g({name:"FSMetaValue",components:{FSDateTimeField:b,FSSelectField:N,FSIconField:k,FSSwitch:S,FSText:P},props:{customProperty:{type:Object,required:!0},meta:{type:Object,required:!0}},setup(e){const{epochToLongTimeFormat:t}=p(),o=y(()=>{var s;if(e.customProperty.useOnlyAllowedValues&&e.customProperty.allowedValues[e.meta[e.customProperty.code]]!=null)return e.customProperty.allowedValues[e.meta[e.customProperty.code]];switch(e.customProperty.dataType){case n.Boolean:return((s=e.meta[e.customProperty.code])==null?void 0:s.toLowerCase())==="true"?"mdi-check-circle-outline":"mdi-close-circle-outline";case n.DateTime:return t(parseInt(e.meta[e.customProperty.code]));default:return e.meta[e.customProperty.code]}});return{PropertyDataType:n,getColor:V,value:o}}});function C(e,t,o,s,r,E){const d=M("FSText");return e.$props.customProperty.useOnlyAllowedValues&&e.$props.customProperty.allowedValues[e.meta[e.$props.customProperty.code]]!=null?(c(),i(d,{key:0,color:e.getColor(e.$props.customProperty,e.meta[e.$props.customProperty.code])},{default:u(()=>[l(m(e.value),1)]),_:1},8,["color"])):[e.PropertyDataType.Number,e.PropertyDataType.String,e.PropertyDataType.DateTime].includes(e.$props.customProperty.dataType)?(c(),i(d,{key:1,color:e.getColor(e.$props.customProperty,e.meta[e.$props.customProperty.code])},{default:u(()=>[l(m(e.value),1)]),_:1},8,["color"])):[e.PropertyDataType.Boolean,e.PropertyDataType.Icon].includes(e.$props.customProperty.dataType)?(c(),i(w,{key:2,color:e.getColor(e.$props.customProperty,e.meta[e.$props.customProperty.code])},{default:u(()=>[l(m(e.value),1)]),_:1},8,["color"])):h("",!0)}const Y=D(f,[["render",C]]);f.__docgenInfo={displayName:"FSMetaValue",exportName:"default",description:"",tags:{},props:[{name:"customProperty",type:{name:"CustomPropertyInfos"},required:!0},{name:"meta",type:{name:"{ [key: string]: string }"},required:!0}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/core/foundation-core-components/components/customProperties/FSMetaValue.vue"]};export{Y as F,a};
