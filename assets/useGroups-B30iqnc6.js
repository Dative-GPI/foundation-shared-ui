var g=Object.defineProperty;var h=(i,e,t)=>e in i?g(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var s=(i,e,t)=>h(i,typeof e!="symbol"?e+"":e,t);import{P as p}from"./pathCrumb-Db-cq5HI.js";import{C as v}from"./base-D6U4mRRi.js";import{C as o}from"./composableFactory-DRFDSLtA.js";import{S as u}from"./serviceFactory-aQiBqOvf.js";class I{constructor(e){s(this,"id");s(this,"organisationId");s(this,"parentId");s(this,"imageId");s(this,"icon");s(this,"code");s(this,"label");s(this,"tags");s(this,"path");s(this,"groupsIds");s(this,"deviceOrganisationsIds");s(this,"modelsIds");s(this,"recursiveGroupsIds");s(this,"recursiveDeviceOrganisationsIds");s(this,"recursiveModelsIds");this.id=e.id,this.organisationId=e.organisationId,this.parentId=e.parentId,this.imageId=e.imageId,this.icon=e.icon,this.code=e.code,this.label=e.label,this.tags=e.tags,this.path=e.path.map(t=>new p({...t})).sort((t,n)=>n.index-t.index),this.groupsIds=e.groupsIds.slice(),this.deviceOrganisationsIds=e.deviceOrganisationsIds.slice(),this.modelsIds=e.modelsIds.slice(),this.recursiveGroupsIds=e.recursiveGroupsIds.slice(),this.recursiveDeviceOrganisationsIds=e.recursiveDeviceOrganisationsIds.slice(),this.recursiveModelsIds=e.recursiveModelsIds.slice()}}class a extends I{constructor(t){super(t);s(this,"parentIcon");s(this,"parentLabel");this.parentIcon=t.parentIcon,this.parentLabel=t.parentLabel}}const c=()=>`${v()}/groups`,r=i=>`${c()}/${encodeURIComponent(i)}`,d=new u("group",a).create(i=>i.build(i.addGet(r),i.addGetMany(c,I),i.addCreate(c),i.addUpdate(r),i.addRemove(r),i.addNotify(e=>({...u.addCustom("changeParent",(t,n,l)=>t.put(r(n),l),t=>{const n=new a(t);return e.notify("update",n),n})})))),U=o.subscribe(d),m=o.get(d),L=o.getMany(d);o.create(d);o.update(d);o.remove(d);o.custom(d.changeParent);export{m as a,U as b,L as u};
