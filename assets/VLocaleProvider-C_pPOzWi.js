import{c as g,e as x,s as V,w as p,q as c,K as I}from"./vue.esm-bundler-D5n7z5qz.js";import{u as O,g as N}from"./date-BSEkm4c6.js";import{u as W}from"./proxiedModel-Cv3qT1cZ.js";import{w as j,p as A}from"./theme-BcqfMidt.js";import{M as B}from"./transition-gfLL8RoD.js";import{V as C}from"./VDefaultsProvider-CPXI0q_G.js";import{V as T}from"./VBtn-DtRd7_Uc.js";import{g as P,u as Y,m as L}from"./useRender-Dce1Ng4u.js";import{p as R}from"./locale-n4v42L7l.js";const E=A({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:[Number,String]},"calendar");function z(a){const e=O(),m=W(a,"modelValue",[],n=>j(n)),f=g(()=>a.displayValue?e.date(a.displayValue):m.value.length>0?e.date(m.value[0]):a.min?e.date(a.min):Array.isArray(a.allowedDates)?e.date(a.allowedDates[0]):e.date()),w=W(a,"year",void 0,n=>{const s=n!=null?Number(n):e.getYear(f.value);return e.startOfYear(e.setYear(e.date(),s))},n=>e.getYear(n)),h=W(a,"month",void 0,n=>{const s=n!=null?Number(n):e.getMonth(f.value),l=e.setYear(e.startOfMonth(e.date()),e.getYear(w.value));return e.setMonth(l,s)},n=>e.getMonth(n)),i=g(()=>{const n=Number(a.firstDayOfWeek??0);return a.weekdays.map(s=>(s+n)%7)}),S=g(()=>{const n=e.getWeekArray(h.value,a.firstDayOfWeek),s=n.flat(),l=6*7;if(a.weeksInMonth==="static"&&s.length<l){const u=s[s.length-1];let r=[];for(let t=1;t<=l-s.length;t++)r.push(e.addDays(u,t)),t%7===0&&(n.push(r),r=[])}return n});function o(n,s){return n.filter(l=>i.value.includes(e.toJsDate(l).getDay())).map((l,u)=>{const r=e.toISO(l),t=!e.isSameMonth(l,h.value),y=e.isSameDay(l,e.startOfMonth(h.value)),k=e.isSameDay(l,e.endOfMonth(h.value)),D=e.isSameDay(l,h.value);return{date:l,isoDate:r,formatted:e.format(l,"keyboardDate"),year:e.getYear(l),month:e.getMonth(l),isDisabled:M(l),isWeekStart:u%7===0,isWeekEnd:u%7===6,isToday:e.isSameDay(l,s),isAdjacent:t,isHidden:t&&!a.showAdjacentMonths,isStart:y,isSelected:m.value.some(b=>e.isSameDay(l,b)),isEnd:k,isSame:D,localized:e.format(l,"dayOfMonth")}})}const d=g(()=>{const n=e.startOfWeek(f.value,a.firstDayOfWeek),s=[];for(let u=0;u<=6;u++)s.push(e.addDays(n,u));const l=e.date();return o(s,l)}),v=g(()=>{const n=S.value.flat(),s=e.date();return o(n,s)}),_=g(()=>S.value.map(n=>n.length?N(e,n[0]):null));function M(n){if(a.disabled)return!0;const s=e.date(n);return a.min&&e.isAfter(e.date(a.min),s)||a.max&&e.isAfter(s,e.date(a.max))?!0:Array.isArray(a.allowedDates)&&a.allowedDates.length>0?!a.allowedDates.some(l=>e.isSameDay(e.date(l),s)):typeof a.allowedDates=="function"?!a.allowedDates(s):!1}return{displayValue:f,daysInMonth:v,daysInWeek:d,genDays:o,model:m,weeksInMonth:S,weekDays:i,weekNumbers:_}}const F=A({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...E()},"VDatePickerMonth"),ee=P()({name:"VDatePickerMonth",props:F(),emits:{"update:modelValue":a=>!0,"update:month":a=>!0,"update:year":a=>!0},setup(a,e){let{emit:m,slots:f}=e;const w=x(),{daysInMonth:h,model:i,weekNumbers:S}=z(a),o=O(),d=V(),v=V(),_=V(!1),M=g(()=>_.value?a.reverseTransition:a.transition);a.multiple==="range"&&i.value.length>0&&(d.value=i.value[0],i.value.length>1&&(v.value=i.value[i.value.length-1]));const n=g(()=>{const r=["number","string"].includes(typeof a.multiple)?Number(a.multiple):1/0;return i.value.length>=r});p(h,(r,t)=>{t&&(_.value=o.isBefore(r[0].date,t[0].date))});function s(r){const t=o.startOfDay(r);if(i.value.length===0?d.value=void 0:i.value.length===1&&(d.value=i.value[0],v.value=void 0),!d.value)d.value=t,i.value=[d.value];else if(v.value)d.value=r,v.value=void 0,i.value=[d.value];else{if(o.isSameDay(t,d.value)){d.value=void 0,i.value=[];return}else o.isBefore(t,d.value)?(v.value=o.endOfDay(d.value),d.value=t):v.value=o.endOfDay(t);const y=o.getDiff(v.value,d.value,"days"),k=[d.value];for(let D=1;D<y;D++){const b=o.addDays(d.value,D);k.push(b)}k.push(v.value),i.value=k}}function l(r){const t=i.value.findIndex(y=>o.isSameDay(y,r));if(t===-1)i.value=[...i.value,r];else{const y=[...i.value];y.splice(t,1),i.value=y}}function u(r){a.multiple==="range"?s(r):a.multiple?l(r):i.value=[r]}return()=>c("div",{class:"v-date-picker-month"},[a.showWeek&&c("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!a.hideWeekdays&&c("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[I("Â ")]),S.value.map(r=>c("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[r]))]),c(B,{name:M.value},{default:()=>{var r;return[c("div",{ref:w,key:(r=h.value[0].date)==null?void 0:r.toString(),class:"v-date-picker-month__days"},[!a.hideWeekdays&&o.getWeekdays(a.firstDayOfWeek).map(t=>c("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[t])),h.value.map((t,y)=>{const k={props:{onClick:()=>u(t.date)},item:t,i:y};return n.value&&!t.isSelected&&(t.isDisabled=!0),c("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":t.isAdjacent,"v-date-picker-month__day--hide-adjacent":t.isHidden,"v-date-picker-month__day--selected":t.isSelected,"v-date-picker-month__day--week-end":t.isWeekEnd,"v-date-picker-month__day--week-start":t.isWeekStart}],"data-v-date":t.isDisabled?void 0:t.isoDate},[(a.showAdjacentMonths||!t.isAdjacent)&&c(C,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(t.isSelected||t.isToday)&&!t.isDisabled?a.color:void 0,disabled:t.isDisabled,icon:!0,ripple:!1,text:t.localized,variant:t.isDisabled?t.isToday?"outlined":"text":t.isToday&&!t.isSelected?"outlined":"flat",onClick:()=>u(t.date)}}},{default:()=>{var D;return[((D=f.day)==null?void 0:D.call(f,k))??c(T,k.props,null)]}})])})])]}})])}}),H=A({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...L()},"VLocaleProvider"),ae=P()({name:"VLocaleProvider",props:H(),setup(a,e){let{slots:m}=e;const{rtlClasses:f}=R(a);return Y(()=>{var w;return c("div",{class:["v-locale-provider",f.value,a.class],style:a.style},[(w=m.default)==null?void 0:w.call(m)])}),{}}});export{ae as V,ee as a};
