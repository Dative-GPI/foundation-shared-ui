var k=Object.defineProperty;var N=(a,e,n)=>e in a?k(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n;var r=(a,e,n)=>N(a,typeof e!="symbol"?e+"":e,n);import{b as g,d as C,c as h,y as T,z as y,A as F,C as f,P as _,N as u,U as V,w,B as x,O as q,m as A,K as z,L as E,M as K}from"./vue.esm-bundler-DTB_q9xr.js";import{F as M,V as G}from"./FSLoader-rPZmak_e.js";import{F as P}from"./FSCol-CYWCfIBP.js";import{_ as p}from"./FSRow-CFFgZ74C.js";import{u as j,C as H}from"./useColors-DTi99Ybi.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as J}from"./VSpacer-Di7g3RCw.js";import{F as Q}from"./FSDataTableUI-BZfbn4zA.js";import{C as W}from"./base-XmH0JLOD.js";import{S as X}from"./serviceFactory-DAEdCiSt.js";import{C as D}from"./composableFactory-CG8osPlO.js";import{u as Y}from"./FSFadeOut-h32PDSwF.js";class Z{constructor(){r(this,"called",!1);r(this,"result",null)}call(e){return this.called?this.result:(this.called=!0,this.result=e(),this.result)}}const v=g({}),ee=new Z,ae=()=>ee.call(()=>({getTable:n=>v.value[n]!=null?v.value[n]:null,setTable:(n,m)=>{v.value[n]={...m}}}));class te{constructor(e){r(this,"columnId");r(this,"text");r(this,"value");r(this,"sortable");r(this,"filterable");r(this,"index");r(this,"hidden");this.columnId=e.columnId,this.text=e.text,this.value=e.value,this.sortable=e.sortable,this.filterable=e.filterable,this.index=e.index,this.hidden=e.hidden}}class le{constructor(e){r(this,"id");r(this,"code");r(this,"columns");r(this,"mode");r(this,"rowsPerPage");r(this,"sortByKey");r(this,"sortByOrder");var n;this.id=e.id,this.code=e.code,this.mode=e.mode,this.rowsPerPage=e.rowsPerPage,this.sortByKey=e.sortByKey,this.sortByOrder=e.sortByOrder,this.columns=((n=e.columns)==null?void 0:n.map(m=>new te(m)))??[]}}class oe extends le{constructor(e){super(e)}}const se=()=>`${W()}/user-organisation-tables`,U=a=>`${se()}/${encodeURIComponent(a)}`,ne=()=>{const a=g(!1),e=g({headers:[],mode:null,sortBy:null,rowsPerPage:10,showFilters:!1,filters:{},page:1});return{initialized:a,table:e,onTableCodeChange:async(o,l,t,s="table")=>{if(t){const d=l(t);if(d)e.value=d;else try{const i=await o(t);i.value&&(e.value={headers:i.value.columns,sortBy:{key:i.value.sortByKey,order:i.value.sortByOrder},mode:i.value.mode??s,rowsPerPage:i.value.rowsPerPage,showFilters:!1,filters:{},page:1})}catch{}}a.value=!0},computeTable:(o,l="table")=>({...e.value,mode:e.value.mode??l,headers:e.value.headers.map(t=>({...t,fixedFilters:t.value&&o[t.value]&&o[t.value].fixedFilters||null,methodFilter:t.value&&o[t.value]&&o[t.value].methodFilter||null,methodFilterRaw:t.value&&o[t.value]&&o[t.value].methodFilterRaw||null,sort:t.value&&o[t.value]&&o[t.value].sort||null,sortRaw:t.value&&o[t.value]&&o[t.value].sortRaw||null,innerValue:t.value&&o[t.value]&&o[t.value].innerValue||null}))}),updateTable:(o,l,t,s="table")=>{var d,i;t&&e.value&&(l(t,e.value),o(t,{columns:e.value.headers.map(c=>({columnId:c.columnId,hidden:c.hidden,index:c.index})),rowsPerPage:e.value.rowsPerPage,sortByKey:((d=e.value.sortBy)==null?void 0:d.key)??null,sortByOrder:((i=e.value.sortBy)==null?void 0:i.order)??null,mode:e.value.mode??s}))}}},I=new X("userOrgansiationTable",oe).create(a=>a.build(a.addGet(U),a.addUpdate(U),a.addNotify())),re=D.get(I),ue=D.update(I),L=C({name:"FSLoadDataTable",components:{FSLoader:M,FSCol:P,FSRow:p},setup(){const{getColors:a}=j(),e=a(H.Background);return{style:h(()=>({"--fs-load-data-table-background-color":e.base}))}}});function ie(a,e,n,m,b,o){const l=T("FSLoader");return y(),F(P,{class:"fs-load-data-table",gap:"16px",style:_(a.style)},{default:f(()=>[u(p,{align:"bottom-center"},{default:f(()=>[u(l,{variant:"input"}),u(l,{variant:"button"}),u(J),u(l,{variant:"button"}),u(l,{variant:"button"})]),_:1}),u(p,null,{default:f(()=>[u(l,{variant:"chip"}),u(l,{variant:"chip"}),u(l,{variant:"chip"})]),_:1}),u(G,{type:"table-row-divider@10"}),u(p,{align:"center-right"},{default:f(()=>[u(l,{height:"16px",width:"100px"}),u(l,{width:"120px",height:["40px","36px"]}),u(l,{variant:"button"}),u(l,{variant:"button"}),u(l,{variant:"button"})]),_:1})]),_:1},8,["style"])}const de=B(L,[["render",ie]]);L.__docgenInfo={displayName:"FSLoadDataTable",exportName:"default",description:"",tags:{},sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/shared/foundation-shared-components/components/lists/FSLoadDataTable.vue"]};const $=C({name:"FSDataTable",components:{FSLoadDataTable:de,FSDataTableUI:Q},props:{defaultMode:{type:String,required:!1,default:"table"},tableCode:{type:String,required:!1,default:null},debounceTime:{type:Number,required:!1,default:1e3},headersOptions:{type:Object,required:!1,default:()=>({})}},setup(a){const{get:e,getting:n}=re(),{initialized:m,table:b,updateTable:o,computeTable:l,onTableCodeChange:t}=ne(),{update:s}=ue(),{getTable:d,setTable:i}=ae(),{debounce:c,cancel:O}=Y(),R=h(()=>l(a.headersOptions,a.defaultMode));V(()=>{O(),S()});const S=()=>{a.tableCode&&o(s,i,a.tableCode,a.defaultMode)};return w(()=>a.tableCode,async()=>{a.tableCode&&t(e,d,a.tableCode,a.defaultMode)},{immediate:!0}),w(()=>b.value,()=>{b.value&&m.value&&c(S,a.debounceTime)},{deep:!0}),{gettingUserOrganisationTable:n,computedTable:R,initialized:m,table:b}}});function me(a,e,n,m,b,o){const l=T("FSLoadDataTable"),t=T("FSDataTableUI");return a.$props.tableCode&&!a.initialized||a.gettingUserOrganisationTable?(y(),F(l,{key:0})):(y(),F(t,A({key:1,"onUpdate:rowsPerPage":e[0]||(e[0]=s=>a.table.rowsPerPage=s),"onUpdate:showFilters":e[1]||(e[1]=s=>a.table.showFilters=s),"onUpdate:filters":e[2]||(e[2]=s=>a.table.filters=s),"onUpdate:headers":e[3]||(e[3]=s=>a.table.headers=s),"onUpdate:sortBy":e[4]||(e[4]=s=>a.table.sortBy=s),"onUpdate:mode":e[5]||(e[5]=s=>a.table.mode=s),"onUpdate:page":e[6]||(e[6]=s=>a.table.page=s)},{...a.computedTable,...a.$attrs}),x({_:2},[q(a.$slots,(s,d)=>({name:d,fn:f(i=>[z(a.$slots,d,E(K(i)))])}))]),1040))}const he=B($,[["render",me]]);$.__docgenInfo={displayName:"FSDataTable",exportName:"default",description:"",tags:{},props:[{name:"defaultMode",values:["table","iterator"],type:{name:"string"},required:!1,defaultValue:{func:!1,value:'"table"'}},{name:"tableCode",type:{name:"string | null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"debounceTime",type:{name:"number"},required:!1,defaultValue:{func:!1,value:"1000"}},{name:"headersOptions",type:{name:"{ [key: string]: Partial<FSDataTableColumn> }"},required:!1,defaultValue:{func:!0,value:"() => ({})"}}],slots:[{name:"name",scoped:!0,bindings:[{name:"name",title:"binding"}]}],sourceFiles:["/home/runner/work/foundation-shared-ui/foundation-shared-ui/src/core/foundation-core-components/components/lists/FSDataTable.vue"]};export{he as F};
