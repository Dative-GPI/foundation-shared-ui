import{c as No,g as hn}from"./_commonjsHelpers-BosuxZz1.js";import{_ as Qt}from"./lodash-BiW_TGGX.js";var en={exports:{}},hs={},Re={},Ct={},Zt={},H={},Yt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(N){if(super(),!e.IDENTIFIER.test(N))throw new Error("CodeGen: name must be a valid identifier");this.str=N}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(N){super(),this._items=typeof N=="string"?[N]:N}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const N=this._items[0];return N===""||N==='""'}get str(){var N;return(N=this._str)!==null&&N!==void 0?N:this._str=this._items.reduce((T,A)=>`${T}${A}`,"")}get names(){var N;return(N=this._names)!==null&&N!==void 0?N:this._names=this._items.reduce((T,A)=>(A instanceof r&&(T[A.str]=(T[A.str]||0)+1),T),{})}}e._Code=n,e.nil=new n("");function a(v,...N){const T=[v[0]];let A=0;for(;A<N.length;)l(T,N[A]),T.push(v[++A]);return new n(T)}e._=a;const s=new n("+");function i(v,...N){const T=[w(v[0])];let A=0;for(;A<N.length;)T.push(s),l(T,N[A]),T.push(s,w(v[++A]));return f(T),new n(T)}e.str=i;function l(v,N){N instanceof n?v.push(...N._items):N instanceof r?v.push(N):v.push($(N))}e.addCodeArg=l;function f(v){let N=1;for(;N<v.length-1;){if(v[N]===s){const T=c(v[N-1],v[N+1]);if(T!==void 0){v.splice(N-1,3,T);continue}v[N++]="+"}N++}}function c(v,N){if(N==='""')return v;if(v==='""')return N;if(typeof v=="string")return N instanceof r||v[v.length-1]!=='"'?void 0:typeof N!="string"?`${v.slice(0,-1)}${N}"`:N[0]==='"'?v.slice(0,-1)+N.slice(1):void 0;if(typeof N=="string"&&N[0]==='"'&&!(v instanceof r))return`"${v}${N.slice(1)}`}function y(v,N){return N.emptyStr()?v:v.emptyStr()?N:i`${v}${N}`}e.strConcat=y;function $(v){return typeof v=="number"||typeof v=="boolean"||v===null?v:w(Array.isArray(v)?v.join(","):v)}function O(v){return new n(w(v))}e.stringify=O;function w(v){return JSON.stringify(v).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=w;function S(v){return typeof v=="string"&&e.IDENTIFIER.test(v)?new n(`.${v}`):a`[${v}]`}e.getProperty=S;function P(v){if(typeof v=="string"&&e.IDENTIFIER.test(v))return new n(`${v}`);throw new Error(`CodeGen: invalid export name: ${v}, use explicit $id name mapping`)}e.getEsmExportName=P;function m(v){return new n(v.toString())}e.regexpCode=m})(Yt);var tn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Yt;class r extends Error{constructor(c){super(`CodeGen: "code" for ${c} not defined`),this.value=c.value}}var n;(function(f){f[f.Started=0]="Started",f[f.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class a{constructor({prefixes:c,parent:y}={}){this._names={},this._prefixes=c,this._parent=y}toName(c){return c instanceof t.Name?c:this.name(c)}name(c){return new t.Name(this._newName(c))}_newName(c){const y=this._names[c]||this._nameGroup(c);return`${c}${y.index++}`}_nameGroup(c){var y,$;if(!(($=(y=this._parent)===null||y===void 0?void 0:y._prefixes)===null||$===void 0)&&$.has(c)||this._prefixes&&!this._prefixes.has(c))throw new Error(`CodeGen: prefix "${c}" is not allowed in this scope`);return this._names[c]={prefix:c,index:0}}}e.Scope=a;class s extends t.Name{constructor(c,y){super(y),this.prefix=c}setValue(c,{property:y,itemIndex:$}){this.value=c,this.scopePath=(0,t._)`.${new t.Name(y)}[${$}]`}}e.ValueScopeName=s;const i=(0,t._)`\n`;class l extends a{constructor(c){super(c),this._values={},this._scope=c.scope,this.opts={...c,_n:c.lines?i:t.nil}}get(){return this._scope}name(c){return new s(c,this._newName(c))}value(c,y){var $;if(y.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const O=this.toName(c),{prefix:w}=O,S=($=y.key)!==null&&$!==void 0?$:y.ref;let P=this._values[w];if(P){const N=P.get(S);if(N)return N}else P=this._values[w]=new Map;P.set(S,O);const m=this._scope[w]||(this._scope[w]=[]),v=m.length;return m[v]=y.ref,O.setValue(y,{property:w,itemIndex:v}),O}getValue(c,y){const $=this._values[c];if($)return $.get(y)}scopeRefs(c,y=this._values){return this._reduceValues(y,$=>{if($.scopePath===void 0)throw new Error(`CodeGen: name "${$}" has no value`);return(0,t._)`${c}${$.scopePath}`})}scopeCode(c=this._values,y,$){return this._reduceValues(c,O=>{if(O.value===void 0)throw new Error(`CodeGen: name "${O}" has no value`);return O.value.code},y,$)}_reduceValues(c,y,$={},O){let w=t.nil;for(const S in c){const P=c[S];if(!P)continue;const m=$[S]=$[S]||new Map;P.forEach(v=>{if(m.has(v))return;m.set(v,n.Started);let N=y(v);if(N){const T=this.opts.es5?e.varKinds.var:e.varKinds.const;w=(0,t._)`${w}${T} ${v} = ${N};${this.opts._n}`}else if(N=O==null?void 0:O(v))w=(0,t._)`${w}${N}${this.opts._n}`;else throw new r(v);m.set(v,n.Completed)})}return w}}e.ValueScope=l})(tn);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Yt,r=tn;var n=Yt;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var a=tn;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return a.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return a.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return a.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return a.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(o,h){return this}}class i extends s{constructor(o,h,C){super(),this.varKind=o,this.name=h,this.rhs=C}render({es5:o,_n:h}){const C=o?r.varKinds.var:this.varKind,k=this.rhs===void 0?"":` = ${this.rhs}`;return`${C} ${this.name}${k};`+h}optimizeNames(o,h){if(o[this.name.str])return this.rhs&&(this.rhs=pe(this.rhs,o,h)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class l extends s{constructor(o,h,C){super(),this.lhs=o,this.rhs=h,this.sideEffects=C}render({_n:o}){return`${this.lhs} = ${this.rhs};`+o}optimizeNames(o,h){if(!(this.lhs instanceof t.Name&&!o[this.lhs.str]&&!this.sideEffects))return this.rhs=pe(this.rhs,o,h),this}get names(){const o=this.lhs instanceof t.Name?{}:{...this.lhs.names};return ke(o,this.rhs)}}class f extends l{constructor(o,h,C,k){super(o,C,k),this.op=h}render({_n:o}){return`${this.lhs} ${this.op}= ${this.rhs};`+o}}class c extends s{constructor(o){super(),this.label=o,this.names={}}render({_n:o}){return`${this.label}:`+o}}class y extends s{constructor(o){super(),this.label=o,this.names={}}render({_n:o}){return`break${this.label?` ${this.label}`:""};`+o}}class $ extends s{constructor(o){super(),this.error=o}render({_n:o}){return`throw ${this.error};`+o}get names(){return this.error.names}}class O extends s{constructor(o){super(),this.code=o}render({_n:o}){return`${this.code};`+o}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(o,h){return this.code=pe(this.code,o,h),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class w extends s{constructor(o=[]){super(),this.nodes=o}render(o){return this.nodes.reduce((h,C)=>h+C.render(o),"")}optimizeNodes(){const{nodes:o}=this;let h=o.length;for(;h--;){const C=o[h].optimizeNodes();Array.isArray(C)?o.splice(h,1,...C):C?o[h]=C:o.splice(h,1)}return o.length>0?this:void 0}optimizeNames(o,h){const{nodes:C}=this;let k=C.length;for(;k--;){const D=C[k];D.optimizeNames(o,h)||(Ze(o,D.names),C.splice(k,1))}return C.length>0?this:void 0}get names(){return this.nodes.reduce((o,h)=>ie(o,h.names),{})}}class S extends w{render(o){return"{"+o._n+super.render(o)+"}"+o._n}}class P extends w{}class m extends S{}m.kind="else";class v extends S{constructor(o,h){super(h),this.condition=o}render(o){let h=`if(${this.condition})`+super.render(o);return this.else&&(h+="else "+this.else.render(o)),h}optimizeNodes(){super.optimizeNodes();const o=this.condition;if(o===!0)return this.nodes;let h=this.else;if(h){const C=h.optimizeNodes();h=this.else=Array.isArray(C)?new m(C):C}if(h)return o===!1?h instanceof v?h:h.nodes:this.nodes.length?this:new v(et(o),h instanceof v?[h]:h.nodes);if(!(o===!1||!this.nodes.length))return this}optimizeNames(o,h){var C;if(this.else=(C=this.else)===null||C===void 0?void 0:C.optimizeNames(o,h),!!(super.optimizeNames(o,h)||this.else))return this.condition=pe(this.condition,o,h),this}get names(){const o=super.names;return ke(o,this.condition),this.else&&ie(o,this.else.names),o}}v.kind="if";class N extends S{}N.kind="for";class T extends N{constructor(o){super(),this.iteration=o}render(o){return`for(${this.iteration})`+super.render(o)}optimizeNames(o,h){if(super.optimizeNames(o,h))return this.iteration=pe(this.iteration,o,h),this}get names(){return ie(super.names,this.iteration.names)}}class A extends N{constructor(o,h,C,k){super(),this.varKind=o,this.name=h,this.from=C,this.to=k}render(o){const h=o.es5?r.varKinds.var:this.varKind,{name:C,from:k,to:D}=this;return`for(${h} ${C}=${k}; ${C}<${D}; ${C}++)`+super.render(o)}get names(){const o=ke(super.names,this.from);return ke(o,this.to)}}class M extends N{constructor(o,h,C,k){super(),this.loop=o,this.varKind=h,this.name=C,this.iterable=k}render(o){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(o)}optimizeNames(o,h){if(super.optimizeNames(o,h))return this.iterable=pe(this.iterable,o,h),this}get names(){return ie(super.names,this.iterable.names)}}class B extends S{constructor(o,h,C){super(),this.name=o,this.args=h,this.async=C}render(o){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(o)}}B.kind="func";class X extends w{render(o){return"return "+super.render(o)}}X.kind="return";class le extends S{render(o){let h="try"+super.render(o);return this.catch&&(h+=this.catch.render(o)),this.finally&&(h+=this.finally.render(o)),h}optimizeNodes(){var o,h;return super.optimizeNodes(),(o=this.catch)===null||o===void 0||o.optimizeNodes(),(h=this.finally)===null||h===void 0||h.optimizeNodes(),this}optimizeNames(o,h){var C,k;return super.optimizeNames(o,h),(C=this.catch)===null||C===void 0||C.optimizeNames(o,h),(k=this.finally)===null||k===void 0||k.optimizeNames(o,h),this}get names(){const o=super.names;return this.catch&&ie(o,this.catch.names),this.finally&&ie(o,this.finally.names),o}}class je extends S{constructor(o){super(),this.error=o}render(o){return`catch(${this.error})`+super.render(o)}}je.kind="catch";class ze extends S{render(o){return"finally"+super.render(o)}}ze.kind="finally";class Ke{constructor(o,h={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...h,_n:h.lines?`
`:""},this._extScope=o,this._scope=new r.Scope({parent:o}),this._nodes=[new P]}toString(){return this._root.render(this.opts)}name(o){return this._scope.name(o)}scopeName(o){return this._extScope.name(o)}scopeValue(o,h){const C=this._extScope.value(o,h);return(this._values[C.prefix]||(this._values[C.prefix]=new Set)).add(C),C}getScopeValue(o,h){return this._extScope.getValue(o,h)}scopeRefs(o){return this._extScope.scopeRefs(o,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(o,h,C,k){const D=this._scope.toName(h);return C!==void 0&&k&&(this._constants[D.str]=C),this._leafNode(new i(o,D,C)),D}const(o,h,C){return this._def(r.varKinds.const,o,h,C)}let(o,h,C){return this._def(r.varKinds.let,o,h,C)}var(o,h,C){return this._def(r.varKinds.var,o,h,C)}assign(o,h,C){return this._leafNode(new l(o,h,C))}add(o,h){return this._leafNode(new f(o,e.operators.ADD,h))}code(o){return typeof o=="function"?o():o!==t.nil&&this._leafNode(new O(o)),this}object(...o){const h=["{"];for(const[C,k]of o)h.length>1&&h.push(","),h.push(C),(C!==k||this.opts.es5)&&(h.push(":"),(0,t.addCodeArg)(h,k));return h.push("}"),new t._Code(h)}if(o,h,C){if(this._blockNode(new v(o)),h&&C)this.code(h).else().code(C).endIf();else if(h)this.code(h).endIf();else if(C)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(o){return this._elseNode(new v(o))}else(){return this._elseNode(new m)}endIf(){return this._endBlockNode(v,m)}_for(o,h){return this._blockNode(o),h&&this.code(h).endFor(),this}for(o,h){return this._for(new T(o),h)}forRange(o,h,C,k,D=this.opts.es5?r.varKinds.var:r.varKinds.let){const G=this._scope.toName(o);return this._for(new A(D,G,h,C),()=>k(G))}forOf(o,h,C,k=r.varKinds.const){const D=this._scope.toName(o);if(this.opts.es5){const G=h instanceof t.Name?h:this.var("_arr",h);return this.forRange("_i",0,(0,t._)`${G}.length`,x=>{this.var(D,(0,t._)`${G}[${x}]`),C(D)})}return this._for(new M("of",k,D,h),()=>C(D))}forIn(o,h,C,k=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(o,(0,t._)`Object.keys(${h})`,C);const D=this._scope.toName(o);return this._for(new M("in",k,D,h),()=>C(D))}endFor(){return this._endBlockNode(N)}label(o){return this._leafNode(new c(o))}break(o){return this._leafNode(new y(o))}return(o){const h=new X;if(this._blockNode(h),this.code(o),h.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(X)}try(o,h,C){if(!h&&!C)throw new Error('CodeGen: "try" without "catch" and "finally"');const k=new le;if(this._blockNode(k),this.code(o),h){const D=this.name("e");this._currNode=k.catch=new je(D),h(D)}return C&&(this._currNode=k.finally=new ze,this.code(C)),this._endBlockNode(je,ze)}throw(o){return this._leafNode(new $(o))}block(o,h){return this._blockStarts.push(this._nodes.length),o&&this.code(o).endBlock(h),this}endBlock(o){const h=this._blockStarts.pop();if(h===void 0)throw new Error("CodeGen: not in self-balancing block");const C=this._nodes.length-h;if(C<0||o!==void 0&&C!==o)throw new Error(`CodeGen: wrong number of nodes: ${C} vs ${o} expected`);return this._nodes.length=h,this}func(o,h=t.nil,C,k){return this._blockNode(new B(o,h,C)),k&&this.code(k).endFunc(),this}endFunc(){return this._endBlockNode(B)}optimize(o=1){for(;o-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(o){return this._currNode.nodes.push(o),this}_blockNode(o){this._currNode.nodes.push(o),this._nodes.push(o)}_endBlockNode(o,h){const C=this._currNode;if(C instanceof o||h&&C instanceof h)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${h?`${o.kind}/${h.kind}`:o.kind}"`)}_elseNode(o){const h=this._currNode;if(!(h instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=h.else=o,this}get _root(){return this._nodes[0]}get _currNode(){const o=this._nodes;return o[o.length-1]}set _currNode(o){const h=this._nodes;h[h.length-1]=o}}e.CodeGen=Ke;function ie(_,o){for(const h in o)_[h]=(_[h]||0)+(o[h]||0);return _}function ke(_,o){return o instanceof t._CodeOrName?ie(_,o.names):_}function pe(_,o,h){if(_ instanceof t.Name)return C(_);if(!k(_))return _;return new t._Code(_._items.reduce((D,G)=>(G instanceof t.Name&&(G=C(G)),G instanceof t._Code?D.push(...G._items):D.push(G),D),[]));function C(D){const G=h[D.str];return G===void 0||o[D.str]!==1?D:(delete o[D.str],G)}function k(D){return D instanceof t._Code&&D._items.some(G=>G instanceof t.Name&&o[G.str]===1&&h[G.str]!==void 0)}}function Ze(_,o){for(const h in o)_[h]=(_[h]||0)-(o[h]||0)}function et(_){return typeof _=="boolean"||typeof _=="number"||_===null?!_:(0,t._)`!${R(_)}`}e.not=et;const ft=g(e.operators.AND);function It(..._){return _.reduce(ft)}e.and=It;const ht=g(e.operators.OR);function j(..._){return _.reduce(ht)}e.or=j;function g(_){return(o,h)=>o===t.nil?h:h===t.nil?o:(0,t._)`${R(o)} ${_} ${R(h)}`}function R(_){return _ instanceof t.Name?_:(0,t._)`(${_})`}})(H);var I={};Object.defineProperty(I,"__esModule",{value:!0});I.checkStrictMode=I.getErrorPath=I.Type=I.useFunc=I.setEvaluated=I.evaluatedPropsToName=I.mergeEvaluated=I.eachItem=I.unescapeJsonPointer=I.escapeJsonPointer=I.escapeFragment=I.unescapeFragment=I.schemaRefOrVal=I.schemaHasRulesButRef=I.schemaHasRules=I.checkUnknownRules=I.alwaysValidSchema=I.toHash=void 0;const Q=H,Oo=Yt;function Co(e){const t={};for(const r of e)t[r]=!0;return t}I.toHash=Co;function Ro(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(ps(e,t),!ms(t,e.self.RULES.all))}I.alwaysValidSchema=Ro;function ps(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;const a=n.RULES.keywords;for(const s in t)a[s]||$s(e,`unknown keyword: "${s}"`)}I.checkUnknownRules=ps;function ms(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(t[r])return!0;return!1}I.schemaHasRules=ms;function To(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}I.schemaHasRulesButRef=To;function jo({topSchemaRef:e,schemaPath:t},r,n,a){if(!a){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Q._)`${r}`}return(0,Q._)`${e}${t}${(0,Q.getProperty)(n)}`}I.schemaRefOrVal=jo;function ko(e){return vs(decodeURIComponent(e))}I.unescapeFragment=ko;function Io(e){return encodeURIComponent(pn(e))}I.escapeFragment=Io;function pn(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}I.escapeJsonPointer=pn;function vs(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}I.unescapeJsonPointer=vs;function Ao(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)}I.eachItem=Ao;function _a({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(a,s,i,l)=>{const f=i===void 0?s:i instanceof Q.Name?(s instanceof Q.Name?e(a,s,i):t(a,s,i),i):s instanceof Q.Name?(t(a,i,s),s):r(s,i);return l===Q.Name&&!(f instanceof Q.Name)?n(a,f):f}}I.mergeEvaluated={props:_a({mergeNames:(e,t,r)=>e.if((0,Q._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,Q._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,Q._)`${r} || {}`).code((0,Q._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,Q._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,Q._)`${r} || {}`),mn(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:ys}),items:_a({mergeNames:(e,t,r)=>e.if((0,Q._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,Q._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,Q._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,Q._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function ys(e,t){if(t===!0)return e.var("props",!0);const r=e.var("props",(0,Q._)`{}`);return t!==void 0&&mn(e,r,t),r}I.evaluatedPropsToName=ys;function mn(e,t,r){Object.keys(r).forEach(n=>e.assign((0,Q._)`${t}${(0,Q.getProperty)(n)}`,!0))}I.setEvaluated=mn;const wa={};function Do(e,t){return e.scopeValue("func",{ref:t,code:wa[t.code]||(wa[t.code]=new Oo._Code(t.code))})}I.useFunc=Do;var rn;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(rn||(I.Type=rn={}));function Mo(e,t,r){if(e instanceof Q.Name){const n=t===rn.Num;return r?n?(0,Q._)`"[" + ${e} + "]"`:(0,Q._)`"['" + ${e} + "']"`:n?(0,Q._)`"/" + ${e}`:(0,Q._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Q.getProperty)(e).toString():"/"+pn(e)}I.getErrorPath=Mo;function $s(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}I.checkStrictMode=$s;var Le={};Object.defineProperty(Le,"__esModule",{value:!0});const me=H,Uo={data:new me.Name("data"),valCxt:new me.Name("valCxt"),instancePath:new me.Name("instancePath"),parentData:new me.Name("parentData"),parentDataProperty:new me.Name("parentDataProperty"),rootData:new me.Name("rootData"),dynamicAnchors:new me.Name("dynamicAnchors"),vErrors:new me.Name("vErrors"),errors:new me.Name("errors"),this:new me.Name("this"),self:new me.Name("self"),scope:new me.Name("scope"),json:new me.Name("json"),jsonPos:new me.Name("jsonPos"),jsonLen:new me.Name("jsonLen"),jsonPart:new me.Name("jsonPart")};Le.default=Uo;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=H,r=I,n=Le;e.keywordError={message:({keyword:m})=>(0,t.str)`must pass "${m}" keyword validation`},e.keyword$DataError={message:({keyword:m,schemaType:v})=>v?(0,t.str)`"${m}" keyword must be ${v} ($data)`:(0,t.str)`"${m}" keyword is invalid ($data)`};function a(m,v=e.keywordError,N,T){const{it:A}=m,{gen:M,compositeRule:B,allErrors:X}=A,le=$(m,v,N);T??(B||X)?f(M,le):c(A,(0,t._)`[${le}]`)}e.reportError=a;function s(m,v=e.keywordError,N){const{it:T}=m,{gen:A,compositeRule:M,allErrors:B}=T,X=$(m,v,N);f(A,X),M||B||c(T,n.default.vErrors)}e.reportExtraError=s;function i(m,v){m.assign(n.default.errors,v),m.if((0,t._)`${n.default.vErrors} !== null`,()=>m.if(v,()=>m.assign((0,t._)`${n.default.vErrors}.length`,v),()=>m.assign(n.default.vErrors,null)))}e.resetErrorsCount=i;function l({gen:m,keyword:v,schemaValue:N,data:T,errsCount:A,it:M}){if(A===void 0)throw new Error("ajv implementation error");const B=m.name("err");m.forRange("i",A,n.default.errors,X=>{m.const(B,(0,t._)`${n.default.vErrors}[${X}]`),m.if((0,t._)`${B}.instancePath === undefined`,()=>m.assign((0,t._)`${B}.instancePath`,(0,t.strConcat)(n.default.instancePath,M.errorPath))),m.assign((0,t._)`${B}.schemaPath`,(0,t.str)`${M.errSchemaPath}/${v}`),M.opts.verbose&&(m.assign((0,t._)`${B}.schema`,N),m.assign((0,t._)`${B}.data`,T))})}e.extendErrors=l;function f(m,v){const N=m.const("err",v);m.if((0,t._)`${n.default.vErrors} === null`,()=>m.assign(n.default.vErrors,(0,t._)`[${N}]`),(0,t._)`${n.default.vErrors}.push(${N})`),m.code((0,t._)`${n.default.errors}++`)}function c(m,v){const{gen:N,validateName:T,schemaEnv:A}=m;A.$async?N.throw((0,t._)`new ${m.ValidationError}(${v})`):(N.assign((0,t._)`${T}.errors`,v),N.return(!1))}const y={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function $(m,v,N){const{createErrors:T}=m.it;return T===!1?(0,t._)`{}`:O(m,v,N)}function O(m,v,N={}){const{gen:T,it:A}=m,M=[w(A,N),S(m,N)];return P(m,v,M),T.object(...M)}function w({errorPath:m},{instancePath:v}){const N=v?(0,t.str)`${m}${(0,r.getErrorPath)(v,r.Type.Str)}`:m;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,N)]}function S({keyword:m,it:{errSchemaPath:v}},{schemaPath:N,parentSchema:T}){let A=T?v:(0,t.str)`${v}/${m}`;return N&&(A=(0,t.str)`${A}${(0,r.getErrorPath)(N,r.Type.Str)}`),[y.schemaPath,A]}function P(m,{params:v,message:N},T){const{keyword:A,data:M,schemaValue:B,it:X}=m,{opts:le,propertyName:je,topSchemaRef:ze,schemaPath:Ke}=X;T.push([y.keyword,A],[y.params,typeof v=="function"?v(m):v||(0,t._)`{}`]),le.messages&&T.push([y.message,typeof N=="function"?N(m):N]),le.verbose&&T.push([y.schema,B],[y.parentSchema,(0,t._)`${ze}${Ke}`],[n.default.data,M]),je&&T.push([y.propertyName,je])}})(Zt);Object.defineProperty(Ct,"__esModule",{value:!0});Ct.boolOrEmptySchema=Ct.topBoolOrEmptySchema=void 0;const qo=Zt,Vo=H,Fo=Le,Lo={message:"boolean schema is false"};function zo(e){const{gen:t,schema:r,validateName:n}=e;r===!1?gs(e,!1):typeof r=="object"&&r.$async===!0?t.return(Fo.default.data):(t.assign((0,Vo._)`${n}.errors`,null),t.return(!0))}Ct.topBoolOrEmptySchema=zo;function Ko(e,t){const{gen:r,schema:n}=e;n===!1?(r.var(t,!1),gs(e)):r.var(t,!0)}Ct.boolOrEmptySchema=Ko;function gs(e,t){const{gen:r,data:n}=e,a={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,qo.reportError)(a,Lo,void 0,t)}var ce={},ct={};Object.defineProperty(ct,"__esModule",{value:!0});ct.getRules=ct.isJSONType=void 0;const Ho=["string","number","integer","boolean","null","object","array"],Bo=new Set(Ho);function Go(e){return typeof e=="string"&&Bo.has(e)}ct.isJSONType=Go;function Jo(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}ct.getRules=Jo;var Ge={};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.shouldUseRule=Ge.shouldUseGroup=Ge.schemaHasRulesForType=void 0;function xo({schema:e,self:t},r){const n=t.RULES.types[r];return n&&n!==!0&&_s(e,n)}Ge.schemaHasRulesForType=xo;function _s(e,t){return t.rules.some(r=>ws(e,r))}Ge.shouldUseGroup=_s;function ws(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}Ge.shouldUseRule=ws;Object.defineProperty(ce,"__esModule",{value:!0});ce.reportTypeError=ce.checkDataTypes=ce.checkDataType=ce.coerceAndCheckDataType=ce.getJSONTypes=ce.getSchemaTypes=ce.DataType=void 0;const Wo=ct,Xo=Ge,Qo=Zt,z=H,bs=I;var Nt;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Nt||(ce.DataType=Nt={}));function Yo(e){const t=Es(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}ce.getSchemaTypes=Yo;function Es(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(Wo.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}ce.getJSONTypes=Es;function Zo(e,t){const{gen:r,data:n,opts:a}=e,s=ei(t,a.coerceTypes),i=t.length>0&&!(s.length===0&&t.length===1&&(0,Xo.schemaHasRulesForType)(e,t[0]));if(i){const l=vn(t,n,a.strictNumbers,Nt.Wrong);r.if(l,()=>{s.length?ti(e,t,s):yn(e)})}return i}ce.coerceAndCheckDataType=Zo;const Ss=new Set(["string","number","integer","boolean","null"]);function ei(e,t){return t?e.filter(r=>Ss.has(r)||t==="array"&&r==="array"):[]}function ti(e,t,r){const{gen:n,data:a,opts:s}=e,i=n.let("dataType",(0,z._)`typeof ${a}`),l=n.let("coerced",(0,z._)`undefined`);s.coerceTypes==="array"&&n.if((0,z._)`${i} == 'object' && Array.isArray(${a}) && ${a}.length == 1`,()=>n.assign(a,(0,z._)`${a}[0]`).assign(i,(0,z._)`typeof ${a}`).if(vn(t,a,s.strictNumbers),()=>n.assign(l,a))),n.if((0,z._)`${l} !== undefined`);for(const c of r)(Ss.has(c)||c==="array"&&s.coerceTypes==="array")&&f(c);n.else(),yn(e),n.endIf(),n.if((0,z._)`${l} !== undefined`,()=>{n.assign(a,l),ri(e,l)});function f(c){switch(c){case"string":n.elseIf((0,z._)`${i} == "number" || ${i} == "boolean"`).assign(l,(0,z._)`"" + ${a}`).elseIf((0,z._)`${a} === null`).assign(l,(0,z._)`""`);return;case"number":n.elseIf((0,z._)`${i} == "boolean" || ${a} === null
              || (${i} == "string" && ${a} && ${a} == +${a})`).assign(l,(0,z._)`+${a}`);return;case"integer":n.elseIf((0,z._)`${i} === "boolean" || ${a} === null
              || (${i} === "string" && ${a} && ${a} == +${a} && !(${a} % 1))`).assign(l,(0,z._)`+${a}`);return;case"boolean":n.elseIf((0,z._)`${a} === "false" || ${a} === 0 || ${a} === null`).assign(l,!1).elseIf((0,z._)`${a} === "true" || ${a} === 1`).assign(l,!0);return;case"null":n.elseIf((0,z._)`${a} === "" || ${a} === 0 || ${a} === false`),n.assign(l,null);return;case"array":n.elseIf((0,z._)`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${a} === null`).assign(l,(0,z._)`[${a}]`)}}}function ri({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,z._)`${t} !== undefined`,()=>e.assign((0,z._)`${t}[${r}]`,n))}function nn(e,t,r,n=Nt.Correct){const a=n===Nt.Correct?z.operators.EQ:z.operators.NEQ;let s;switch(e){case"null":return(0,z._)`${t} ${a} null`;case"array":s=(0,z._)`Array.isArray(${t})`;break;case"object":s=(0,z._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=i((0,z._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=i();break;default:return(0,z._)`typeof ${t} ${a} ${e}`}return n===Nt.Correct?s:(0,z.not)(s);function i(l=z.nil){return(0,z.and)((0,z._)`typeof ${t} == "number"`,l,r?(0,z._)`isFinite(${t})`:z.nil)}}ce.checkDataType=nn;function vn(e,t,r,n){if(e.length===1)return nn(e[0],t,r,n);let a;const s=(0,bs.toHash)(e);if(s.array&&s.object){const i=(0,z._)`typeof ${t} != "object"`;a=s.null?i:(0,z._)`!${t} || ${i}`,delete s.null,delete s.array,delete s.object}else a=z.nil;s.number&&delete s.integer;for(const i in s)a=(0,z.and)(a,nn(i,t,r,n));return a}ce.checkDataTypes=vn;const ni={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,z._)`{type: ${e}}`:(0,z._)`{type: ${t}}`};function yn(e){const t=ai(e);(0,Qo.reportError)(t,ni)}ce.reportTypeError=yn;function ai(e){const{gen:t,data:r,schema:n}=e,a=(0,bs.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:a,schemaValue:a,parentSchema:n,params:{},it:e}}var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});Sr.assignDefaults=void 0;const wt=H,si=I;function oi(e,t){const{properties:r,items:n}=e.schema;if(t==="object"&&r)for(const a in r)ba(e,a,r[a].default);else t==="array"&&Array.isArray(n)&&n.forEach((a,s)=>ba(e,s,a.default))}Sr.assignDefaults=oi;function ba(e,t,r){const{gen:n,compositeRule:a,data:s,opts:i}=e;if(r===void 0)return;const l=(0,wt._)`${s}${(0,wt.getProperty)(t)}`;if(a){(0,si.checkStrictMode)(e,`default is ignored for: ${l}`);return}let f=(0,wt._)`${l} === undefined`;i.useDefaults==="empty"&&(f=(0,wt._)`${f} || ${l} === null || ${l} === ""`),n.if(f,(0,wt._)`${l} = ${(0,wt.stringify)(r)}`)}var Fe={},K={};Object.defineProperty(K,"__esModule",{value:!0});K.validateUnion=K.validateArray=K.usePattern=K.callValidateCode=K.schemaProperties=K.allSchemaProperties=K.noPropertyInData=K.propertyInData=K.isOwnProperty=K.hasPropFunc=K.reportMissingProp=K.checkMissingProp=K.checkReportMissingProp=void 0;const ee=H,$n=I,We=Le,ii=I;function ui(e,t){const{gen:r,data:n,it:a}=e;r.if(_n(r,n,t,a.opts.ownProperties),()=>{e.setParams({missingProperty:(0,ee._)`${t}`},!0),e.error()})}K.checkReportMissingProp=ui;function ci({gen:e,data:t,it:{opts:r}},n,a){return(0,ee.or)(...n.map(s=>(0,ee.and)(_n(e,t,s,r.ownProperties),(0,ee._)`${a} = ${s}`)))}K.checkMissingProp=ci;function li(e,t){e.setParams({missingProperty:t},!0),e.error()}K.reportMissingProp=li;function Ps(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ee._)`Object.prototype.hasOwnProperty`})}K.hasPropFunc=Ps;function gn(e,t,r){return(0,ee._)`${Ps(e)}.call(${t}, ${r})`}K.isOwnProperty=gn;function di(e,t,r,n){const a=(0,ee._)`${t}${(0,ee.getProperty)(r)} !== undefined`;return n?(0,ee._)`${a} && ${gn(e,t,r)}`:a}K.propertyInData=di;function _n(e,t,r,n){const a=(0,ee._)`${t}${(0,ee.getProperty)(r)} === undefined`;return n?(0,ee.or)(a,(0,ee.not)(gn(e,t,r))):a}K.noPropertyInData=_n;function Ns(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}K.allSchemaProperties=Ns;function fi(e,t){return Ns(t).filter(r=>!(0,$n.alwaysValidSchema)(e,t[r]))}K.schemaProperties=fi;function hi({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:a,errorPath:s},it:i},l,f,c){const y=c?(0,ee._)`${e}, ${t}, ${n}${a}`:t,$=[[We.default.instancePath,(0,ee.strConcat)(We.default.instancePath,s)],[We.default.parentData,i.parentData],[We.default.parentDataProperty,i.parentDataProperty],[We.default.rootData,We.default.rootData]];i.opts.dynamicRef&&$.push([We.default.dynamicAnchors,We.default.dynamicAnchors]);const O=(0,ee._)`${y}, ${r.object(...$)}`;return f!==ee.nil?(0,ee._)`${l}.call(${f}, ${O})`:(0,ee._)`${l}(${O})`}K.callValidateCode=hi;const pi=(0,ee._)`new RegExp`;function mi({gen:e,it:{opts:t}},r){const n=t.unicodeRegExp?"u":"",{regExp:a}=t.code,s=a(r,n);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,ee._)`${a.code==="new RegExp"?pi:(0,ii.useFunc)(e,a)}(${r}, ${n})`})}K.usePattern=mi;function vi(e){const{gen:t,data:r,keyword:n,it:a}=e,s=t.name("valid");if(a.allErrors){const l=t.let("valid",!0);return i(()=>t.assign(l,!1)),l}return t.var(s,!0),i(()=>t.break()),s;function i(l){const f=t.const("len",(0,ee._)`${r}.length`);t.forRange("i",0,f,c=>{e.subschema({keyword:n,dataProp:c,dataPropType:$n.Type.Num},s),t.if((0,ee.not)(s),l)})}}K.validateArray=vi;function yi(e){const{gen:t,schema:r,keyword:n,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(f=>(0,$n.alwaysValidSchema)(a,f))&&!a.opts.unevaluated)return;const i=t.let("valid",!1),l=t.name("_valid");t.block(()=>r.forEach((f,c)=>{const y=e.subschema({keyword:n,schemaProp:c,compositeRule:!0},l);t.assign(i,(0,ee._)`${i} || ${l}`),e.mergeValidEvaluated(y,l)||t.if((0,ee.not)(i))})),e.result(i,()=>e.reset(),()=>e.error(!0))}K.validateUnion=yi;Object.defineProperty(Fe,"__esModule",{value:!0});Fe.validateKeywordUsage=Fe.validSchemaType=Fe.funcKeywordCode=Fe.macroKeywordCode=void 0;const ye=H,ot=Le,$i=K,gi=Zt;function _i(e,t){const{gen:r,keyword:n,schema:a,parentSchema:s,it:i}=e,l=t.macro.call(i.self,a,s,i),f=Os(r,n,l);i.opts.validateSchema!==!1&&i.self.validateSchema(l,!0);const c=r.name("valid");e.subschema({schema:l,schemaPath:ye.nil,errSchemaPath:`${i.errSchemaPath}/${n}`,topSchemaRef:f,compositeRule:!0},c),e.pass(c,()=>e.error(!0))}Fe.macroKeywordCode=_i;function wi(e,t){var r;const{gen:n,keyword:a,schema:s,parentSchema:i,$data:l,it:f}=e;Ei(f,t);const c=!l&&t.compile?t.compile.call(f.self,s,i,f):t.validate,y=Os(n,a,c),$=n.let("valid");e.block$data($,O),e.ok((r=t.valid)!==null&&r!==void 0?r:$);function O(){if(t.errors===!1)P(),t.modifying&&Ea(e),m(()=>e.error());else{const v=t.async?w():S();t.modifying&&Ea(e),m(()=>bi(e,v))}}function w(){const v=n.let("ruleErrs",null);return n.try(()=>P((0,ye._)`await `),N=>n.assign($,!1).if((0,ye._)`${N} instanceof ${f.ValidationError}`,()=>n.assign(v,(0,ye._)`${N}.errors`),()=>n.throw(N))),v}function S(){const v=(0,ye._)`${y}.errors`;return n.assign(v,null),P(ye.nil),v}function P(v=t.async?(0,ye._)`await `:ye.nil){const N=f.opts.passContext?ot.default.this:ot.default.self,T=!("compile"in t&&!l||t.schema===!1);n.assign($,(0,ye._)`${v}${(0,$i.callValidateCode)(e,y,N,T)}`,t.modifying)}function m(v){var N;n.if((0,ye.not)((N=t.valid)!==null&&N!==void 0?N:$),v)}}Fe.funcKeywordCode=wi;function Ea(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,ye._)`${n.parentData}[${n.parentDataProperty}]`))}function bi(e,t){const{gen:r}=e;r.if((0,ye._)`Array.isArray(${t})`,()=>{r.assign(ot.default.vErrors,(0,ye._)`${ot.default.vErrors} === null ? ${t} : ${ot.default.vErrors}.concat(${t})`).assign(ot.default.errors,(0,ye._)`${ot.default.vErrors}.length`),(0,gi.extendErrors)(e)},()=>e.error())}function Ei({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Os(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,ye.stringify)(r)})}function Si(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}Fe.validSchemaType=Si;function Pi({schema:e,opts:t,self:r,errSchemaPath:n},a,s){if(Array.isArray(a.keyword)?!a.keyword.includes(s):a.keyword!==s)throw new Error("ajv implementation error");const i=a.dependencies;if(i!=null&&i.some(l=>!Object.prototype.hasOwnProperty.call(e,l)))throw new Error(`parent schema must have dependencies of ${s}: ${i.join(",")}`);if(a.validateSchema&&!a.validateSchema(e[s])){const f=`keyword "${s}" value is invalid at path "${n}": `+r.errorsText(a.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(f);else throw new Error(f)}}Fe.validateKeywordUsage=Pi;var Ye={};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.extendSubschemaMode=Ye.extendSubschemaData=Ye.getSubschema=void 0;const Ve=H,Cs=I;function Ni(e,{keyword:t,schemaProp:r,schema:n,schemaPath:a,errSchemaPath:s,topSchemaRef:i}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const l=e.schema[t];return r===void 0?{schema:l,schemaPath:(0,Ve._)`${e.schemaPath}${(0,Ve.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:l[r],schemaPath:(0,Ve._)`${e.schemaPath}${(0,Ve.getProperty)(t)}${(0,Ve.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Cs.escapeFragment)(r)}`}}if(n!==void 0){if(a===void 0||s===void 0||i===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:a,topSchemaRef:i,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}Ye.getSubschema=Ni;function Oi(e,t,{dataProp:r,dataPropType:n,data:a,dataTypes:s,propertyName:i}){if(a!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:l}=t;if(r!==void 0){const{errorPath:c,dataPathArr:y,opts:$}=t,O=l.let("data",(0,Ve._)`${t.data}${(0,Ve.getProperty)(r)}`,!0);f(O),e.errorPath=(0,Ve.str)`${c}${(0,Cs.getErrorPath)(r,n,$.jsPropertySyntax)}`,e.parentDataProperty=(0,Ve._)`${r}`,e.dataPathArr=[...y,e.parentDataProperty]}if(a!==void 0){const c=a instanceof Ve.Name?a:l.let("data",a,!0);f(c),i!==void 0&&(e.propertyName=i)}s&&(e.dataTypes=s);function f(c){e.data=c,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,c]}}Ye.extendSubschemaData=Oi;function Ci(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:a,allErrors:s}){n!==void 0&&(e.compositeRule=n),a!==void 0&&(e.createErrors=a),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=r}Ye.extendSubschemaMode=Ci;var he={},Rs=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(a=n;a--!==0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(r).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!==0;){var i=s[a];if(!e(t[i],r[i]))return!1}return!0}return t!==t&&r!==r},Ts={exports:{}},Qe=Ts.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},a=r.post||function(){};fr(t,n,a,e,"",e)};Qe.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Qe.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Qe.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Qe.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function fr(e,t,r,n,a,s,i,l,f,c){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,a,s,i,l,f,c);for(var y in n){var $=n[y];if(Array.isArray($)){if(y in Qe.arrayKeywords)for(var O=0;O<$.length;O++)fr(e,t,r,$[O],a+"/"+y+"/"+O,s,a,y,n,O)}else if(y in Qe.propsKeywords){if($&&typeof $=="object")for(var w in $)fr(e,t,r,$[w],a+"/"+y+"/"+Ri(w),s,a,y,n,w)}else(y in Qe.keywords||e.allKeys&&!(y in Qe.skipKeywords))&&fr(e,t,r,$,a+"/"+y,s,a,y,n)}r(n,a,s,i,l,f,c)}}function Ri(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var Ti=Ts.exports;Object.defineProperty(he,"__esModule",{value:!0});he.getSchemaRefs=he.resolveUrl=he.normalizeId=he._getFullPath=he.getFullPath=he.inlineRef=void 0;const ji=I,ki=Rs,Ii=Ti,Ai=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Di(e,t=!0){return typeof e=="boolean"?!0:t===!0?!an(e):t?js(e)<=t:!1}he.inlineRef=Di;const Mi=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function an(e){for(const t in e){if(Mi.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(an)||typeof r=="object"&&an(r))return!0}return!1}function js(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!Ai.has(r)&&(typeof e[r]=="object"&&(0,ji.eachItem)(e[r],n=>t+=js(n)),t===1/0))return 1/0}return t}function ks(e,t="",r){r!==!1&&(t=Ot(t));const n=e.parse(t);return Is(e,n)}he.getFullPath=ks;function Is(e,t){return e.serialize(t).split("#")[0]+"#"}he._getFullPath=Is;const Ui=/#\/?$/;function Ot(e){return e?e.replace(Ui,""):""}he.normalizeId=Ot;function qi(e,t,r){return r=Ot(r),e.resolve(t,r)}he.resolveUrl=qi;const Vi=/^[a-z_][-a-z0-9._]*$/i;function Fi(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,a=Ot(e[r]||t),s={"":a},i=ks(n,a,!1),l={},f=new Set;return Ii(e,{allKeys:!0},($,O,w,S)=>{if(S===void 0)return;const P=i+O;let m=s[S];typeof $[r]=="string"&&(m=v.call(this,$[r])),N.call(this,$.$anchor),N.call(this,$.$dynamicAnchor),s[O]=m;function v(T){const A=this.opts.uriResolver.resolve;if(T=Ot(m?A(m,T):T),f.has(T))throw y(T);f.add(T);let M=this.refs[T];return typeof M=="string"&&(M=this.refs[M]),typeof M=="object"?c($,M.schema,T):T!==Ot(P)&&(T[0]==="#"?(c($,l[T],T),l[T]=$):this.refs[T]=P),T}function N(T){if(typeof T=="string"){if(!Vi.test(T))throw new Error(`invalid anchor "${T}"`);v.call(this,`#${T}`)}}}),l;function c($,O,w){if(O!==void 0&&!ki($,O))throw y(w)}function y($){return new Error(`reference "${$}" resolves to more than one schema`)}}he.getSchemaRefs=Fi;Object.defineProperty(Re,"__esModule",{value:!0});Re.getData=Re.KeywordCxt=Re.validateFunctionCode=void 0;const As=Ct,Sa=ce,wn=Ge,$r=ce,Li=Sr,Gt=Fe,Ir=Ye,U=H,F=Le,zi=he,Je=I,Kt=Zt;function Ki(e){if(Us(e)&&(qs(e),Ms(e))){Gi(e);return}Ds(e,()=>(0,As.topBoolOrEmptySchema)(e))}Re.validateFunctionCode=Ki;function Ds({gen:e,validateName:t,schema:r,schemaEnv:n,opts:a},s){a.code.es5?e.func(t,(0,U._)`${F.default.data}, ${F.default.valCxt}`,n.$async,()=>{e.code((0,U._)`"use strict"; ${Pa(r,a)}`),Bi(e,a),e.code(s)}):e.func(t,(0,U._)`${F.default.data}, ${Hi(a)}`,n.$async,()=>e.code(Pa(r,a)).code(s))}function Hi(e){return(0,U._)`{${F.default.instancePath}="", ${F.default.parentData}, ${F.default.parentDataProperty}, ${F.default.rootData}=${F.default.data}${e.dynamicRef?(0,U._)`, ${F.default.dynamicAnchors}={}`:U.nil}}={}`}function Bi(e,t){e.if(F.default.valCxt,()=>{e.var(F.default.instancePath,(0,U._)`${F.default.valCxt}.${F.default.instancePath}`),e.var(F.default.parentData,(0,U._)`${F.default.valCxt}.${F.default.parentData}`),e.var(F.default.parentDataProperty,(0,U._)`${F.default.valCxt}.${F.default.parentDataProperty}`),e.var(F.default.rootData,(0,U._)`${F.default.valCxt}.${F.default.rootData}`),t.dynamicRef&&e.var(F.default.dynamicAnchors,(0,U._)`${F.default.valCxt}.${F.default.dynamicAnchors}`)},()=>{e.var(F.default.instancePath,(0,U._)`""`),e.var(F.default.parentData,(0,U._)`undefined`),e.var(F.default.parentDataProperty,(0,U._)`undefined`),e.var(F.default.rootData,F.default.data),t.dynamicRef&&e.var(F.default.dynamicAnchors,(0,U._)`{}`)})}function Gi(e){const{schema:t,opts:r,gen:n}=e;Ds(e,()=>{r.$comment&&t.$comment&&Fs(e),Qi(e),n.let(F.default.vErrors,null),n.let(F.default.errors,0),r.unevaluated&&Ji(e),Vs(e),eu(e)})}function Ji(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,U._)`${r}.evaluated`),t.if((0,U._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,U._)`${e.evaluated}.props`,(0,U._)`undefined`)),t.if((0,U._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,U._)`${e.evaluated}.items`,(0,U._)`undefined`))}function Pa(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,U._)`/*# sourceURL=${r} */`:U.nil}function xi(e,t){if(Us(e)&&(qs(e),Ms(e))){Wi(e,t);return}(0,As.boolOrEmptySchema)(e,t)}function Ms({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function Us(e){return typeof e.schema!="boolean"}function Wi(e,t){const{schema:r,gen:n,opts:a}=e;a.$comment&&r.$comment&&Fs(e),Yi(e),Zi(e);const s=n.const("_errs",F.default.errors);Vs(e,s),n.var(t,(0,U._)`${s} === ${F.default.errors}`)}function qs(e){(0,Je.checkUnknownRules)(e),Xi(e)}function Vs(e,t){if(e.opts.jtd)return Na(e,[],!1,t);const r=(0,Sa.getSchemaTypes)(e.schema),n=(0,Sa.coerceAndCheckDataType)(e,r);Na(e,r,!n,t)}function Xi(e){const{schema:t,errSchemaPath:r,opts:n,self:a}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,Je.schemaHasRulesButRef)(t,a.RULES)&&a.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Qi(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Je.checkStrictMode)(e,"default is ignored in the schema root")}function Yi(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,zi.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Zi(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function Fs({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:a}){const s=r.$comment;if(a.$comment===!0)e.code((0,U._)`${F.default.self}.logger.log(${s})`);else if(typeof a.$comment=="function"){const i=(0,U.str)`${n}/$comment`,l=e.scopeValue("root",{ref:t.root});e.code((0,U._)`${F.default.self}.opts.$comment(${s}, ${i}, ${l}.schema)`)}}function eu(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:a,opts:s}=e;r.$async?t.if((0,U._)`${F.default.errors} === 0`,()=>t.return(F.default.data),()=>t.throw((0,U._)`new ${a}(${F.default.vErrors})`)):(t.assign((0,U._)`${n}.errors`,F.default.vErrors),s.unevaluated&&tu(e),t.return((0,U._)`${F.default.errors} === 0`))}function tu({gen:e,evaluated:t,props:r,items:n}){r instanceof U.Name&&e.assign((0,U._)`${t}.props`,r),n instanceof U.Name&&e.assign((0,U._)`${t}.items`,n)}function Na(e,t,r,n){const{gen:a,schema:s,data:i,allErrors:l,opts:f,self:c}=e,{RULES:y}=c;if(s.$ref&&(f.ignoreKeywordsWithRef||!(0,Je.schemaHasRulesButRef)(s,y))){a.block(()=>Ks(e,"$ref",y.all.$ref.definition));return}f.jtd||ru(e,t),a.block(()=>{for(const O of y.rules)$(O);$(y.post)});function $(O){(0,wn.shouldUseGroup)(s,O)&&(O.type?(a.if((0,$r.checkDataType)(O.type,i,f.strictNumbers)),Oa(e,O),t.length===1&&t[0]===O.type&&r&&(a.else(),(0,$r.reportTypeError)(e)),a.endIf()):Oa(e,O),l||a.if((0,U._)`${F.default.errors} === ${n||0}`))}}function Oa(e,t){const{gen:r,schema:n,opts:{useDefaults:a}}=e;a&&(0,Li.assignDefaults)(e,t.type),r.block(()=>{for(const s of t.rules)(0,wn.shouldUseRule)(n,s)&&Ks(e,s.keyword,s.definition,t.type)})}function ru(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(nu(e,t),e.opts.allowUnionTypes||au(e,t),su(e,e.dataTypes))}function nu(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{Ls(e.dataTypes,r)||bn(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),iu(e,t)}}function au(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&bn(e,"use allowUnionTypes to allow union type keyword")}function su(e,t){const r=e.self.RULES.all;for(const n in r){const a=r[n];if(typeof a=="object"&&(0,wn.shouldUseRule)(e.schema,a)){const{type:s}=a.definition;s.length&&!s.some(i=>ou(t,i))&&bn(e,`missing type "${s.join(",")}" for keyword "${n}"`)}}}function ou(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Ls(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function iu(e,t){const r=[];for(const n of e.dataTypes)Ls(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function bn(e,t){const r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,Je.checkStrictMode)(e,t,e.opts.strictTypes)}class zs{constructor(t,r,n){if((0,Gt.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Je.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",Hs(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Gt.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",F.default.errors))}result(t,r,n){this.failResult((0,U.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,U.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,U._)`${r} !== undefined && (${(0,U.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?Kt.reportExtraError:Kt.reportError)(this,this.def.error,r)}$dataError(){(0,Kt.reportError)(this,this.def.$dataError||Kt.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Kt.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=U.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=U.nil,r=U.nil){if(!this.$data)return;const{gen:n,schemaCode:a,schemaType:s,def:i}=this;n.if((0,U.or)((0,U._)`${a} === undefined`,r)),t!==U.nil&&n.assign(t,!0),(s.length||i.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==U.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:n,def:a,it:s}=this;return(0,U.or)(i(),l());function i(){if(n.length){if(!(r instanceof U.Name))throw new Error("ajv implementation error");const f=Array.isArray(n)?n:[n];return(0,U._)`${(0,$r.checkDataTypes)(f,r,s.opts.strictNumbers,$r.DataType.Wrong)}`}return U.nil}function l(){if(a.validateSchema){const f=t.scopeValue("validate$data",{ref:a.validateSchema});return(0,U._)`!${f}(${r})`}return U.nil}}subschema(t,r){const n=(0,Ir.getSubschema)(this.it,t);(0,Ir.extendSubschemaData)(n,this.it,t),(0,Ir.extendSubschemaMode)(n,t);const a={...this.it,...n,items:void 0,props:void 0};return xi(a,r),a}mergeEvaluated(t,r){const{it:n,gen:a}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=Je.mergeEvaluated.props(a,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=Je.mergeEvaluated.items(a,t.items,n.items,r)))}mergeValidEvaluated(t,r){const{it:n,gen:a}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return a.if(r,()=>this.mergeEvaluated(t,U.Name)),!0}}Re.KeywordCxt=zs;function Ks(e,t,r,n){const a=new zs(e,r,t);"code"in r?r.code(a,n):a.$data&&r.validate?(0,Gt.funcKeywordCode)(a,r):"macro"in r?(0,Gt.macroKeywordCode)(a,r):(r.compile||r.validate)&&(0,Gt.funcKeywordCode)(a,r)}const uu=/^\/(?:[^~]|~0|~1)*$/,cu=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Hs(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let a,s;if(e==="")return F.default.rootData;if(e[0]==="/"){if(!uu.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);a=e,s=F.default.rootData}else{const c=cu.exec(e);if(!c)throw new Error(`Invalid JSON-pointer: ${e}`);const y=+c[1];if(a=c[2],a==="#"){if(y>=t)throw new Error(f("property/index",y));return n[t-y]}if(y>t)throw new Error(f("data",y));if(s=r[t-y],!a)return s}let i=s;const l=a.split("/");for(const c of l)c&&(s=(0,U._)`${s}${(0,U.getProperty)((0,Je.unescapeJsonPointer)(c))}`,i=(0,U._)`${i} && ${s}`);return i;function f(c,y){return`Cannot access ${c} ${y} levels up, current level is ${t}`}}Re.getData=Hs;var er={};Object.defineProperty(er,"__esModule",{value:!0});class lu extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}er.default=lu;var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});const Ar=he;class du extends Error{constructor(t,r,n,a){super(a||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Ar.resolveUrl)(t,r,n),this.missingSchema=(0,Ar.normalizeId)((0,Ar.getFullPath)(t,this.missingRef))}}Tt.default=du;var _e={};Object.defineProperty(_e,"__esModule",{value:!0});_e.resolveSchema=_e.getCompilingSchema=_e.resolveRef=_e.compileSchema=_e.SchemaEnv=void 0;const Ne=H,fu=er,st=Le,Ce=he,Ca=I,hu=Re;class Pr{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,Ce.normalizeId)(n==null?void 0:n[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}_e.SchemaEnv=Pr;function En(e){const t=Bs.call(this,e);if(t)return t;const r=(0,Ce.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:a}=this.opts.code,{ownProperties:s}=this.opts,i=new Ne.CodeGen(this.scope,{es5:n,lines:a,ownProperties:s});let l;e.$async&&(l=i.scopeValue("Error",{ref:fu.default,code:(0,Ne._)`require("ajv/dist/runtime/validation_error").default`}));const f=i.scopeName("validate");e.validateName=f;const c={gen:i,allErrors:this.opts.allErrors,data:st.default.data,parentData:st.default.parentData,parentDataProperty:st.default.parentDataProperty,dataNames:[st.default.data],dataPathArr:[Ne.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:i.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Ne.stringify)(e.schema)}:{ref:e.schema}),validateName:f,ValidationError:l,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:Ne.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Ne._)`""`,opts:this.opts,self:this};let y;try{this._compilations.add(e),(0,hu.validateFunctionCode)(c),i.optimize(this.opts.code.optimize);const $=i.toString();y=`${i.scopeRefs(st.default.scope)}return ${$}`,this.opts.code.process&&(y=this.opts.code.process(y,e));const w=new Function(`${st.default.self}`,`${st.default.scope}`,y)(this,this.scope.get());if(this.scope.value(f,{ref:w}),w.errors=null,w.schema=e.schema,w.schemaEnv=e,e.$async&&(w.$async=!0),this.opts.code.source===!0&&(w.source={validateName:f,validateCode:$,scopeValues:i._values}),this.opts.unevaluated){const{props:S,items:P}=c;w.evaluated={props:S instanceof Ne.Name?void 0:S,items:P instanceof Ne.Name?void 0:P,dynamicProps:S instanceof Ne.Name,dynamicItems:P instanceof Ne.Name},w.source&&(w.source.evaluated=(0,Ne.stringify)(w.evaluated))}return e.validate=w,e}catch($){throw delete e.validate,delete e.validateName,y&&this.logger.error("Error compiling schema, function code:",y),$}finally{this._compilations.delete(e)}}_e.compileSchema=En;function pu(e,t,r){var n;r=(0,Ce.resolveUrl)(this.opts.uriResolver,t,r);const a=e.refs[r];if(a)return a;let s=yu.call(this,e,r);if(s===void 0){const i=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:l}=this.opts;i&&(s=new Pr({schema:i,schemaId:l,root:e,baseId:t}))}if(s!==void 0)return e.refs[r]=mu.call(this,s)}_e.resolveRef=pu;function mu(e){return(0,Ce.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:En.call(this,e)}function Bs(e){for(const t of this._compilations)if(vu(t,e))return t}_e.getCompilingSchema=Bs;function vu(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function yu(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||Nr.call(this,e,t)}function Nr(e,t){const r=this.opts.uriResolver.parse(t),n=(0,Ce._getFullPath)(this.opts.uriResolver,r);let a=(0,Ce.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===a)return Dr.call(this,r,e);const s=(0,Ce.normalizeId)(n),i=this.refs[s]||this.schemas[s];if(typeof i=="string"){const l=Nr.call(this,e,i);return typeof(l==null?void 0:l.schema)!="object"?void 0:Dr.call(this,r,l)}if(typeof(i==null?void 0:i.schema)=="object"){if(i.validate||En.call(this,i),s===(0,Ce.normalizeId)(t)){const{schema:l}=i,{schemaId:f}=this.opts,c=l[f];return c&&(a=(0,Ce.resolveUrl)(this.opts.uriResolver,a,c)),new Pr({schema:l,schemaId:f,root:e,baseId:a})}return Dr.call(this,r,i)}}_e.resolveSchema=Nr;const $u=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Dr(e,{baseId:t,schema:r,root:n}){var a;if(((a=e.fragment)===null||a===void 0?void 0:a[0])!=="/")return;for(const l of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const f=r[(0,Ca.unescapeFragment)(l)];if(f===void 0)return;r=f;const c=typeof r=="object"&&r[this.opts.schemaId];!$u.has(l)&&c&&(t=(0,Ce.resolveUrl)(this.opts.uriResolver,t,c))}let s;if(typeof r!="boolean"&&r.$ref&&!(0,Ca.schemaHasRulesButRef)(r,this.RULES)){const l=(0,Ce.resolveUrl)(this.opts.uriResolver,t,r.$ref);s=Nr.call(this,n,l)}const{schemaId:i}=this.opts;if(s=s||new Pr({schema:r,schemaId:i,root:n,baseId:t}),s.schema!==s.root.schema)return s}const gu="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",_u="Meta-schema for $data reference (JSON AnySchema extension proposal)",wu="object",bu=["$data"],Eu={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Su=!1,Pu={$id:gu,description:_u,type:wu,required:bu,properties:Eu,additionalProperties:Su};var Sn={},sn={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(r,n){n(t)})(No,function(r){function n(){for(var d=arguments.length,u=Array(d),p=0;p<d;p++)u[p]=arguments[p];if(u.length>1){u[0]=u[0].slice(0,-1);for(var E=u.length-1,b=1;b<E;++b)u[b]=u[b].slice(1,-1);return u[E]=u[E].slice(1),u.join("")}else return u[0]}function a(d){return"(?:"+d+")"}function s(d){return d===void 0?"undefined":d===null?"null":Object.prototype.toString.call(d).split(" ").pop().split("]").shift().toLowerCase()}function i(d){return d.toUpperCase()}function l(d){return d!=null?d instanceof Array?d:typeof d.length!="number"||d.split||d.setInterval||d.call?[d]:Array.prototype.slice.call(d):[]}function f(d,u){var p=d;if(u)for(var E in u)p[E]=u[E];return p}function c(d){var u="[A-Za-z]",p="[0-9]",E=n(p,"[A-Fa-f]"),b=a(a("%[EFef]"+E+"%"+E+E+"%"+E+E)+"|"+a("%[89A-Fa-f]"+E+"%"+E+E)+"|"+a("%"+E+E)),q="[\\:\\/\\?\\#\\[\\]\\@]",V="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",W=n(q,V),Z=d?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",ae=d?"[\\uE000-\\uF8FF]":"[]",J=n(u,p,"[\\-\\.\\_\\~]",Z);a(u+n(u,p,"[\\+\\-\\.]")+"*"),a(a(b+"|"+n(J,V,"[\\:]"))+"*");var Y=a(a("25[0-5]")+"|"+a("2[0-4]"+p)+"|"+a("1"+p+p)+"|"+a("0?[1-9]"+p)+"|0?0?"+p),se=a(Y+"\\."+Y+"\\."+Y+"\\."+Y),L=a(E+"{1,4}"),te=a(a(L+"\\:"+L)+"|"+se),ue=a(a(L+"\\:")+"{6}"+te),re=a("\\:\\:"+a(L+"\\:")+"{5}"+te),xe=a(a(L)+"?\\:\\:"+a(L+"\\:")+"{4}"+te),Me=a(a(a(L+"\\:")+"{0,1}"+L)+"?\\:\\:"+a(L+"\\:")+"{3}"+te),Ue=a(a(a(L+"\\:")+"{0,2}"+L)+"?\\:\\:"+a(L+"\\:")+"{2}"+te),_t=a(a(a(L+"\\:")+"{0,3}"+L)+"?\\:\\:"+L+"\\:"+te),nt=a(a(a(L+"\\:")+"{0,4}"+L)+"?\\:\\:"+te),Se=a(a(a(L+"\\:")+"{0,5}"+L)+"?\\:\\:"+L),qe=a(a(a(L+"\\:")+"{0,6}"+L)+"?\\:\\:"),at=a([ue,re,xe,Me,Ue,_t,nt,Se,qe].join("|")),He=a(a(J+"|"+b)+"+");a("[vV]"+E+"+\\."+n(J,V,"[\\:]")+"+"),a(a(b+"|"+n(J,V))+"*");var Lt=a(b+"|"+n(J,V,"[\\:\\@]"));return a(a(b+"|"+n(J,V,"[\\@]"))+"+"),a(a(Lt+"|"+n("[\\/\\?]",ae))+"*"),{NOT_SCHEME:new RegExp(n("[^]",u,p,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(n("[^\\%\\:]",J,V),"g"),NOT_HOST:new RegExp(n("[^\\%\\[\\]\\:]",J,V),"g"),NOT_PATH:new RegExp(n("[^\\%\\/\\:\\@]",J,V),"g"),NOT_PATH_NOSCHEME:new RegExp(n("[^\\%\\/\\@]",J,V),"g"),NOT_QUERY:new RegExp(n("[^\\%]",J,V,"[\\:\\@\\/\\?]",ae),"g"),NOT_FRAGMENT:new RegExp(n("[^\\%]",J,V,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(n("[^]",J,V),"g"),UNRESERVED:new RegExp(J,"g"),OTHER_CHARS:new RegExp(n("[^\\%]",J,W),"g"),PCT_ENCODED:new RegExp(b,"g"),IPV4ADDRESS:new RegExp("^("+se+")$"),IPV6ADDRESS:new RegExp("^\\[?("+at+")"+a(a("\\%25|\\%(?!"+E+"{2})")+"("+He+")")+"?\\]?$")}}var y=c(!1),$=c(!0),O=function(){function d(u,p){var E=[],b=!0,q=!1,V=void 0;try{for(var W=u[Symbol.iterator](),Z;!(b=(Z=W.next()).done)&&(E.push(Z.value),!(p&&E.length===p));b=!0);}catch(ae){q=!0,V=ae}finally{try{!b&&W.return&&W.return()}finally{if(q)throw V}}return E}return function(u,p){if(Array.isArray(u))return u;if(Symbol.iterator in Object(u))return d(u,p);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(d){if(Array.isArray(d)){for(var u=0,p=Array(d.length);u<d.length;u++)p[u]=d[u];return p}else return Array.from(d)},S=2147483647,P=36,m=1,v=26,N=38,T=700,A=72,M=128,B="-",X=/^xn--/,le=/[^\0-\x7E]/,je=/[\x2E\u3002\uFF0E\uFF61]/g,ze={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ke=P-m,ie=Math.floor,ke=String.fromCharCode;function pe(d){throw new RangeError(ze[d])}function Ze(d,u){for(var p=[],E=d.length;E--;)p[E]=u(d[E]);return p}function et(d,u){var p=d.split("@"),E="";p.length>1&&(E=p[0]+"@",d=p[1]),d=d.replace(je,".");var b=d.split("."),q=Ze(b,u).join(".");return E+q}function ft(d){for(var u=[],p=0,E=d.length;p<E;){var b=d.charCodeAt(p++);if(b>=55296&&b<=56319&&p<E){var q=d.charCodeAt(p++);(q&64512)==56320?u.push(((b&1023)<<10)+(q&1023)+65536):(u.push(b),p--)}else u.push(b)}return u}var It=function(u){return String.fromCodePoint.apply(String,w(u))},ht=function(u){return u-48<10?u-22:u-65<26?u-65:u-97<26?u-97:P},j=function(u,p){return u+22+75*(u<26)-((p!=0)<<5)},g=function(u,p,E){var b=0;for(u=E?ie(u/T):u>>1,u+=ie(u/p);u>Ke*v>>1;b+=P)u=ie(u/Ke);return ie(b+(Ke+1)*u/(u+N))},R=function(u){var p=[],E=u.length,b=0,q=M,V=A,W=u.lastIndexOf(B);W<0&&(W=0);for(var Z=0;Z<W;++Z)u.charCodeAt(Z)>=128&&pe("not-basic"),p.push(u.charCodeAt(Z));for(var ae=W>0?W+1:0;ae<E;){for(var J=b,Y=1,se=P;;se+=P){ae>=E&&pe("invalid-input");var L=ht(u.charCodeAt(ae++));(L>=P||L>ie((S-b)/Y))&&pe("overflow"),b+=L*Y;var te=se<=V?m:se>=V+v?v:se-V;if(L<te)break;var ue=P-te;Y>ie(S/ue)&&pe("overflow"),Y*=ue}var re=p.length+1;V=g(b-J,re,J==0),ie(b/re)>S-q&&pe("overflow"),q+=ie(b/re),b%=re,p.splice(b++,0,q)}return String.fromCodePoint.apply(String,p)},_=function(u){var p=[];u=ft(u);var E=u.length,b=M,q=0,V=A,W=!0,Z=!1,ae=void 0;try{for(var J=u[Symbol.iterator](),Y;!(W=(Y=J.next()).done);W=!0){var se=Y.value;se<128&&p.push(ke(se))}}catch(zt){Z=!0,ae=zt}finally{try{!W&&J.return&&J.return()}finally{if(Z)throw ae}}var L=p.length,te=L;for(L&&p.push(B);te<E;){var ue=S,re=!0,xe=!1,Me=void 0;try{for(var Ue=u[Symbol.iterator](),_t;!(re=(_t=Ue.next()).done);re=!0){var nt=_t.value;nt>=b&&nt<ue&&(ue=nt)}}catch(zt){xe=!0,Me=zt}finally{try{!re&&Ue.return&&Ue.return()}finally{if(xe)throw Me}}var Se=te+1;ue-b>ie((S-q)/Se)&&pe("overflow"),q+=(ue-b)*Se,b=ue;var qe=!0,at=!1,He=void 0;try{for(var Lt=u[Symbol.iterator](),va;!(qe=(va=Lt.next()).done);qe=!0){var ya=va.value;if(ya<b&&++q>S&&pe("overflow"),ya==b){for(var ar=q,sr=P;;sr+=P){var or=sr<=V?m:sr>=V+v?v:sr-V;if(ar<or)break;var $a=ar-or,ga=P-or;p.push(ke(j(or+$a%ga,0))),ar=ie($a/ga)}p.push(ke(j(ar,0))),V=g(q,Se,te==L),q=0,++te}}}catch(zt){at=!0,He=zt}finally{try{!qe&&Lt.return&&Lt.return()}finally{if(at)throw He}}++q,++b}return p.join("")},o=function(u){return et(u,function(p){return X.test(p)?R(p.slice(4).toLowerCase()):p})},h=function(u){return et(u,function(p){return le.test(p)?"xn--"+_(p):p})},C={version:"2.1.0",ucs2:{decode:ft,encode:It},decode:R,encode:_,toASCII:h,toUnicode:o},k={};function D(d){var u=d.charCodeAt(0),p=void 0;return u<16?p="%0"+u.toString(16).toUpperCase():u<128?p="%"+u.toString(16).toUpperCase():u<2048?p="%"+(u>>6|192).toString(16).toUpperCase()+"%"+(u&63|128).toString(16).toUpperCase():p="%"+(u>>12|224).toString(16).toUpperCase()+"%"+(u>>6&63|128).toString(16).toUpperCase()+"%"+(u&63|128).toString(16).toUpperCase(),p}function G(d){for(var u="",p=0,E=d.length;p<E;){var b=parseInt(d.substr(p+1,2),16);if(b<128)u+=String.fromCharCode(b),p+=3;else if(b>=194&&b<224){if(E-p>=6){var q=parseInt(d.substr(p+4,2),16);u+=String.fromCharCode((b&31)<<6|q&63)}else u+=d.substr(p,6);p+=6}else if(b>=224){if(E-p>=9){var V=parseInt(d.substr(p+4,2),16),W=parseInt(d.substr(p+7,2),16);u+=String.fromCharCode((b&15)<<12|(V&63)<<6|W&63)}else u+=d.substr(p,9);p+=9}else u+=d.substr(p,3),p+=3}return u}function x(d,u){function p(E){var b=G(E);return b.match(u.UNRESERVED)?b:E}return d.scheme&&(d.scheme=String(d.scheme).replace(u.PCT_ENCODED,p).toLowerCase().replace(u.NOT_SCHEME,"")),d.userinfo!==void 0&&(d.userinfo=String(d.userinfo).replace(u.PCT_ENCODED,p).replace(u.NOT_USERINFO,D).replace(u.PCT_ENCODED,i)),d.host!==void 0&&(d.host=String(d.host).replace(u.PCT_ENCODED,p).toLowerCase().replace(u.NOT_HOST,D).replace(u.PCT_ENCODED,i)),d.path!==void 0&&(d.path=String(d.path).replace(u.PCT_ENCODED,p).replace(d.scheme?u.NOT_PATH:u.NOT_PATH_NOSCHEME,D).replace(u.PCT_ENCODED,i)),d.query!==void 0&&(d.query=String(d.query).replace(u.PCT_ENCODED,p).replace(u.NOT_QUERY,D).replace(u.PCT_ENCODED,i)),d.fragment!==void 0&&(d.fragment=String(d.fragment).replace(u.PCT_ENCODED,p).replace(u.NOT_FRAGMENT,D).replace(u.PCT_ENCODED,i)),d}function ne(d){return d.replace(/^0*(.*)/,"$1")||"0"}function Ie(d,u){var p=d.match(u.IPV4ADDRESS)||[],E=O(p,2),b=E[1];return b?b.split(".").map(ne).join("."):d}function pt(d,u){var p=d.match(u.IPV6ADDRESS)||[],E=O(p,3),b=E[1],q=E[2];if(b){for(var V=b.toLowerCase().split("::").reverse(),W=O(V,2),Z=W[0],ae=W[1],J=ae?ae.split(":").map(ne):[],Y=Z.split(":").map(ne),se=u.IPV4ADDRESS.test(Y[Y.length-1]),L=se?7:8,te=Y.length-L,ue=Array(L),re=0;re<L;++re)ue[re]=J[re]||Y[te+re]||"";se&&(ue[L-1]=Ie(ue[L-1],u));var xe=ue.reduce(function(Se,qe,at){if(!qe||qe==="0"){var He=Se[Se.length-1];He&&He.index+He.length===at?He.length++:Se.push({index:at,length:1})}return Se},[]),Me=xe.sort(function(Se,qe){return qe.length-Se.length})[0],Ue=void 0;if(Me&&Me.length>1){var _t=ue.slice(0,Me.index),nt=ue.slice(Me.index+Me.length);Ue=_t.join(":")+"::"+nt.join(":")}else Ue=ue.join(":");return q&&(Ue+="%"+q),Ue}else return d}var At=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Dt="".match(/(){0}/)[1]===void 0;function we(d){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p={},E=u.iri!==!1?$:y;u.reference==="suffix"&&(d=(u.scheme?u.scheme+":":"")+"//"+d);var b=d.match(At);if(b){Dt?(p.scheme=b[1],p.userinfo=b[3],p.host=b[4],p.port=parseInt(b[5],10),p.path=b[6]||"",p.query=b[7],p.fragment=b[8],isNaN(p.port)&&(p.port=b[5])):(p.scheme=b[1]||void 0,p.userinfo=d.indexOf("@")!==-1?b[3]:void 0,p.host=d.indexOf("//")!==-1?b[4]:void 0,p.port=parseInt(b[5],10),p.path=b[6]||"",p.query=d.indexOf("?")!==-1?b[7]:void 0,p.fragment=d.indexOf("#")!==-1?b[8]:void 0,isNaN(p.port)&&(p.port=d.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?b[4]:void 0)),p.host&&(p.host=pt(Ie(p.host,E),E)),p.scheme===void 0&&p.userinfo===void 0&&p.host===void 0&&p.port===void 0&&!p.path&&p.query===void 0?p.reference="same-document":p.scheme===void 0?p.reference="relative":p.fragment===void 0?p.reference="absolute":p.reference="uri",u.reference&&u.reference!=="suffix"&&u.reference!==p.reference&&(p.error=p.error||"URI is not a "+u.reference+" reference.");var q=k[(u.scheme||p.scheme||"").toLowerCase()];if(!u.unicodeSupport&&(!q||!q.unicodeSupport)){if(p.host&&(u.domainHost||q&&q.domainHost))try{p.host=C.toASCII(p.host.replace(E.PCT_ENCODED,G).toLowerCase())}catch(V){p.error=p.error||"Host's domain name can not be converted to ASCII via punycode: "+V}x(p,y)}else x(p,E);q&&q.parse&&q.parse(p,u)}else p.error=p.error||"URI can not be parsed.";return p}function Mt(d,u){var p=u.iri!==!1?$:y,E=[];return d.userinfo!==void 0&&(E.push(d.userinfo),E.push("@")),d.host!==void 0&&E.push(pt(Ie(String(d.host),p),p).replace(p.IPV6ADDRESS,function(b,q,V){return"["+q+(V?"%25"+V:"")+"]"})),(typeof d.port=="number"||typeof d.port=="string")&&(E.push(":"),E.push(String(d.port))),E.length?E.join(""):void 0}var mt=/^\.\.?\//,vt=/^\/\.(\/|$)/,yt=/^\/\.\.(\/|$)/,Ut=/^\/?(?:.|\n)*?(?=\/|$)/;function Ae(d){for(var u=[];d.length;)if(d.match(mt))d=d.replace(mt,"");else if(d.match(vt))d=d.replace(vt,"/");else if(d.match(yt))d=d.replace(yt,"/"),u.pop();else if(d==="."||d==="..")d="";else{var p=d.match(Ut);if(p){var E=p[0];d=d.slice(E.length),u.push(E)}else throw new Error("Unexpected dot segment condition")}return u.join("")}function $e(d){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=u.iri?$:y,E=[],b=k[(u.scheme||d.scheme||"").toLowerCase()];if(b&&b.serialize&&b.serialize(d,u),d.host&&!p.IPV6ADDRESS.test(d.host)){if(u.domainHost||b&&b.domainHost)try{d.host=u.iri?C.toUnicode(d.host):C.toASCII(d.host.replace(p.PCT_ENCODED,G).toLowerCase())}catch(W){d.error=d.error||"Host's domain name can not be converted to "+(u.iri?"Unicode":"ASCII")+" via punycode: "+W}}x(d,p),u.reference!=="suffix"&&d.scheme&&(E.push(d.scheme),E.push(":"));var q=Mt(d,u);if(q!==void 0&&(u.reference!=="suffix"&&E.push("//"),E.push(q),d.path&&d.path.charAt(0)!=="/"&&E.push("/")),d.path!==void 0){var V=d.path;!u.absolutePath&&(!b||!b.absolutePath)&&(V=Ae(V)),q===void 0&&(V=V.replace(/^\/\//,"/%2F")),E.push(V)}return d.query!==void 0&&(E.push("?"),E.push(d.query)),d.fragment!==void 0&&(E.push("#"),E.push(d.fragment)),E.join("")}function $t(d,u){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},E=arguments[3],b={};return E||(d=we($e(d,p),p),u=we($e(u,p),p)),p=p||{},!p.tolerant&&u.scheme?(b.scheme=u.scheme,b.userinfo=u.userinfo,b.host=u.host,b.port=u.port,b.path=Ae(u.path||""),b.query=u.query):(u.userinfo!==void 0||u.host!==void 0||u.port!==void 0?(b.userinfo=u.userinfo,b.host=u.host,b.port=u.port,b.path=Ae(u.path||""),b.query=u.query):(u.path?(u.path.charAt(0)==="/"?b.path=Ae(u.path):((d.userinfo!==void 0||d.host!==void 0||d.port!==void 0)&&!d.path?b.path="/"+u.path:d.path?b.path=d.path.slice(0,d.path.lastIndexOf("/")+1)+u.path:b.path=u.path,b.path=Ae(b.path)),b.query=u.query):(b.path=d.path,u.query!==void 0?b.query=u.query:b.query=d.query),b.userinfo=d.userinfo,b.host=d.host,b.port=d.port),b.scheme=d.scheme),b.fragment=u.fragment,b}function qt(d,u,p){var E=f({scheme:"null"},p);return $e($t(we(d,E),we(u,E),E,!0),E)}function tt(d,u){return typeof d=="string"?d=$e(we(d,u),u):s(d)==="object"&&(d=we($e(d,u),u)),d}function Vt(d,u,p){return typeof d=="string"?d=$e(we(d,p),p):s(d)==="object"&&(d=$e(d,p)),typeof u=="string"?u=$e(we(u,p),p):s(u)==="object"&&(u=$e(u,p)),d===u}function nr(d,u){return d&&d.toString().replace(!u||!u.iri?y.ESCAPE:$.ESCAPE,D)}function Ee(d,u){return d&&d.toString().replace(!u||!u.iri?y.PCT_ENCODED:$.PCT_ENCODED,G)}var rt={scheme:"http",domainHost:!0,parse:function(u,p){return u.host||(u.error=u.error||"HTTP URIs must have a host."),u},serialize:function(u,p){var E=String(u.scheme).toLowerCase()==="https";return(u.port===(E?443:80)||u.port==="")&&(u.port=void 0),u.path||(u.path="/"),u}},ua={scheme:"https",domainHost:rt.domainHost,parse:rt.parse,serialize:rt.serialize};function ca(d){return typeof d.secure=="boolean"?d.secure:String(d.scheme).toLowerCase()==="wss"}var Ft={scheme:"ws",domainHost:!0,parse:function(u,p){var E=u;return E.secure=ca(E),E.resourceName=(E.path||"/")+(E.query?"?"+E.query:""),E.path=void 0,E.query=void 0,E},serialize:function(u,p){if((u.port===(ca(u)?443:80)||u.port==="")&&(u.port=void 0),typeof u.secure=="boolean"&&(u.scheme=u.secure?"wss":"ws",u.secure=void 0),u.resourceName){var E=u.resourceName.split("?"),b=O(E,2),q=b[0],V=b[1];u.path=q&&q!=="/"?q:void 0,u.query=V,u.resourceName=void 0}return u.fragment=void 0,u}},la={scheme:"wss",domainHost:Ft.domainHost,parse:Ft.parse,serialize:Ft.serialize},mo={},da="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",De="[0-9A-Fa-f]",vo=a(a("%[EFef]"+De+"%"+De+De+"%"+De+De)+"|"+a("%[89A-Fa-f]"+De+"%"+De+De)+"|"+a("%"+De+De)),yo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",$o="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",go=n($o,'[\\"\\\\]'),_o="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",wo=new RegExp(da,"g"),gt=new RegExp(vo,"g"),bo=new RegExp(n("[^]",yo,"[\\.]",'[\\"]',go),"g"),fa=new RegExp(n("[^]",da,_o),"g"),Eo=fa;function kr(d){var u=G(d);return u.match(wo)?u:d}var ha={scheme:"mailto",parse:function(u,p){var E=u,b=E.to=E.path?E.path.split(","):[];if(E.path=void 0,E.query){for(var q=!1,V={},W=E.query.split("&"),Z=0,ae=W.length;Z<ae;++Z){var J=W[Z].split("=");switch(J[0]){case"to":for(var Y=J[1].split(","),se=0,L=Y.length;se<L;++se)b.push(Y[se]);break;case"subject":E.subject=Ee(J[1],p);break;case"body":E.body=Ee(J[1],p);break;default:q=!0,V[Ee(J[0],p)]=Ee(J[1],p);break}}q&&(E.headers=V)}E.query=void 0;for(var te=0,ue=b.length;te<ue;++te){var re=b[te].split("@");if(re[0]=Ee(re[0]),p.unicodeSupport)re[1]=Ee(re[1],p).toLowerCase();else try{re[1]=C.toASCII(Ee(re[1],p).toLowerCase())}catch(xe){E.error=E.error||"Email address's domain name can not be converted to ASCII via punycode: "+xe}b[te]=re.join("@")}return E},serialize:function(u,p){var E=u,b=l(u.to);if(b){for(var q=0,V=b.length;q<V;++q){var W=String(b[q]),Z=W.lastIndexOf("@"),ae=W.slice(0,Z).replace(gt,kr).replace(gt,i).replace(bo,D),J=W.slice(Z+1);try{J=p.iri?C.toUnicode(J):C.toASCII(Ee(J,p).toLowerCase())}catch(te){E.error=E.error||"Email address's domain name can not be converted to "+(p.iri?"Unicode":"ASCII")+" via punycode: "+te}b[q]=ae+"@"+J}E.path=b.join(",")}var Y=u.headers=u.headers||{};u.subject&&(Y.subject=u.subject),u.body&&(Y.body=u.body);var se=[];for(var L in Y)Y[L]!==mo[L]&&se.push(L.replace(gt,kr).replace(gt,i).replace(fa,D)+"="+Y[L].replace(gt,kr).replace(gt,i).replace(Eo,D));return se.length&&(E.query=se.join("&")),E}},So=/^([^\:]+)\:(.*)/,pa={scheme:"urn",parse:function(u,p){var E=u.path&&u.path.match(So),b=u;if(E){var q=p.scheme||b.scheme||"urn",V=E[1].toLowerCase(),W=E[2],Z=q+":"+(p.nid||V),ae=k[Z];b.nid=V,b.nss=W,b.path=void 0,ae&&(b=ae.parse(b,p))}else b.error=b.error||"URN can not be parsed.";return b},serialize:function(u,p){var E=p.scheme||u.scheme||"urn",b=u.nid,q=E+":"+(p.nid||b),V=k[q];V&&(u=V.serialize(u,p));var W=u,Z=u.nss;return W.path=(b||p.nid)+":"+Z,W}},Po=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ma={scheme:"urn:uuid",parse:function(u,p){var E=u;return E.uuid=E.nss,E.nss=void 0,!p.tolerant&&(!E.uuid||!E.uuid.match(Po))&&(E.error=E.error||"UUID is not valid."),E},serialize:function(u,p){var E=u;return E.nss=(u.uuid||"").toLowerCase(),E}};k[rt.scheme]=rt,k[ua.scheme]=ua,k[Ft.scheme]=Ft,k[la.scheme]=la,k[ha.scheme]=ha,k[pa.scheme]=pa,k[ma.scheme]=ma,r.SCHEMES=k,r.pctEncChar=D,r.pctDecChars=G,r.parse=we,r.removeDotSegments=Ae,r.serialize=$e,r.resolveComponents=$t,r.resolve=qt,r.normalize=tt,r.equal=Vt,r.escapeComponent=nr,r.unescapeComponent=Ee,Object.defineProperty(r,"__esModule",{value:!0})})})(sn,sn.exports);var Nu=sn.exports;Object.defineProperty(Sn,"__esModule",{value:!0});const Gs=Nu;Gs.code='require("ajv/dist/runtime/uri").default';Sn.default=Gs;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Re;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=H;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=er,a=Tt,s=ct,i=_e,l=H,f=he,c=ce,y=I,$=Pu,O=Sn,w=(j,g)=>new RegExp(j,g);w.code="new RegExp";const S=["removeAdditional","useDefaults","coerceTypes"],P=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),m={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},N=200;function T(j){var g,R,_,o,h,C,k,D,G,x,ne,Ie,pt,At,Dt,we,Mt,mt,vt,yt,Ut,Ae,$e,$t,qt;const tt=j.strict,Vt=(g=j.code)===null||g===void 0?void 0:g.optimize,nr=Vt===!0||Vt===void 0?1:Vt||0,Ee=(_=(R=j.code)===null||R===void 0?void 0:R.regExp)!==null&&_!==void 0?_:w,rt=(o=j.uriResolver)!==null&&o!==void 0?o:O.default;return{strictSchema:(C=(h=j.strictSchema)!==null&&h!==void 0?h:tt)!==null&&C!==void 0?C:!0,strictNumbers:(D=(k=j.strictNumbers)!==null&&k!==void 0?k:tt)!==null&&D!==void 0?D:!0,strictTypes:(x=(G=j.strictTypes)!==null&&G!==void 0?G:tt)!==null&&x!==void 0?x:"log",strictTuples:(Ie=(ne=j.strictTuples)!==null&&ne!==void 0?ne:tt)!==null&&Ie!==void 0?Ie:"log",strictRequired:(At=(pt=j.strictRequired)!==null&&pt!==void 0?pt:tt)!==null&&At!==void 0?At:!1,code:j.code?{...j.code,optimize:nr,regExp:Ee}:{optimize:nr,regExp:Ee},loopRequired:(Dt=j.loopRequired)!==null&&Dt!==void 0?Dt:N,loopEnum:(we=j.loopEnum)!==null&&we!==void 0?we:N,meta:(Mt=j.meta)!==null&&Mt!==void 0?Mt:!0,messages:(mt=j.messages)!==null&&mt!==void 0?mt:!0,inlineRefs:(vt=j.inlineRefs)!==null&&vt!==void 0?vt:!0,schemaId:(yt=j.schemaId)!==null&&yt!==void 0?yt:"$id",addUsedSchema:(Ut=j.addUsedSchema)!==null&&Ut!==void 0?Ut:!0,validateSchema:(Ae=j.validateSchema)!==null&&Ae!==void 0?Ae:!0,validateFormats:($e=j.validateFormats)!==null&&$e!==void 0?$e:!0,unicodeRegExp:($t=j.unicodeRegExp)!==null&&$t!==void 0?$t:!0,int32range:(qt=j.int32range)!==null&&qt!==void 0?qt:!0,uriResolver:rt}}class A{constructor(g={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,g=this.opts={...g,...T(g)};const{es5:R,lines:_}=this.opts.code;this.scope=new l.ValueScope({scope:{},prefixes:P,es5:R,lines:_}),this.logger=ie(g.logger);const o=g.validateFormats;g.validateFormats=!1,this.RULES=(0,s.getRules)(),M.call(this,m,g,"NOT SUPPORTED"),M.call(this,v,g,"DEPRECATED","warn"),this._metaOpts=ze.call(this),g.formats&&le.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),g.keywords&&je.call(this,g.keywords),typeof g.meta=="object"&&this.addMetaSchema(g.meta),X.call(this),g.validateFormats=o}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:g,meta:R,schemaId:_}=this.opts;let o=$;_==="id"&&(o={...$},o.id=o.$id,delete o.$id),R&&g&&this.addMetaSchema(o,o[_],!1)}defaultMeta(){const{meta:g,schemaId:R}=this.opts;return this.opts.defaultMeta=typeof g=="object"?g[R]||g:void 0}validate(g,R){let _;if(typeof g=="string"){if(_=this.getSchema(g),!_)throw new Error(`no schema with key or ref "${g}"`)}else _=this.compile(g);const o=_(R);return"$async"in _||(this.errors=_.errors),o}compile(g,R){const _=this._addSchema(g,R);return _.validate||this._compileSchemaEnv(_)}compileAsync(g,R){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:_}=this.opts;return o.call(this,g,R);async function o(x,ne){await h.call(this,x.$schema);const Ie=this._addSchema(x,ne);return Ie.validate||C.call(this,Ie)}async function h(x){x&&!this.getSchema(x)&&await o.call(this,{$ref:x},!0)}async function C(x){try{return this._compileSchemaEnv(x)}catch(ne){if(!(ne instanceof a.default))throw ne;return k.call(this,ne),await D.call(this,ne.missingSchema),C.call(this,x)}}function k({missingSchema:x,missingRef:ne}){if(this.refs[x])throw new Error(`AnySchema ${x} is loaded but ${ne} cannot be resolved`)}async function D(x){const ne=await G.call(this,x);this.refs[x]||await h.call(this,ne.$schema),this.refs[x]||this.addSchema(ne,x,R)}async function G(x){const ne=this._loading[x];if(ne)return ne;try{return await(this._loading[x]=_(x))}finally{delete this._loading[x]}}}addSchema(g,R,_,o=this.opts.validateSchema){if(Array.isArray(g)){for(const C of g)this.addSchema(C,void 0,_,o);return this}let h;if(typeof g=="object"){const{schemaId:C}=this.opts;if(h=g[C],h!==void 0&&typeof h!="string")throw new Error(`schema ${C} must be string`)}return R=(0,f.normalizeId)(R||h),this._checkUnique(R),this.schemas[R]=this._addSchema(g,_,R,o,!0),this}addMetaSchema(g,R,_=this.opts.validateSchema){return this.addSchema(g,R,!0,_),this}validateSchema(g,R){if(typeof g=="boolean")return!0;let _;if(_=g.$schema,_!==void 0&&typeof _!="string")throw new Error("$schema must be a string");if(_=_||this.opts.defaultMeta||this.defaultMeta(),!_)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const o=this.validate(_,g);if(!o&&R){const h="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(h);else throw new Error(h)}return o}getSchema(g){let R;for(;typeof(R=B.call(this,g))=="string";)g=R;if(R===void 0){const{schemaId:_}=this.opts,o=new i.SchemaEnv({schema:{},schemaId:_});if(R=i.resolveSchema.call(this,o,g),!R)return;this.refs[g]=R}return R.validate||this._compileSchemaEnv(R)}removeSchema(g){if(g instanceof RegExp)return this._removeAllSchemas(this.schemas,g),this._removeAllSchemas(this.refs,g),this;switch(typeof g){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const R=B.call(this,g);return typeof R=="object"&&this._cache.delete(R.schema),delete this.schemas[g],delete this.refs[g],this}case"object":{const R=g;this._cache.delete(R);let _=g[this.opts.schemaId];return _&&(_=(0,f.normalizeId)(_),delete this.schemas[_],delete this.refs[_]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(g){for(const R of g)this.addKeyword(R);return this}addKeyword(g,R){let _;if(typeof g=="string")_=g,typeof R=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),R.keyword=_);else if(typeof g=="object"&&R===void 0){if(R=g,_=R.keyword,Array.isArray(_)&&!_.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(pe.call(this,_,R),!R)return(0,y.eachItem)(_,h=>Ze.call(this,h)),this;ft.call(this,R);const o={...R,type:(0,c.getJSONTypes)(R.type),schemaType:(0,c.getJSONTypes)(R.schemaType)};return(0,y.eachItem)(_,o.type.length===0?h=>Ze.call(this,h,o):h=>o.type.forEach(C=>Ze.call(this,h,o,C))),this}getKeyword(g){const R=this.RULES.all[g];return typeof R=="object"?R.definition:!!R}removeKeyword(g){const{RULES:R}=this;delete R.keywords[g],delete R.all[g];for(const _ of R.rules){const o=_.rules.findIndex(h=>h.keyword===g);o>=0&&_.rules.splice(o,1)}return this}addFormat(g,R){return typeof R=="string"&&(R=new RegExp(R)),this.formats[g]=R,this}errorsText(g=this.errors,{separator:R=", ",dataVar:_="data"}={}){return!g||g.length===0?"No errors":g.map(o=>`${_}${o.instancePath} ${o.message}`).reduce((o,h)=>o+R+h)}$dataMetaSchema(g,R){const _=this.RULES.all;g=JSON.parse(JSON.stringify(g));for(const o of R){const h=o.split("/").slice(1);let C=g;for(const k of h)C=C[k];for(const k in _){const D=_[k];if(typeof D!="object")continue;const{$data:G}=D.definition,x=C[k];G&&x&&(C[k]=ht(x))}}return g}_removeAllSchemas(g,R){for(const _ in g){const o=g[_];(!R||R.test(_))&&(typeof o=="string"?delete g[_]:o&&!o.meta&&(this._cache.delete(o.schema),delete g[_]))}}_addSchema(g,R,_,o=this.opts.validateSchema,h=this.opts.addUsedSchema){let C;const{schemaId:k}=this.opts;if(typeof g=="object")C=g[k];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof g!="boolean")throw new Error("schema must be object or boolean")}let D=this._cache.get(g);if(D!==void 0)return D;_=(0,f.normalizeId)(C||_);const G=f.getSchemaRefs.call(this,g,_);return D=new i.SchemaEnv({schema:g,schemaId:k,meta:R,baseId:_,localRefs:G}),this._cache.set(D.schema,D),h&&!_.startsWith("#")&&(_&&this._checkUnique(_),this.refs[_]=D),o&&this.validateSchema(g,!0),D}_checkUnique(g){if(this.schemas[g]||this.refs[g])throw new Error(`schema with key or id "${g}" already exists`)}_compileSchemaEnv(g){if(g.meta?this._compileMetaSchema(g):i.compileSchema.call(this,g),!g.validate)throw new Error("ajv implementation error");return g.validate}_compileMetaSchema(g){const R=this.opts;this.opts=this._metaOpts;try{i.compileSchema.call(this,g)}finally{this.opts=R}}}A.ValidationError=n.default,A.MissingRefError=a.default,e.default=A;function M(j,g,R,_="error"){for(const o in j){const h=o;h in g&&this.logger[_](`${R}: option ${o}. ${j[h]}`)}}function B(j){return j=(0,f.normalizeId)(j),this.schemas[j]||this.refs[j]}function X(){const j=this.opts.schemas;if(j)if(Array.isArray(j))this.addSchema(j);else for(const g in j)this.addSchema(j[g],g)}function le(){for(const j in this.opts.formats){const g=this.opts.formats[j];g&&this.addFormat(j,g)}}function je(j){if(Array.isArray(j)){this.addVocabulary(j);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const g in j){const R=j[g];R.keyword||(R.keyword=g),this.addKeyword(R)}}function ze(){const j={...this.opts};for(const g of S)delete j[g];return j}const Ke={log(){},warn(){},error(){}};function ie(j){if(j===!1)return Ke;if(j===void 0)return console;if(j.log&&j.warn&&j.error)return j;throw new Error("logger must implement log, warn and error methods")}const ke=/^[a-z_$][a-z0-9_$:-]*$/i;function pe(j,g){const{RULES:R}=this;if((0,y.eachItem)(j,_=>{if(R.keywords[_])throw new Error(`Keyword ${_} is already defined`);if(!ke.test(_))throw new Error(`Keyword ${_} has invalid name`)}),!!g&&g.$data&&!("code"in g||"validate"in g))throw new Error('$data keyword must have "code" or "validate" function')}function Ze(j,g,R){var _;const o=g==null?void 0:g.post;if(R&&o)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:h}=this;let C=o?h.post:h.rules.find(({type:D})=>D===R);if(C||(C={type:R,rules:[]},h.rules.push(C)),h.keywords[j]=!0,!g)return;const k={keyword:j,definition:{...g,type:(0,c.getJSONTypes)(g.type),schemaType:(0,c.getJSONTypes)(g.schemaType)}};g.before?et.call(this,C,k,g.before):C.rules.push(k),h.all[j]=k,(_=g.implements)===null||_===void 0||_.forEach(D=>this.addKeyword(D))}function et(j,g,R){const _=j.rules.findIndex(o=>o.keyword===R);_>=0?j.rules.splice(_,0,g):(j.rules.push(g),this.logger.warn(`rule ${R} is not defined`))}function ft(j){let{metaSchema:g}=j;g!==void 0&&(j.$data&&this.opts.$data&&(g=ht(g)),j.validateSchema=this.compile(g,!0))}const It={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ht(j){return{anyOf:[j,It]}}})(hs);var Pn={},Nn={},On={};Object.defineProperty(On,"__esModule",{value:!0});const Ou={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};On.default=Ou;var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.callRef=lt.getValidate=void 0;const Cu=Tt,Ra=K,ge=H,bt=Le,Ta=_e,ir=I,Ru={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:n}=e,{baseId:a,schemaEnv:s,validateName:i,opts:l,self:f}=n,{root:c}=s;if((r==="#"||r==="#/")&&a===c.baseId)return $();const y=Ta.resolveRef.call(f,c,a,r);if(y===void 0)throw new Cu.default(n.opts.uriResolver,a,r);if(y instanceof Ta.SchemaEnv)return O(y);return w(y);function $(){if(s===c)return hr(e,i,s,s.$async);const S=t.scopeValue("root",{ref:c});return hr(e,(0,ge._)`${S}.validate`,c,c.$async)}function O(S){const P=Js(e,S);hr(e,P,S,S.$async)}function w(S){const P=t.scopeValue("schema",l.code.source===!0?{ref:S,code:(0,ge.stringify)(S)}:{ref:S}),m=t.name("valid"),v=e.subschema({schema:S,dataTypes:[],schemaPath:ge.nil,topSchemaRef:P,errSchemaPath:r},m);e.mergeEvaluated(v),e.ok(m)}}};function Js(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,ge._)`${r.scopeValue("wrapper",{ref:t})}.validate`}lt.getValidate=Js;function hr(e,t,r,n){const{gen:a,it:s}=e,{allErrors:i,schemaEnv:l,opts:f}=s,c=f.passContext?bt.default.this:ge.nil;n?y():$();function y(){if(!l.$async)throw new Error("async schema referenced by sync schema");const S=a.let("valid");a.try(()=>{a.code((0,ge._)`await ${(0,Ra.callValidateCode)(e,t,c)}`),w(t),i||a.assign(S,!0)},P=>{a.if((0,ge._)`!(${P} instanceof ${s.ValidationError})`,()=>a.throw(P)),O(P),i||a.assign(S,!1)}),e.ok(S)}function $(){e.result((0,Ra.callValidateCode)(e,t,c),()=>w(t),()=>O(t))}function O(S){const P=(0,ge._)`${S}.errors`;a.assign(bt.default.vErrors,(0,ge._)`${bt.default.vErrors} === null ? ${P} : ${bt.default.vErrors}.concat(${P})`),a.assign(bt.default.errors,(0,ge._)`${bt.default.vErrors}.length`)}function w(S){var P;if(!s.opts.unevaluated)return;const m=(P=r==null?void 0:r.validate)===null||P===void 0?void 0:P.evaluated;if(s.props!==!0)if(m&&!m.dynamicProps)m.props!==void 0&&(s.props=ir.mergeEvaluated.props(a,m.props,s.props));else{const v=a.var("props",(0,ge._)`${S}.evaluated.props`);s.props=ir.mergeEvaluated.props(a,v,s.props,ge.Name)}if(s.items!==!0)if(m&&!m.dynamicItems)m.items!==void 0&&(s.items=ir.mergeEvaluated.items(a,m.items,s.items));else{const v=a.var("items",(0,ge._)`${S}.evaluated.items`);s.items=ir.mergeEvaluated.items(a,v,s.items,ge.Name)}}}lt.callRef=hr;lt.default=Ru;Object.defineProperty(Nn,"__esModule",{value:!0});const Tu=On,ju=lt,ku=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Tu.default,ju.default];Nn.default=ku;var Cn={},Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});const gr=H,Xe=gr.operators,_r={maximum:{okStr:"<=",ok:Xe.LTE,fail:Xe.GT},minimum:{okStr:">=",ok:Xe.GTE,fail:Xe.LT},exclusiveMaximum:{okStr:"<",ok:Xe.LT,fail:Xe.GTE},exclusiveMinimum:{okStr:">",ok:Xe.GT,fail:Xe.LTE}},Iu={message:({keyword:e,schemaCode:t})=>(0,gr.str)`must be ${_r[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,gr._)`{comparison: ${_r[e].okStr}, limit: ${t}}`},Au={keyword:Object.keys(_r),type:"number",schemaType:"number",$data:!0,error:Iu,code(e){const{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,gr._)`${r} ${_r[t].fail} ${n} || isNaN(${r})`)}};Rn.default=Au;var Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});const Jt=H,Du={message:({schemaCode:e})=>(0,Jt.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Jt._)`{multipleOf: ${e}}`},Mu={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Du,code(e){const{gen:t,data:r,schemaCode:n,it:a}=e,s=a.opts.multipleOfPrecision,i=t.let("res"),l=s?(0,Jt._)`Math.abs(Math.round(${i}) - ${i}) > 1e-${s}`:(0,Jt._)`${i} !== parseInt(${i})`;e.fail$data((0,Jt._)`(${n} === 0 || (${i} = ${r}/${n}, ${l}))`)}};Tn.default=Mu;var jn={},kn={};Object.defineProperty(kn,"__esModule",{value:!0});function xs(e){const t=e.length;let r=0,n=0,a;for(;n<t;)r++,a=e.charCodeAt(n++),a>=55296&&a<=56319&&n<t&&(a=e.charCodeAt(n),(a&64512)===56320&&n++);return r}kn.default=xs;xs.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(jn,"__esModule",{value:!0});const it=H,Uu=I,qu=kn,Vu={message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,it.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,it._)`{limit: ${e}}`},Fu={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Vu,code(e){const{keyword:t,data:r,schemaCode:n,it:a}=e,s=t==="maxLength"?it.operators.GT:it.operators.LT,i=a.opts.unicode===!1?(0,it._)`${r}.length`:(0,it._)`${(0,Uu.useFunc)(e.gen,qu.default)}(${r})`;e.fail$data((0,it._)`${i} ${s} ${n}`)}};jn.default=Fu;var In={};Object.defineProperty(In,"__esModule",{value:!0});const Lu=K,wr=H,zu={message:({schemaCode:e})=>(0,wr.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,wr._)`{pattern: ${e}}`},Ku={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:zu,code(e){const{data:t,$data:r,schema:n,schemaCode:a,it:s}=e,i=s.opts.unicodeRegExp?"u":"",l=r?(0,wr._)`(new RegExp(${a}, ${i}))`:(0,Lu.usePattern)(e,n);e.fail$data((0,wr._)`!${l}.test(${t})`)}};In.default=Ku;var An={};Object.defineProperty(An,"__esModule",{value:!0});const xt=H,Hu={message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,xt.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,xt._)`{limit: ${e}}`},Bu={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Hu,code(e){const{keyword:t,data:r,schemaCode:n}=e,a=t==="maxProperties"?xt.operators.GT:xt.operators.LT;e.fail$data((0,xt._)`Object.keys(${r}).length ${a} ${n}`)}};An.default=Bu;var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});const Ht=K,Wt=H,Gu=I,Ju={message:({params:{missingProperty:e}})=>(0,Wt.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Wt._)`{missingProperty: ${e}}`},xu={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Ju,code(e){const{gen:t,schema:r,schemaCode:n,data:a,$data:s,it:i}=e,{opts:l}=i;if(!s&&r.length===0)return;const f=r.length>=l.loopRequired;if(i.allErrors?c():y(),l.strictRequired){const w=e.parentSchema.properties,{definedProperties:S}=e.it;for(const P of r)if((w==null?void 0:w[P])===void 0&&!S.has(P)){const m=i.schemaEnv.baseId+i.errSchemaPath,v=`required property "${P}" is not defined at "${m}" (strictRequired)`;(0,Gu.checkStrictMode)(i,v,i.opts.strictRequired)}}function c(){if(f||s)e.block$data(Wt.nil,$);else for(const w of r)(0,Ht.checkReportMissingProp)(e,w)}function y(){const w=t.let("missing");if(f||s){const S=t.let("valid",!0);e.block$data(S,()=>O(w,S)),e.ok(S)}else t.if((0,Ht.checkMissingProp)(e,r,w)),(0,Ht.reportMissingProp)(e,w),t.else()}function $(){t.forOf("prop",n,w=>{e.setParams({missingProperty:w}),t.if((0,Ht.noPropertyInData)(t,a,w,l.ownProperties),()=>e.error())})}function O(w,S){e.setParams({missingProperty:w}),t.forOf(w,n,()=>{t.assign(S,(0,Ht.propertyInData)(t,a,w,l.ownProperties)),t.if((0,Wt.not)(S),()=>{e.error(),t.break()})},Wt.nil)}}};Dn.default=xu;var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});const Xt=H,Wu={message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,Xt.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,Xt._)`{limit: ${e}}`},Xu={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Wu,code(e){const{keyword:t,data:r,schemaCode:n}=e,a=t==="maxItems"?Xt.operators.GT:Xt.operators.LT;e.fail$data((0,Xt._)`${r}.length ${a} ${n}`)}};Mn.default=Xu;var Un={},tr={};Object.defineProperty(tr,"__esModule",{value:!0});const Ws=Rs;Ws.code='require("ajv/dist/runtime/equal").default';tr.default=Ws;Object.defineProperty(Un,"__esModule",{value:!0});const Mr=ce,de=H,Qu=I,Yu=tr,Zu={message:({params:{i:e,j:t}})=>(0,de.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,de._)`{i: ${e}, j: ${t}}`},ec={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Zu,code(e){const{gen:t,data:r,$data:n,schema:a,parentSchema:s,schemaCode:i,it:l}=e;if(!n&&!a)return;const f=t.let("valid"),c=s.items?(0,Mr.getSchemaTypes)(s.items):[];e.block$data(f,y,(0,de._)`${i} === false`),e.ok(f);function y(){const S=t.let("i",(0,de._)`${r}.length`),P=t.let("j");e.setParams({i:S,j:P}),t.assign(f,!0),t.if((0,de._)`${S} > 1`,()=>($()?O:w)(S,P))}function $(){return c.length>0&&!c.some(S=>S==="object"||S==="array")}function O(S,P){const m=t.name("item"),v=(0,Mr.checkDataTypes)(c,m,l.opts.strictNumbers,Mr.DataType.Wrong),N=t.const("indices",(0,de._)`{}`);t.for((0,de._)`;${S}--;`,()=>{t.let(m,(0,de._)`${r}[${S}]`),t.if(v,(0,de._)`continue`),c.length>1&&t.if((0,de._)`typeof ${m} == "string"`,(0,de._)`${m} += "_"`),t.if((0,de._)`typeof ${N}[${m}] == "number"`,()=>{t.assign(P,(0,de._)`${N}[${m}]`),e.error(),t.assign(f,!1).break()}).code((0,de._)`${N}[${m}] = ${S}`)})}function w(S,P){const m=(0,Qu.useFunc)(t,Yu.default),v=t.name("outer");t.label(v).for((0,de._)`;${S}--;`,()=>t.for((0,de._)`${P} = ${S}; ${P}--;`,()=>t.if((0,de._)`${m}(${r}[${S}], ${r}[${P}])`,()=>{e.error(),t.assign(f,!1).break(v)})))}}};Un.default=ec;var qn={};Object.defineProperty(qn,"__esModule",{value:!0});const on=H,tc=I,rc=tr,nc={message:"must be equal to constant",params:({schemaCode:e})=>(0,on._)`{allowedValue: ${e}}`},ac={keyword:"const",$data:!0,error:nc,code(e){const{gen:t,data:r,$data:n,schemaCode:a,schema:s}=e;n||s&&typeof s=="object"?e.fail$data((0,on._)`!${(0,tc.useFunc)(t,rc.default)}(${r}, ${a})`):e.fail((0,on._)`${s} !== ${r}`)}};qn.default=ac;var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});const Bt=H,sc=I,oc=tr,ic={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Bt._)`{allowedValues: ${e}}`},uc={keyword:"enum",schemaType:"array",$data:!0,error:ic,code(e){const{gen:t,data:r,$data:n,schema:a,schemaCode:s,it:i}=e;if(!n&&a.length===0)throw new Error("enum must have non-empty array");const l=a.length>=i.opts.loopEnum;let f;const c=()=>f??(f=(0,sc.useFunc)(t,oc.default));let y;if(l||n)y=t.let("valid"),e.block$data(y,$);else{if(!Array.isArray(a))throw new Error("ajv implementation error");const w=t.const("vSchema",s);y=(0,Bt.or)(...a.map((S,P)=>O(w,P)))}e.pass(y);function $(){t.assign(y,!1),t.forOf("v",s,w=>t.if((0,Bt._)`${c()}(${r}, ${w})`,()=>t.assign(y,!0).break()))}function O(w,S){const P=a[S];return typeof P=="object"&&P!==null?(0,Bt._)`${c()}(${r}, ${w}[${S}])`:(0,Bt._)`${r} === ${P}`}}};Vn.default=uc;Object.defineProperty(Cn,"__esModule",{value:!0});const cc=Rn,lc=Tn,dc=jn,fc=In,hc=An,pc=Dn,mc=Mn,vc=Un,yc=qn,$c=Vn,gc=[cc.default,lc.default,dc.default,fc.default,hc.default,pc.default,mc.default,vc.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},yc.default,$c.default];Cn.default=gc;var Fn={},jt={};Object.defineProperty(jt,"__esModule",{value:!0});jt.validateAdditionalItems=void 0;const ut=H,un=I,_c={message:({params:{len:e}})=>(0,ut.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,ut._)`{limit: ${e}}`},wc={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:_c,code(e){const{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,un.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Xs(e,n)}};function Xs(e,t){const{gen:r,schema:n,data:a,keyword:s,it:i}=e;i.items=!0;const l=r.const("len",(0,ut._)`${a}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,ut._)`${l} <= ${t.length}`);else if(typeof n=="object"&&!(0,un.alwaysValidSchema)(i,n)){const c=r.var("valid",(0,ut._)`${l} <= ${t.length}`);r.if((0,ut.not)(c),()=>f(c)),e.ok(c)}function f(c){r.forRange("i",t.length,l,y=>{e.subschema({keyword:s,dataProp:y,dataPropType:un.Type.Num},c),i.allErrors||r.if((0,ut.not)(c),()=>r.break())})}}jt.validateAdditionalItems=Xs;jt.default=wc;var Ln={},kt={};Object.defineProperty(kt,"__esModule",{value:!0});kt.validateTuple=void 0;const ja=H,pr=I,bc=K,Ec={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return Qs(e,"additionalItems",t);r.items=!0,!(0,pr.alwaysValidSchema)(r,t)&&e.ok((0,bc.validateArray)(e))}};function Qs(e,t,r=e.schema){const{gen:n,parentSchema:a,data:s,keyword:i,it:l}=e;y(a),l.opts.unevaluated&&r.length&&l.items!==!0&&(l.items=pr.mergeEvaluated.items(n,r.length,l.items));const f=n.name("valid"),c=n.const("len",(0,ja._)`${s}.length`);r.forEach(($,O)=>{(0,pr.alwaysValidSchema)(l,$)||(n.if((0,ja._)`${c} > ${O}`,()=>e.subschema({keyword:i,schemaProp:O,dataProp:O},f)),e.ok(f))});function y($){const{opts:O,errSchemaPath:w}=l,S=r.length,P=S===$.minItems&&(S===$.maxItems||$[t]===!1);if(O.strictTuples&&!P){const m=`"${i}" is ${S}-tuple, but minItems or maxItems/${t} are not specified or different at path "${w}"`;(0,pr.checkStrictMode)(l,m,O.strictTuples)}}}kt.validateTuple=Qs;kt.default=Ec;Object.defineProperty(Ln,"__esModule",{value:!0});const Sc=kt,Pc={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Sc.validateTuple)(e,"items")};Ln.default=Pc;var zn={};Object.defineProperty(zn,"__esModule",{value:!0});const ka=H,Nc=I,Oc=K,Cc=jt,Rc={message:({params:{len:e}})=>(0,ka.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,ka._)`{limit: ${e}}`},Tc={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Rc,code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:a}=r;n.items=!0,!(0,Nc.alwaysValidSchema)(n,t)&&(a?(0,Cc.validateAdditionalItems)(e,a):e.ok((0,Oc.validateArray)(e)))}};zn.default=Tc;var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});const Pe=H,ur=I,jc={message:({params:{min:e,max:t}})=>t===void 0?(0,Pe.str)`must contain at least ${e} valid item(s)`:(0,Pe.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Pe._)`{minContains: ${e}}`:(0,Pe._)`{minContains: ${e}, maxContains: ${t}}`},kc={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:jc,code(e){const{gen:t,schema:r,parentSchema:n,data:a,it:s}=e;let i,l;const{minContains:f,maxContains:c}=n;s.opts.next?(i=f===void 0?1:f,l=c):i=1;const y=t.const("len",(0,Pe._)`${a}.length`);if(e.setParams({min:i,max:l}),l===void 0&&i===0){(0,ur.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(l!==void 0&&i>l){(0,ur.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,ur.alwaysValidSchema)(s,r)){let P=(0,Pe._)`${y} >= ${i}`;l!==void 0&&(P=(0,Pe._)`${P} && ${y} <= ${l}`),e.pass(P);return}s.items=!0;const $=t.name("valid");l===void 0&&i===1?w($,()=>t.if($,()=>t.break())):i===0?(t.let($,!0),l!==void 0&&t.if((0,Pe._)`${a}.length > 0`,O)):(t.let($,!1),O()),e.result($,()=>e.reset());function O(){const P=t.name("_valid"),m=t.let("count",0);w(P,()=>t.if(P,()=>S(m)))}function w(P,m){t.forRange("i",0,y,v=>{e.subschema({keyword:"contains",dataProp:v,dataPropType:ur.Type.Num,compositeRule:!0},P),m()})}function S(P){t.code((0,Pe._)`${P}++`),l===void 0?t.if((0,Pe._)`${P} >= ${i}`,()=>t.assign($,!0).break()):(t.if((0,Pe._)`${P} > ${l}`,()=>t.assign($,!1).break()),i===1?t.assign($,!0):t.if((0,Pe._)`${P} >= ${i}`,()=>t.assign($,!0)))}}};Kn.default=kc;var Ys={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=H,r=I,n=K;e.error={message:({params:{property:f,depsCount:c,deps:y}})=>{const $=c===1?"property":"properties";return(0,t.str)`must have ${$} ${y} when property ${f} is present`},params:({params:{property:f,depsCount:c,deps:y,missingProperty:$}})=>(0,t._)`{property: ${f},
    missingProperty: ${$},
    depsCount: ${c},
    deps: ${y}}`};const a={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(f){const[c,y]=s(f);i(f,c),l(f,y)}};function s({schema:f}){const c={},y={};for(const $ in f){if($==="__proto__")continue;const O=Array.isArray(f[$])?c:y;O[$]=f[$]}return[c,y]}function i(f,c=f.schema){const{gen:y,data:$,it:O}=f;if(Object.keys(c).length===0)return;const w=y.let("missing");for(const S in c){const P=c[S];if(P.length===0)continue;const m=(0,n.propertyInData)(y,$,S,O.opts.ownProperties);f.setParams({property:S,depsCount:P.length,deps:P.join(", ")}),O.allErrors?y.if(m,()=>{for(const v of P)(0,n.checkReportMissingProp)(f,v)}):(y.if((0,t._)`${m} && (${(0,n.checkMissingProp)(f,P,w)})`),(0,n.reportMissingProp)(f,w),y.else())}}e.validatePropertyDeps=i;function l(f,c=f.schema){const{gen:y,data:$,keyword:O,it:w}=f,S=y.name("valid");for(const P in c)(0,r.alwaysValidSchema)(w,c[P])||(y.if((0,n.propertyInData)(y,$,P,w.opts.ownProperties),()=>{const m=f.subschema({keyword:O,schemaProp:P},S);f.mergeValidEvaluated(m,S)},()=>y.var(S,!0)),f.ok(S))}e.validateSchemaDeps=l,e.default=a})(Ys);var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});const Zs=H,Ic=I,Ac={message:"property name must be valid",params:({params:e})=>(0,Zs._)`{propertyName: ${e.propertyName}}`},Dc={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Ac,code(e){const{gen:t,schema:r,data:n,it:a}=e;if((0,Ic.alwaysValidSchema)(a,r))return;const s=t.name("valid");t.forIn("key",n,i=>{e.setParams({propertyName:i}),e.subschema({keyword:"propertyNames",data:i,dataTypes:["string"],propertyName:i,compositeRule:!0},s),t.if((0,Zs.not)(s),()=>{e.error(!0),a.allErrors||t.break()})}),e.ok(s)}};Hn.default=Dc;var Or={};Object.defineProperty(Or,"__esModule",{value:!0});const cr=K,Oe=H,Mc=Le,lr=I,Uc={message:"must NOT have additional properties",params:({params:e})=>(0,Oe._)`{additionalProperty: ${e.additionalProperty}}`},qc={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Uc,code(e){const{gen:t,schema:r,parentSchema:n,data:a,errsCount:s,it:i}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:l,opts:f}=i;if(i.props=!0,f.removeAdditional!=="all"&&(0,lr.alwaysValidSchema)(i,r))return;const c=(0,cr.allSchemaProperties)(n.properties),y=(0,cr.allSchemaProperties)(n.patternProperties);$(),e.ok((0,Oe._)`${s} === ${Mc.default.errors}`);function $(){t.forIn("key",a,m=>{!c.length&&!y.length?S(m):t.if(O(m),()=>S(m))})}function O(m){let v;if(c.length>8){const N=(0,lr.schemaRefOrVal)(i,n.properties,"properties");v=(0,cr.isOwnProperty)(t,N,m)}else c.length?v=(0,Oe.or)(...c.map(N=>(0,Oe._)`${m} === ${N}`)):v=Oe.nil;return y.length&&(v=(0,Oe.or)(v,...y.map(N=>(0,Oe._)`${(0,cr.usePattern)(e,N)}.test(${m})`))),(0,Oe.not)(v)}function w(m){t.code((0,Oe._)`delete ${a}[${m}]`)}function S(m){if(f.removeAdditional==="all"||f.removeAdditional&&r===!1){w(m);return}if(r===!1){e.setParams({additionalProperty:m}),e.error(),l||t.break();return}if(typeof r=="object"&&!(0,lr.alwaysValidSchema)(i,r)){const v=t.name("valid");f.removeAdditional==="failing"?(P(m,v,!1),t.if((0,Oe.not)(v),()=>{e.reset(),w(m)})):(P(m,v),l||t.if((0,Oe.not)(v),()=>t.break()))}}function P(m,v,N){const T={keyword:"additionalProperties",dataProp:m,dataPropType:lr.Type.Str};N===!1&&Object.assign(T,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(T,v)}}};Or.default=qc;var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});const Vc=Re,Ia=K,Ur=I,Aa=Or,Fc={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:n,data:a,it:s}=e;s.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&Aa.default.code(new Vc.KeywordCxt(s,Aa.default,"additionalProperties"));const i=(0,Ia.allSchemaProperties)(r);for(const $ of i)s.definedProperties.add($);s.opts.unevaluated&&i.length&&s.props!==!0&&(s.props=Ur.mergeEvaluated.props(t,(0,Ur.toHash)(i),s.props));const l=i.filter($=>!(0,Ur.alwaysValidSchema)(s,r[$]));if(l.length===0)return;const f=t.name("valid");for(const $ of l)c($)?y($):(t.if((0,Ia.propertyInData)(t,a,$,s.opts.ownProperties)),y($),s.allErrors||t.else().var(f,!0),t.endIf()),e.it.definedProperties.add($),e.ok(f);function c($){return s.opts.useDefaults&&!s.compositeRule&&r[$].default!==void 0}function y($){e.subschema({keyword:"properties",schemaProp:$,dataProp:$},f)}}};Bn.default=Fc;var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});const Da=K,dr=H,Ma=I,Ua=I,Lc={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:n,parentSchema:a,it:s}=e,{opts:i}=s,l=(0,Da.allSchemaProperties)(r),f=l.filter(P=>(0,Ma.alwaysValidSchema)(s,r[P]));if(l.length===0||f.length===l.length&&(!s.opts.unevaluated||s.props===!0))return;const c=i.strictSchema&&!i.allowMatchingProperties&&a.properties,y=t.name("valid");s.props!==!0&&!(s.props instanceof dr.Name)&&(s.props=(0,Ua.evaluatedPropsToName)(t,s.props));const{props:$}=s;O();function O(){for(const P of l)c&&w(P),s.allErrors?S(P):(t.var(y,!0),S(P),t.if(y))}function w(P){for(const m in c)new RegExp(P).test(m)&&(0,Ma.checkStrictMode)(s,`property ${m} matches pattern ${P} (use allowMatchingProperties)`)}function S(P){t.forIn("key",n,m=>{t.if((0,dr._)`${(0,Da.usePattern)(e,P)}.test(${m})`,()=>{const v=f.includes(P);v||e.subschema({keyword:"patternProperties",schemaProp:P,dataProp:m,dataPropType:Ua.Type.Str},y),s.opts.unevaluated&&$!==!0?t.assign((0,dr._)`${$}[${m}]`,!0):!v&&!s.allErrors&&t.if((0,dr.not)(y),()=>t.break())})})}}};Gn.default=Lc;var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});const zc=I,Kc={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:n}=e;if((0,zc.alwaysValidSchema)(n,r)){e.fail();return}const a=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},a),e.failResult(a,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Jn.default=Kc;var xn={};Object.defineProperty(xn,"__esModule",{value:!0});const Hc=K,Bc={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Hc.validateUnion,error:{message:"must match a schema in anyOf"}};xn.default=Bc;var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});const mr=H,Gc=I,Jc={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,mr._)`{passingSchemas: ${e.passing}}`},xc={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Jc,code(e){const{gen:t,schema:r,parentSchema:n,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(a.opts.discriminator&&n.discriminator)return;const s=r,i=t.let("valid",!1),l=t.let("passing",null),f=t.name("_valid");e.setParams({passing:l}),t.block(c),e.result(i,()=>e.reset(),()=>e.error(!0));function c(){s.forEach((y,$)=>{let O;(0,Gc.alwaysValidSchema)(a,y)?t.var(f,!0):O=e.subschema({keyword:"oneOf",schemaProp:$,compositeRule:!0},f),$>0&&t.if((0,mr._)`${f} && ${i}`).assign(i,!1).assign(l,(0,mr._)`[${l}, ${$}]`).else(),t.if(f,()=>{t.assign(i,!0),t.assign(l,$),O&&e.mergeEvaluated(O,mr.Name)})})}}};Wn.default=xc;var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0});const Wc=I,Xc={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const a=t.name("valid");r.forEach((s,i)=>{if((0,Wc.alwaysValidSchema)(n,s))return;const l=e.subschema({keyword:"allOf",schemaProp:i},a);e.ok(a),e.mergeEvaluated(l)})}};Xn.default=Xc;var Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});const br=H,eo=I,Qc={message:({params:e})=>(0,br.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,br._)`{failingKeyword: ${e.ifClause}}`},Yc={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Qc,code(e){const{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,eo.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const a=qa(n,"then"),s=qa(n,"else");if(!a&&!s)return;const i=t.let("valid",!0),l=t.name("_valid");if(f(),e.reset(),a&&s){const y=t.let("ifClause");e.setParams({ifClause:y}),t.if(l,c("then",y),c("else",y))}else a?t.if(l,c("then")):t.if((0,br.not)(l),c("else"));e.pass(i,()=>e.error(!0));function f(){const y=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},l);e.mergeEvaluated(y)}function c(y,$){return()=>{const O=e.subschema({keyword:y},l);t.assign(i,l),e.mergeValidEvaluated(O,i),$?t.assign($,(0,br._)`${y}`):e.setParams({ifClause:y})}}}};function qa(e,t){const r=e.schema[t];return r!==void 0&&!(0,eo.alwaysValidSchema)(e,r)}Qn.default=Yc;var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});const Zc=I,el={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,Zc.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};Yn.default=el;Object.defineProperty(Fn,"__esModule",{value:!0});const tl=jt,rl=Ln,nl=kt,al=zn,sl=Kn,ol=Ys,il=Hn,ul=Or,cl=Bn,ll=Gn,dl=Jn,fl=xn,hl=Wn,pl=Xn,ml=Qn,vl=Yn;function yl(e=!1){const t=[dl.default,fl.default,hl.default,pl.default,ml.default,vl.default,il.default,ul.default,ol.default,cl.default,ll.default];return e?t.push(rl.default,al.default):t.push(tl.default,nl.default),t.push(sl.default),t}Fn.default=yl;var Zn={},ea={};Object.defineProperty(ea,"__esModule",{value:!0});const oe=H,$l={message:({schemaCode:e})=>(0,oe.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,oe._)`{format: ${e}}`},gl={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:$l,code(e,t){const{gen:r,data:n,$data:a,schema:s,schemaCode:i,it:l}=e,{opts:f,errSchemaPath:c,schemaEnv:y,self:$}=l;if(!f.validateFormats)return;a?O():w();function O(){const S=r.scopeValue("formats",{ref:$.formats,code:f.code.formats}),P=r.const("fDef",(0,oe._)`${S}[${i}]`),m=r.let("fType"),v=r.let("format");r.if((0,oe._)`typeof ${P} == "object" && !(${P} instanceof RegExp)`,()=>r.assign(m,(0,oe._)`${P}.type || "string"`).assign(v,(0,oe._)`${P}.validate`),()=>r.assign(m,(0,oe._)`"string"`).assign(v,P)),e.fail$data((0,oe.or)(N(),T()));function N(){return f.strictSchema===!1?oe.nil:(0,oe._)`${i} && !${v}`}function T(){const A=y.$async?(0,oe._)`(${P}.async ? await ${v}(${n}) : ${v}(${n}))`:(0,oe._)`${v}(${n})`,M=(0,oe._)`(typeof ${v} == "function" ? ${A} : ${v}.test(${n}))`;return(0,oe._)`${v} && ${v} !== true && ${m} === ${t} && !${M}`}}function w(){const S=$.formats[s];if(!S){N();return}if(S===!0)return;const[P,m,v]=T(S);P===t&&e.pass(A());function N(){if(f.strictSchema===!1){$.logger.warn(M());return}throw new Error(M());function M(){return`unknown format "${s}" ignored in schema at path "${c}"`}}function T(M){const B=M instanceof RegExp?(0,oe.regexpCode)(M):f.code.formats?(0,oe._)`${f.code.formats}${(0,oe.getProperty)(s)}`:void 0,X=r.scopeValue("formats",{key:s,ref:M,code:B});return typeof M=="object"&&!(M instanceof RegExp)?[M.type||"string",M.validate,(0,oe._)`${X}.validate`]:["string",M,X]}function A(){if(typeof S=="object"&&!(S instanceof RegExp)&&S.async){if(!y.$async)throw new Error("async format in sync schema");return(0,oe._)`await ${v}(${n})`}return typeof m=="function"?(0,oe._)`${v}(${n})`:(0,oe._)`${v}.test(${n})`}}}};ea.default=gl;Object.defineProperty(Zn,"__esModule",{value:!0});const _l=ea,wl=[_l.default];Zn.default=wl;var Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.contentVocabulary=Rt.metadataVocabulary=void 0;Rt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Rt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Pn,"__esModule",{value:!0});const bl=Nn,El=Cn,Sl=Fn,Pl=Zn,Va=Rt,Nl=[bl.default,El.default,(0,Sl.default)(),Pl.default,Va.metadataVocabulary,Va.contentVocabulary];Pn.default=Nl;var ta={},Cr={};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.DiscrError=void 0;var Fa;(function(e){e.Tag="tag",e.Mapping="mapping"})(Fa||(Cr.DiscrError=Fa={}));Object.defineProperty(ta,"__esModule",{value:!0});const Pt=H,cn=Cr,La=_e,Ol=Tt,Cl=I,Rl={message:({params:{discrError:e,tagName:t}})=>e===cn.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,Pt._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},Tl={keyword:"discriminator",type:"object",schemaType:"object",error:Rl,code(e){const{gen:t,data:r,schema:n,parentSchema:a,it:s}=e,{oneOf:i}=a;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const l=n.propertyName;if(typeof l!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!i)throw new Error("discriminator: requires oneOf keyword");const f=t.let("valid",!1),c=t.const("tag",(0,Pt._)`${r}${(0,Pt.getProperty)(l)}`);t.if((0,Pt._)`typeof ${c} == "string"`,()=>y(),()=>e.error(!1,{discrError:cn.DiscrError.Tag,tag:c,tagName:l})),e.ok(f);function y(){const w=O();t.if(!1);for(const S in w)t.elseIf((0,Pt._)`${c} === ${S}`),t.assign(f,$(w[S]));t.else(),e.error(!1,{discrError:cn.DiscrError.Mapping,tag:c,tagName:l}),t.endIf()}function $(w){const S=t.name("valid"),P=e.subschema({keyword:"oneOf",schemaProp:w},S);return e.mergeEvaluated(P,Pt.Name),S}function O(){var w;const S={},P=v(a);let m=!0;for(let A=0;A<i.length;A++){let M=i[A];if(M!=null&&M.$ref&&!(0,Cl.schemaHasRulesButRef)(M,s.self.RULES)){const X=M.$ref;if(M=La.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,X),M instanceof La.SchemaEnv&&(M=M.schema),M===void 0)throw new Ol.default(s.opts.uriResolver,s.baseId,X)}const B=(w=M==null?void 0:M.properties)===null||w===void 0?void 0:w[l];if(typeof B!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${l}"`);m=m&&(P||v(M)),N(B,A)}if(!m)throw new Error(`discriminator: "${l}" must be required`);return S;function v({required:A}){return Array.isArray(A)&&A.includes(l)}function N(A,M){if(A.const)T(A.const,M);else if(A.enum)for(const B of A.enum)T(B,M);else throw new Error(`discriminator: "properties/${l}" must have "const" or "enum"`)}function T(A,M){if(typeof A!="string"||A in S)throw new Error(`discriminator: "${l}" values must be unique strings`);S[A]=M}}}};ta.default=Tl;const jl="http://json-schema.org/draft-07/schema#",kl="http://json-schema.org/draft-07/schema#",Il="Core schema meta-schema",Al={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Dl=["object","boolean"],Ml={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Ul={$schema:jl,$id:kl,title:Il,definitions:Al,type:Dl,properties:Ml,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=hs,n=Pn,a=ta,s=Ul,i=["/properties"],l="http://json-schema.org/draft-07/schema";class f extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(S=>this.addVocabulary(S)),this.opts.discriminator&&this.addKeyword(a.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const S=this.opts.$data?this.$dataMetaSchema(s,i):s;this.addMetaSchema(S,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}t.Ajv=f,e.exports=t=f,e.exports.Ajv=f,Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var c=Re;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return c.KeywordCxt}});var y=H;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return y._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return y.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return y.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return y.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return y.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return y.CodeGen}});var $=er;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return $.default}});var O=Tt;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return O.default}})})(en,en.exports);var ql=en.exports;const Vl=hn(ql),Fl={type:"object",properties:{id:{type:"string"},topic:{type:"string"},payload:{type:"object"}},required:["id","topic","payload"],additionalProperties:!1},za=100;class Er{constructor(){this.subscriptionCounter=0,this.subscribers=[],this.messageCounter=0,this.validator=new Vl().compile(Fl),this.buffer=[...Array(za)],window.addEventListener("message",this.onWindowsMessage.bind(this),!1)}static get instance(){return window._bonesQueue||(window._bonesQueue=new Er),window._bonesQueue}publish(t,r){if(this.publishInternal(t,r),window.top&&window.top!==window.self){this.messageCounter++;const a={id:"remote_"+this.messageCounter,topic:t,payload:r};this.buffer[this.messageCounter%za]=a.id,window.top.postMessage(JSON.stringify(a),"*")}}subscribe(t,r){return this.subscriptionCounter++,this.subscribers.push({id:this.subscriptionCounter,topic:t,callback:r}),this.subscriptionCounter}unsubscribe(t){const r=Qt.findIndex(this.subscribers,n=>n.id==t);r!=-1&&this.subscribers.splice(r,1)}publishInternal(t,r){Qt(this.subscribers).filter(n=>n.topic===t||n.topic==="*").forEach(n=>{try{n.callback(t,r)}catch(a){console.error(a)}})}onWindowsMessage(t){let r;try{r=JSON.parse(t.data)}catch{return}this.validator(r)&&(this.buffer.includes(r.id)||this.publishInternal(r.topic,r.payload))}}class Ll{constructor(t){this.counter=0,this.subscribers=[],this.topic=`entity.${t.toLowerCase()}`,Er.instance.subscribe(this.topic,this.onEntityEvent.bind(this))}onEntityEvent(t,r){Qt(this.subscribers).filter(n=>n.ev===r.action||n.ev=="all").forEach(n=>{try{n.callback(r.action,r.payload)}catch(a){console.error(a)}})}subscribe(t,r){return this.counter++,this.subscribers.push({ev:t,callback:r,id:this.counter}),this.counter}unsubscribe(t){const r=Qt.findIndex(this.subscribers,n=>n.id==t);r!=-1&&this.subscribers.splice(r,1)}notify(t,r){const n={action:t,payload:r};Er.instance.publish(this.topic,n)}}var ra={exports:{}},to=function(t,r){return function(){for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];return t.apply(r,a)}},zl=to,dt=Object.prototype.toString;function na(e){return dt.call(e)==="[object Array]"}function ln(e){return typeof e>"u"}function Kl(e){return e!==null&&!ln(e)&&e.constructor!==null&&!ln(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Hl(e){return dt.call(e)==="[object ArrayBuffer]"}function Bl(e){return typeof FormData<"u"&&e instanceof FormData}function Gl(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function Jl(e){return typeof e=="string"}function xl(e){return typeof e=="number"}function ro(e){return e!==null&&typeof e=="object"}function vr(e){if(dt.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function Wl(e){return dt.call(e)==="[object Date]"}function Xl(e){return dt.call(e)==="[object File]"}function Ql(e){return dt.call(e)==="[object Blob]"}function no(e){return dt.call(e)==="[object Function]"}function Yl(e){return ro(e)&&no(e.pipe)}function Zl(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function ed(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function td(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function aa(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),na(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}function dn(){var e={};function t(a,s){vr(e[s])&&vr(a)?e[s]=dn(e[s],a):vr(a)?e[s]=dn({},a):na(a)?e[s]=a.slice():e[s]=a}for(var r=0,n=arguments.length;r<n;r++)aa(arguments[r],t);return e}function rd(e,t,r){return aa(t,function(a,s){r&&typeof a=="function"?e[s]=zl(a,r):e[s]=a}),e}function nd(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var be={isArray:na,isArrayBuffer:Hl,isBuffer:Kl,isFormData:Bl,isArrayBufferView:Gl,isString:Jl,isNumber:xl,isObject:ro,isPlainObject:vr,isUndefined:ln,isDate:Wl,isFile:Xl,isBlob:Ql,isFunction:no,isStream:Yl,isURLSearchParams:Zl,isStandardBrowserEnv:td,forEach:aa,merge:dn,extend:rd,trim:ed,stripBOM:nd},Et=be;function Ka(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var sa=function(t,r,n){if(!r)return t;var a;if(n)a=n(r);else if(Et.isURLSearchParams(r))a=r.toString();else{var s=[];Et.forEach(r,function(f,c){f===null||typeof f>"u"||(Et.isArray(f)?c=c+"[]":f=[f],Et.forEach(f,function($){Et.isDate($)?$=$.toISOString():Et.isObject($)&&($=JSON.stringify($)),s.push(Ka(c)+"="+Ka($))}))}),a=s.join("&")}if(a){var i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t};const ad=hn(sa);var sd=be;function Rr(){this.handlers=[]}Rr.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Rr.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Rr.prototype.forEach=function(t){sd.forEach(this.handlers,function(n){n!==null&&t(n)})};var od=Rr,id=be,ud=function(t,r){id.forEach(t,function(a,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(t[r]=a,delete t[s])})},ao=function(t,r,n,a,s){return t.config=r,n&&(t.code=n),t.request=a,t.response=s,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},qr,Ha;function so(){if(Ha)return qr;Ha=1;var e=ao;return qr=function(r,n,a,s,i){var l=new Error(r);return e(l,n,a,s,i)},qr}var Vr,Ba;function cd(){if(Ba)return Vr;Ba=1;var e=so();return Vr=function(r,n,a){var s=a.config.validateStatus;!a.status||!s||s(a.status)?r(a):n(e("Request failed with status code "+a.status,a.config,null,a.request,a))},Vr}var Fr,Ga;function ld(){if(Ga)return Fr;Ga=1;var e=be;return Fr=e.isStandardBrowserEnv()?function(){return{write:function(n,a,s,i,l,f){var c=[];c.push(n+"="+encodeURIComponent(a)),e.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),e.isString(i)&&c.push("path="+i),e.isString(l)&&c.push("domain="+l),f===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(n){var a=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Fr}var Lr,Ja;function dd(){return Ja||(Ja=1,Lr=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),Lr}var zr,xa;function fd(){return xa||(xa=1,zr=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}),zr}var Kr,Wa;function hd(){if(Wa)return Kr;Wa=1;var e=dd(),t=fd();return Kr=function(n,a){return n&&!e(a)?t(n,a):a},Kr}var Hr,Xa;function pd(){if(Xa)return Hr;Xa=1;var e=be,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Hr=function(n){var a={},s,i,l;return n&&e.forEach(n.split(`
`),function(c){if(l=c.indexOf(":"),s=e.trim(c.substr(0,l)).toLowerCase(),i=e.trim(c.substr(l+1)),s){if(a[s]&&t.indexOf(s)>=0)return;s==="set-cookie"?a[s]=(a[s]?a[s]:[]).concat([i]):a[s]=a[s]?a[s]+", "+i:i}}),a},Hr}var Br,Qa;function md(){if(Qa)return Br;Qa=1;var e=be;return Br=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),a;function s(i){var l=i;return r&&(n.setAttribute("href",l),l=n.href),n.setAttribute("href",l),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return a=s(window.location.href),function(l){var f=e.isString(l)?s(l):l;return f.protocol===a.protocol&&f.host===a.host}}():function(){return function(){return!0}}(),Br}var Gr,Ya;function Za(){if(Ya)return Gr;Ya=1;var e=be,t=cd(),r=ld(),n=sa,a=hd(),s=pd(),i=md(),l=so();return Gr=function(c){return new Promise(function($,O){var w=c.data,S=c.headers,P=c.responseType;e.isFormData(w)&&delete S["Content-Type"];var m=new XMLHttpRequest;if(c.auth){var v=c.auth.username||"",N=c.auth.password?unescape(encodeURIComponent(c.auth.password)):"";S.Authorization="Basic "+btoa(v+":"+N)}var T=a(c.baseURL,c.url);m.open(c.method.toUpperCase(),n(T,c.params,c.paramsSerializer),!0),m.timeout=c.timeout;function A(){if(m){var B="getAllResponseHeaders"in m?s(m.getAllResponseHeaders()):null,X=!P||P==="text"||P==="json"?m.responseText:m.response,le={data:X,status:m.status,statusText:m.statusText,headers:B,config:c,request:m};t($,O,le),m=null}}if("onloadend"in m?m.onloadend=A:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(A)},m.onabort=function(){m&&(O(l("Request aborted",c,"ECONNABORTED",m)),m=null)},m.onerror=function(){O(l("Network Error",c,null,m)),m=null},m.ontimeout=function(){var X="timeout of "+c.timeout+"ms exceeded";c.timeoutErrorMessage&&(X=c.timeoutErrorMessage),O(l(X,c,c.transitional&&c.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",m)),m=null},e.isStandardBrowserEnv()){var M=(c.withCredentials||i(T))&&c.xsrfCookieName?r.read(c.xsrfCookieName):void 0;M&&(S[c.xsrfHeaderName]=M)}"setRequestHeader"in m&&e.forEach(S,function(X,le){typeof w>"u"&&le.toLowerCase()==="content-type"?delete S[le]:m.setRequestHeader(le,X)}),e.isUndefined(c.withCredentials)||(m.withCredentials=!!c.withCredentials),P&&P!=="json"&&(m.responseType=c.responseType),typeof c.onDownloadProgress=="function"&&m.addEventListener("progress",c.onDownloadProgress),typeof c.onUploadProgress=="function"&&m.upload&&m.upload.addEventListener("progress",c.onUploadProgress),c.cancelToken&&c.cancelToken.promise.then(function(X){m&&(m.abort(),O(X),m=null)}),w||(w=null),m.send(w)})},Gr}var fe=be,es=ud,vd=ao,yd={"Content-Type":"application/x-www-form-urlencoded"};function ts(e,t){!fe.isUndefined(e)&&fe.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function $d(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=Za()),e}function gd(e,t,r){if(fe.isString(e))try{return(t||JSON.parse)(e),fe.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(e)}var Tr={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:$d(),transformRequest:[function(t,r){return es(r,"Accept"),es(r,"Content-Type"),fe.isFormData(t)||fe.isArrayBuffer(t)||fe.isBuffer(t)||fe.isStream(t)||fe.isFile(t)||fe.isBlob(t)?t:fe.isArrayBufferView(t)?t.buffer:fe.isURLSearchParams(t)?(ts(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):fe.isObject(t)||r&&r["Content-Type"]==="application/json"?(ts(r,"application/json"),gd(t)):t}],transformResponse:[function(t){var r=this.transitional,n=r&&r.silentJSONParsing,a=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||a&&fe.isString(t)&&t.length)try{return JSON.parse(t)}catch(i){if(s)throw i.name==="SyntaxError"?vd(i,this,"E_JSON_PARSE"):i}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};Tr.headers={common:{Accept:"application/json, text/plain, */*"}};fe.forEach(["delete","get","head"],function(t){Tr.headers[t]={}});fe.forEach(["post","put","patch"],function(t){Tr.headers[t]=fe.merge(yd)});var oa=Tr,_d=be,wd=oa,bd=function(t,r,n){var a=this||wd;return _d.forEach(n,function(i){t=i.call(a,t,r)}),t},Jr,rs;function oo(){return rs||(rs=1,Jr=function(t){return!!(t&&t.__CANCEL__)}),Jr}var ns=be,xr=bd,Ed=oo(),Sd=oa;function Wr(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var Pd=function(t){Wr(t),t.headers=t.headers||{},t.data=xr.call(t,t.data,t.headers,t.transformRequest),t.headers=ns.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),ns.forEach(["delete","get","head","post","put","patch","common"],function(a){delete t.headers[a]});var r=t.adapter||Sd.adapter;return r(t).then(function(a){return Wr(t),a.data=xr.call(t,a.data,a.headers,t.transformResponse),a},function(a){return Ed(a)||(Wr(t),a&&a.response&&(a.response.data=xr.call(t,a.response.data,a.response.headers,t.transformResponse))),Promise.reject(a)})},ve=be,io=function(t,r){r=r||{};var n={},a=["url","method","data"],s=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function f(O,w){return ve.isPlainObject(O)&&ve.isPlainObject(w)?ve.merge(O,w):ve.isPlainObject(w)?ve.merge({},w):ve.isArray(w)?w.slice():w}function c(O){ve.isUndefined(r[O])?ve.isUndefined(t[O])||(n[O]=f(void 0,t[O])):n[O]=f(t[O],r[O])}ve.forEach(a,function(w){ve.isUndefined(r[w])||(n[w]=f(void 0,r[w]))}),ve.forEach(s,c),ve.forEach(i,function(w){ve.isUndefined(r[w])?ve.isUndefined(t[w])||(n[w]=f(void 0,t[w])):n[w]=f(void 0,r[w])}),ve.forEach(l,function(w){w in r?n[w]=f(t[w],r[w]):w in t&&(n[w]=f(void 0,t[w]))});var y=a.concat(s).concat(i).concat(l),$=Object.keys(t).concat(Object.keys(r)).filter(function(w){return y.indexOf(w)===-1});return ve.forEach($,c),n};const Nd="axios",Od="0.21.4",Cd="Promise based HTTP client for the browser and node.js",Rd="index.js",Td={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},jd={type:"git",url:"https://github.com/axios/axios.git"},kd=["xhr","http","ajax","promise","node"],Id="Matt Zabriskie",Ad="MIT",Dd={url:"https://github.com/axios/axios/issues"},Md="https://axios-http.com",Ud={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},qd={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},Vd="dist/axios.min.js",Fd="dist/axios.min.js",Ld="./index.d.ts",zd={"follow-redirects":"^1.14.0"},Kd=[{path:"./dist/axios.min.js",threshold:"5kB"}],Hd={name:Nd,version:Od,description:Cd,main:Rd,scripts:Td,repository:jd,keywords:kd,author:Id,license:Ad,bugs:Dd,homepage:Md,devDependencies:Ud,browser:qd,jsdelivr:Vd,unpkg:Fd,typings:Ld,dependencies:zd,bundlesize:Kd};var uo=Hd,ia={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){ia[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var as={},Bd=uo.version.split(".");function co(e,t){for(var r=t?t.split("."):Bd,n=e.split("."),a=0;a<3;a++){if(r[a]>n[a])return!0;if(r[a]<n[a])return!1}return!1}ia.transitional=function(t,r,n){var a=r&&co(r);function s(i,l){return"[Axios v"+uo.version+"] Transitional option '"+i+"'"+l+(n?". "+n:"")}return function(i,l,f){if(t===!1)throw new Error(s(l," has been removed in "+r));return a&&!as[l]&&(as[l]=!0,console.warn(s(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,l,f):!0}};function Gd(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),a=n.length;a-- >0;){var s=n[a],i=t[s];if(i){var l=e[s],f=l===void 0||i(l,s,e);if(f!==!0)throw new TypeError("option "+s+" must be "+f);continue}if(r!==!0)throw Error("Unknown option "+s)}}var Jd={isOlderVersion:co,assertOptions:Gd,validators:ia},lo=be,xd=sa,ss=od,os=Pd,jr=io,fo=Jd,St=fo.validators;function rr(e){this.defaults=e,this.interceptors={request:new ss,response:new ss}}rr.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=jr(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&fo.assertOptions(r,{silentJSONParsing:St.transitional(St.boolean,"1.0.0"),forcedJSONParsing:St.transitional(St.boolean,"1.0.0"),clarifyTimeoutError:St.transitional(St.boolean,"1.0.0")},!1);var n=[],a=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(t)===!1||(a=a&&O.synchronous,n.unshift(O.fulfilled,O.rejected))});var s=[];this.interceptors.response.forEach(function(O){s.push(O.fulfilled,O.rejected)});var i;if(!a){var l=[os,void 0];for(Array.prototype.unshift.apply(l,n),l=l.concat(s),i=Promise.resolve(t);l.length;)i=i.then(l.shift(),l.shift());return i}for(var f=t;n.length;){var c=n.shift(),y=n.shift();try{f=c(f)}catch($){y($);break}}try{i=os(f)}catch($){return Promise.reject($)}for(;s.length;)i=i.then(s.shift(),s.shift());return i};rr.prototype.getUri=function(t){return t=jr(this.defaults,t),xd(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};lo.forEach(["delete","get","head","options"],function(t){rr.prototype[t]=function(r,n){return this.request(jr(n||{},{method:t,url:r,data:(n||{}).data}))}});lo.forEach(["post","put","patch"],function(t){rr.prototype[t]=function(r,n,a){return this.request(jr(a||{},{method:t,url:r,data:n}))}});var Wd=rr,Xr,is;function ho(){if(is)return Xr;is=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,Xr=e,Xr}var Qr,us;function Xd(){if(us)return Qr;us=1;var e=ho();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(i){n=i});var a=this;r(function(i){a.reason||(a.reason=new e(i),n(a.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var n,a=new t(function(i){n=i});return{token:a,cancel:n}},Qr=t,Qr}var Yr,cs;function Qd(){return cs||(cs=1,Yr=function(t){return function(n){return t.apply(null,n)}}),Yr}var Zr,ls;function Yd(){return ls||(ls=1,Zr=function(t){return typeof t=="object"&&t.isAxiosError===!0}),Zr}var ds=be,Zd=to,yr=Wd,ef=io,tf=oa;function po(e){var t=new yr(e),r=Zd(yr.prototype.request,t);return ds.extend(r,yr.prototype,t),ds.extend(r,t),r}var Te=po(tf);Te.Axios=yr;Te.create=function(t){return po(ef(Te.defaults,t))};Te.Cancel=ho();Te.CancelToken=Xd();Te.isCancel=oo();Te.all=function(t){return Promise.all(t)};Te.spread=Qd();Te.isAxiosError=Yd();ra.exports=Te;ra.exports.default=Te;var rf=ra.exports,nf=rf;const af=hn(nf);function fn(e,t){if(typeof t!="object"||t===null||t instanceof Date)return[{key:e,value:t}];if(Array.isArray(t))return t.length===0?[{key:`${e}[0]`,value:""}]:t.map((r,n)=>fn(`${e}[${n}]`,r)).flat();{const r=[];for(const n in t)r.push(...fn(e+"."+n,t[n]));return r}}function sf(e){for(const t in e)e[t]===void 0&&delete e[t];return e}function of(e){const t={};for(const r in e){const n=fn(r,e[r]);for(const a of n)t[a.key]=a.value}return t}function uf(e,t,r){let n=null;return t&&(n=Qt.cloneDeep(t),n=sf(n),n=of(n)),ad(e,n,r)}const Be=class Be{constructor(t,r){this.notifyService=new Ll(t),this.EntityDetails=r}create(t){return t(this)}createComplete(t,r,n){return this.create(a=>a.build(a.addNotify(),a.addGetMany(t,n),a.addGet(s=>r(s)),a.addCreate(t),a.addUpdate(s=>r(s)),a.addRemove(s=>r(s))))}addGetMany(t,r){return{getMany:async a=>{const s=typeof t=="string"?t:t();return(await Be.http.get(uf(s,a))).data.map(f=>new r(f))}}}addGet(t){return{get:async n=>{const s=(await Be.http.get(t(n))).data;return new this.EntityDetails(s)}}}static addCustom(t,r,n){const a=async(...s)=>{const l=(await r(Be.http,...s)).data;return n(l)};return{[t]:a}}addCreate(t){return{create:async n=>{const a=typeof t=="string"?t:t(),s=await Be.http.post(a,n),i=new this.EntityDetails(s.data);return this.notifyService&&this.notifyService.notify("add",i),i}}}addUpdate(t){return{update:async(n,a)=>{const s=await Be.http.post(t(n),a),i=new this.EntityDetails(s.data);return this.notifyService&&this.notifyService.notify("update",i),i}}}addRemove(t){return{remove:async n=>{await Be.http.delete(t(n)),this.notifyService&&this.notifyService.notify("delete",n)}}}addNotify(t){if(!this.notifyService)throw new Error("Create your service with a type if you want to use notify");const r=this.notifyService,{subscribe:n,unsubscribe:a}=r,s=t?t(r):{};return{subscribe:n.bind(r),unsubscribe:a.bind(r),...s}}build(){return Object.assign({},...arguments)}};Be.http=af;let fs=Be;export{fs as S,Rs as f};
