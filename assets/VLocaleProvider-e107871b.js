import{e as w,d as x,s as b,w as I,A as u,U as O}from"./vue.esm-bundler-41eda46b.js";import{u as A,g as j}from"./date-c4224b64.js";import{u as V}from"./proxiedModel-ebe72836.js";import{p,w as B}from"./theme-d4a333d5.js";import{M as C}from"./transition-87ba966b.js";import{V as N}from"./VDefaultsProvider-9f290faa.js";import{V as T}from"./VBtn-6a9dd5a0.js";import{g as P,m as L,u as Y}from"./useRender-b120e115.js";import{p as R}from"./locale-396b54fa.js";const E=p({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"}},"calendar");function z(a){const e=A(),y=V(a,"modelValue",[],n=>B(n)),c=w(()=>a.displayValue?e.date(a.displayValue):y.value.length>0?e.date(y.value[0]):a.min?e.date(a.min):Array.isArray(a.allowedDates)?e.date(a.allowedDates[0]):e.date()),S=V(a,"year",void 0,n=>{const r=n!=null?Number(n):e.getYear(c.value);return e.startOfYear(e.setYear(e.date(),r))},n=>e.getYear(n)),m=V(a,"month",void 0,n=>{const r=n!=null?Number(n):e.getMonth(c.value),s=e.setYear(e.startOfMonth(e.date()),e.getYear(S.value));return e.setMonth(s,r)},n=>e.getMonth(n)),o=w(()=>{const n=e.getWeekArray(m.value),r=n.flat(),s=6*7;if(a.weeksInMonth==="static"&&r.length<s){const v=r[r.length-1];let k=[];for(let l=1;l<=s-r.length;l++)k.push(e.addDays(v,l)),l%7===0&&(n.push(k),k=[])}return n});function _(n,r){return n.filter(s=>a.weekdays.includes(e.toJsDate(s).getDay())).map((s,v)=>{const k=e.toISO(s),l=!e.isSameMonth(s,m.value),t=e.isSameDay(s,e.startOfMonth(m.value)),f=e.isSameDay(s,e.endOfMonth(m.value)),D=e.isSameDay(s,m.value);return{date:s,isoDate:k,formatted:e.format(s,"keyboardDate"),year:e.getYear(s),month:e.getMonth(s),isDisabled:M(s),isWeekStart:v%7===0,isWeekEnd:v%7===6,isToday:e.isSameDay(s,r),isAdjacent:l,isHidden:l&&!a.showAdjacentMonths,isStart:t,isSelected:y.value.some(g=>e.isSameDay(s,g)),isEnd:f,isSame:D,localized:e.format(s,"dayOfMonth")}})}const i=w(()=>{const n=e.startOfWeek(c.value),r=[];for(let v=0;v<=6;v++)r.push(e.addDays(n,v));const s=e.date();return _(r,s)}),d=w(()=>{const n=o.value.flat(),r=e.date();return _(n,r)}),h=w(()=>o.value.map(n=>n.length?j(e,n[0]):null));function M(n){if(a.disabled)return!0;const r=e.date(n);return a.min&&e.isAfter(e.date(a.min),r)||a.max&&e.isAfter(r,e.date(a.max))?!0:Array.isArray(a.allowedDates)&&a.allowedDates.length>0?!a.allowedDates.some(s=>e.isSameDay(e.date(s),r)):typeof a.allowedDates=="function"?!a.allowedDates(r):!1}return{displayValue:c,daysInMonth:d,daysInWeek:i,genDays:_,model:y,weeksInMonth:o,weekNumbers:h}}const F=p({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...E()},"VDatePickerMonth"),ee=P()({name:"VDatePickerMonth",props:F(),emits:{"update:modelValue":a=>!0,"update:month":a=>!0,"update:year":a=>!0},setup(a,e){let{emit:y,slots:c}=e;const S=x(),{daysInMonth:m,model:o,weekNumbers:_}=z(a),i=A(),d=b(),h=b(),M=b(!1),n=w(()=>M.value?a.reverseTransition:a.transition);a.multiple==="range"&&o.value.length>0&&(d.value=o.value[0],o.value.length>1&&(h.value=o.value[o.value.length-1]));const r=w(()=>{const l=["number","string"].includes(typeof a.multiple)?Number(a.multiple):1/0;return o.value.length>=l});I(m,(l,t)=>{t&&(M.value=i.isBefore(l[0].date,t[0].date))});function s(l){const t=i.startOfDay(l);if(!d.value)d.value=t,o.value=[d.value];else if(h.value)d.value=l,h.value=void 0,o.value=[d.value];else{if(i.isSameDay(t,d.value)){d.value=void 0,o.value=[];return}else i.isBefore(t,d.value)?(h.value=i.endOfDay(d.value),d.value=t):h.value=i.endOfDay(t);const f=i.getDiff(h.value,d.value,"days"),D=[d.value];for(let g=1;g<f;g++){const W=i.addDays(d.value,g);D.push(W)}D.push(h.value),o.value=D}}function v(l){const t=o.value.findIndex(f=>i.isSameDay(f,l));if(t===-1)o.value=[...o.value,l];else{const f=[...o.value];f.splice(t,1),o.value=f}}function k(l){a.multiple==="range"?s(l):a.multiple?v(l):o.value=[l]}return()=>u("div",{class:"v-date-picker-month"},[a.showWeek&&u("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!a.hideWeekdays&&u("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[O("Â ")]),_.value.map(l=>u("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[l]))]),u(C,{name:n.value},{default:()=>{var l;return[u("div",{ref:S,key:(l=m.value[0].date)==null?void 0:l.toString(),class:"v-date-picker-month__days"},[!a.hideWeekdays&&i.getWeekdays().map(t=>u("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[t])),m.value.map((t,f)=>{const D={props:{onClick:()=>k(t.date)},item:t,i:f};return r.value&&!t.isSelected&&(t.isDisabled=!0),u("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":t.isAdjacent,"v-date-picker-month__day--hide-adjacent":t.isHidden,"v-date-picker-month__day--selected":t.isSelected,"v-date-picker-month__day--week-end":t.isWeekEnd,"v-date-picker-month__day--week-start":t.isWeekStart}],"data-v-date":t.isDisabled?void 0:t.isoDate},[(a.showAdjacentMonths||!t.isAdjacent)&&u(N,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(t.isSelected||t.isToday)&&!t.isDisabled?a.color:void 0,disabled:t.isDisabled,icon:!0,ripple:!1,text:t.localized,variant:t.isDisabled?t.isToday?"outlined":"text":t.isToday&&!t.isSelected?"outlined":"flat",onClick:()=>k(t.date)}}},{default:()=>{var g;return[((g=c.day)==null?void 0:g.call(c,D))??u(T,D.props,null)]}})])})])]}})])}});const H=p({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...L()},"VLocaleProvider"),ae=P()({name:"VLocaleProvider",props:H(),setup(a,e){let{slots:y}=e;const{rtlClasses:c}=R(a);return Y(()=>{var S;return u("div",{class:["v-locale-provider",c.value,a.class],style:a.style},[(S=y.default)==null?void 0:S.call(y)])}),{}}});export{ae as V,ee as a};
