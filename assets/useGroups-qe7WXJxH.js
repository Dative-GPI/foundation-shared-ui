var g=Object.defineProperty;var h=(i,e,t)=>e in i?g(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var s=(i,e,t)=>h(i,typeof e!="symbol"?e+"":e,t);import{P as p}from"./pathCrumb-Db-cq5HI.js";import{C as v}from"./base-TJZSgE4h.js";import{S as a}from"./serviceFactory-Bd5jifNi.js";import{C as r}from"./composableFactory-Bs2ItKgK.js";class I{constructor(e){s(this,"id");s(this,"organisationId");s(this,"parentId");s(this,"imageId");s(this,"icon");s(this,"code");s(this,"label");s(this,"tags");s(this,"path");s(this,"groupsIds");s(this,"deviceOrganisationsIds");s(this,"modelsIds");s(this,"recursiveGroupsIds");s(this,"recursiveDeviceOrganisationsIds");s(this,"recursiveModelsIds");this.id=e.id,this.organisationId=e.organisationId,this.parentId=e.parentId,this.imageId=e.imageId,this.icon=e.icon,this.code=e.code,this.label=e.label,this.tags=e.tags,this.path=e.path.map(t=>new p({...t})).sort((t,o)=>o.index-t.index),this.groupsIds=e.groupsIds.slice(),this.deviceOrganisationsIds=e.deviceOrganisationsIds.slice(),this.modelsIds=e.modelsIds.slice(),this.recursiveGroupsIds=e.recursiveGroupsIds.slice(),this.recursiveDeviceOrganisationsIds=e.recursiveDeviceOrganisationsIds.slice(),this.recursiveModelsIds=e.recursiveModelsIds.slice()}}class u extends I{constructor(t){super(t);s(this,"parentIcon");s(this,"parentLabel");this.parentIcon=t.parentIcon,this.parentLabel=t.parentLabel}}const n=()=>`${v()}/groups`,d=i=>`${n()}/${encodeURIComponent(i)}`,c=new a("group",u).create(i=>i.build(i.addGet(d),i.addGetMany(n,I),i.addCreate(n),i.addUpdate(d),i.addRemove(d),i.addNotify(e=>({...a.addCustom("changeParent",(t,o,l)=>t.put(d(o),l),t=>{const o=new u(t);return e.notify("update",o),o})})))),U=r.get(c),L=r.getMany(c);r.custom(c.changeParent);export{U as a,L as u};
