var p=Object.defineProperty;var g=(t,s,e)=>s in t?p(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var i=(t,s,e)=>g(t,typeof s!="symbol"?s+"":s,e);import{U as b}from"./vue.esm-bundler-l-siv0w9.js";import{P as v}from"./pathCrumb-Db-cq5HI.js";import{C as G}from"./base-BWToAT4M.js";import{S as a}from"./serviceFactory-DAEdCiSt.js";import{C as r}from"./composableFactory-DG8ITK-n.js";class l{constructor(s){i(this,"id");i(this,"organisationId");i(this,"parentId");i(this,"imageId");i(this,"icon");i(this,"code");i(this,"label");i(this,"tags");i(this,"path");i(this,"groupsIds");i(this,"deviceOrganisationsIds");i(this,"modelsIds");i(this,"recursiveGroupsIds");i(this,"recursiveDeviceOrganisationsIds");i(this,"recursiveModelsIds");this.id=s.id,this.organisationId=s.organisationId,this.parentId=s.parentId,this.imageId=s.imageId,this.icon=s.icon,this.code=s.code,this.label=s.label,this.tags=s.tags,this.path=s.path.map(e=>new v({...e})).sort((e,o)=>o.index-e.index),this.groupsIds=s.groupsIds.slice(),this.deviceOrganisationsIds=s.deviceOrganisationsIds.slice(),this.modelsIds=s.modelsIds.slice(),this.recursiveGroupsIds=s.recursiveGroupsIds.slice(),this.recursiveDeviceOrganisationsIds=s.recursiveDeviceOrganisationsIds.slice(),this.recursiveModelsIds=s.recursiveModelsIds.slice()}}class I extends l{constructor(e){super(e);i(this,"parentIcon");i(this,"parentLabel");this.parentIcon=e.parentIcon,this.parentLabel=e.parentLabel}}const u=()=>`${G()}/groups`,n=t=>`${u()}/${encodeURIComponent(t)}`;let c=[];const d=new a("group",I).create(t=>t.build(t.addGet(n),t.addGetMany(u,l),t.addCreate(u),t.addUpdate(n),t.addRemove(n),t.addNotify(s=>({...a.addCustom("changeParent",(e,o,h)=>e.put(n(o),h),e=>{const o=new I(e);return s.notify("update",o),o}),subscribeToMany:e=>{b(()=>{c.forEach(o=>s.unsubscribe(o)),c=[]}),c.push(s.subscribe("all",e))}})))),L=d.subscribeToMany,P=r.get(d),x=r.getMany(d);r.create(d);r.update(d);r.remove(d);r.custom(d.changeParent);export{P as a,L as s,x as u};
